{"version":3,"file":"RichTextEditor.stories-6e1b212c.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/is-hotkey/lib/index.js","../../node_modules/direction/index.js","../../node_modules/compute-scroll-into-view/dist/index.js","../../node_modules/scroll-into-view-if-needed/dist/index.js","../../node_modules/immer/dist/immer.mjs","../../node_modules/slate/dist/index.es.js","../../node_modules/@juggle/resize-observer/lib/utils/resizeObservers.js","../../node_modules/@juggle/resize-observer/lib/algorithms/hasActiveObservations.js","../../node_modules/@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js","../../node_modules/@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js","../../node_modules/@juggle/resize-observer/lib/ResizeObserverBoxOptions.js","../../node_modules/@juggle/resize-observer/lib/utils/freeze.js","../../node_modules/@juggle/resize-observer/lib/ResizeObserverSize.js","../../node_modules/@juggle/resize-observer/lib/DOMRectReadOnly.js","../../node_modules/@juggle/resize-observer/lib/utils/element.js","../../node_modules/@juggle/resize-observer/lib/utils/global.js","../../node_modules/@juggle/resize-observer/lib/algorithms/calculateBoxSize.js","../../node_modules/@juggle/resize-observer/lib/ResizeObserverEntry.js","../../node_modules/@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js","../../node_modules/@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js","../../node_modules/@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js","../../node_modules/@juggle/resize-observer/lib/utils/process.js","../../node_modules/@juggle/resize-observer/lib/utils/queueMicroTask.js","../../node_modules/@juggle/resize-observer/lib/utils/queueResizeObserver.js","../../node_modules/@juggle/resize-observer/lib/utils/scheduler.js","../../node_modules/@juggle/resize-observer/lib/ResizeObservation.js","../../node_modules/@juggle/resize-observer/lib/ResizeObserverDetail.js","../../node_modules/@juggle/resize-observer/lib/ResizeObserverController.js","../../node_modules/@juggle/resize-observer/lib/ResizeObserver.js","../../node_modules/slate-react/dist/index.es.js","../../node_modules/slate-history/dist/index.es.js","../../node_modules/@emotion/sheet/dist/emotion-sheet.browser.esm.js","../../node_modules/stylis/src/Enum.js","../../node_modules/stylis/src/Utility.js","../../node_modules/stylis/src/Tokenizer.js","../../node_modules/stylis/src/Parser.js","../../node_modules/stylis/src/Serializer.js","../../node_modules/stylis/src/Middleware.js","../../node_modules/@emotion/memoize/dist/emotion-memoize.esm.js","../../node_modules/@emotion/cache/dist/emotion-cache.browser.esm.js","../../node_modules/@emotion/hash/dist/emotion-hash.esm.js","../../node_modules/@emotion/unitless/dist/emotion-unitless.esm.js","../../node_modules/@emotion/serialize/dist/emotion-serialize.browser.esm.js","../../node_modules/@emotion/utils/dist/emotion-utils.browser.esm.js","../../node_modules/@emotion/css/create-instance/dist/emotion-css-create-instance.esm.js","../../node_modules/@emotion/css/dist/emotion-css.esm.js","../../src/components.tsx","../../src/common-utils.ts","../../src/table-utils/getSelectedTablePath.ts","../../src/table-utils/getTableInfo.ts","../../src/table-constants.ts","../../src/table-utils/initTableElements.ts","../../src/table-utils/getSpannedRowIndexesOfCol.ts","../../src/table-utils/findSpanRootLocation.ts","../../src/table-utils/operations/deleteCol.ts","../../src/table-utils/getSpannedColIndexesOfRow.ts","../../src/table-utils/operations/deleteRow.ts","../../src/table-utils/operations/insertCol.ts","../../src/table-utils/operations/insertRow.ts","../../src/table-utils/operations/insertTable.ts","../../src/table-utils/operations/mergeCells.ts","../../src/table-utils/operations/splitCell.ts","../../src/table-utils/withDeleteTable.ts","../../src/table-utils/withNormalizeTable.ts","../../src/table-utils/withInsertTextInTable.ts","../../src/table-utils/withTable.ts","../../src/table-utils/findSpanCornerLocation.ts","../../src/TableComponents.tsx","../../src/richtext.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * Constants.\n */\n\nvar IS_MAC = typeof window != 'undefined' && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);\n\nvar MODIFIERS = {\n  alt: 'altKey',\n  control: 'ctrlKey',\n  meta: 'metaKey',\n  shift: 'shiftKey'\n};\n\nvar ALIASES = {\n  add: '+',\n  break: 'pause',\n  cmd: 'meta',\n  command: 'meta',\n  ctl: 'control',\n  ctrl: 'control',\n  del: 'delete',\n  down: 'arrowdown',\n  esc: 'escape',\n  ins: 'insert',\n  left: 'arrowleft',\n  mod: IS_MAC ? 'meta' : 'control',\n  opt: 'alt',\n  option: 'alt',\n  return: 'enter',\n  right: 'arrowright',\n  space: ' ',\n  spacebar: ' ',\n  up: 'arrowup',\n  win: 'meta',\n  windows: 'meta'\n};\n\nvar CODES = {\n  backspace: 8,\n  tab: 9,\n  enter: 13,\n  shift: 16,\n  control: 17,\n  alt: 18,\n  pause: 19,\n  capslock: 20,\n  escape: 27,\n  ' ': 32,\n  pageup: 33,\n  pagedown: 34,\n  end: 35,\n  home: 36,\n  arrowleft: 37,\n  arrowup: 38,\n  arrowright: 39,\n  arrowdown: 40,\n  insert: 45,\n  delete: 46,\n  meta: 91,\n  numlock: 144,\n  scrolllock: 145,\n  ';': 186,\n  '=': 187,\n  ',': 188,\n  '-': 189,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '[': 219,\n  '\\\\': 220,\n  ']': 221,\n  '\\'': 222\n};\n\nfor (var f = 1; f < 20; f++) {\n  CODES['f' + f] = 111 + f;\n}\n\n/**\n * Is hotkey?\n */\n\nfunction isHotkey(hotkey, options, event) {\n  if (options && !('byKey' in options)) {\n    event = options;\n    options = null;\n  }\n\n  if (!Array.isArray(hotkey)) {\n    hotkey = [hotkey];\n  }\n\n  var array = hotkey.map(function (string) {\n    return parseHotkey(string, options);\n  });\n  var check = function check(e) {\n    return array.some(function (object) {\n      return compareHotkey(object, e);\n    });\n  };\n  var ret = event == null ? check : check(event);\n  return ret;\n}\n\nfunction isCodeHotkey(hotkey, event) {\n  return isHotkey(hotkey, event);\n}\n\nfunction isKeyHotkey(hotkey, event) {\n  return isHotkey(hotkey, { byKey: true }, event);\n}\n\n/**\n * Parse.\n */\n\nfunction parseHotkey(hotkey, options) {\n  var byKey = options && options.byKey;\n  var ret = {};\n\n  // Special case to handle the `+` key since we use it as a separator.\n  hotkey = hotkey.replace('++', '+add');\n  var values = hotkey.split('+');\n  var length = values.length;\n\n  // Ensure that all the modifiers are set to false unless the hotkey has them.\n\n  for (var k in MODIFIERS) {\n    ret[MODIFIERS[k]] = false;\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = values[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var value = _step.value;\n\n      var optional = value.endsWith('?') && value.length > 1;\n\n      if (optional) {\n        value = value.slice(0, -1);\n      }\n\n      var name = toKeyName(value);\n      var modifier = MODIFIERS[name];\n\n      if (value.length > 1 && !modifier && !ALIASES[value] && !CODES[name]) {\n        throw new TypeError('Unknown modifier: \"' + value + '\"');\n      }\n\n      if (length === 1 || !modifier) {\n        if (byKey) {\n          ret.key = name;\n        } else {\n          ret.which = toKeyCode(value);\n        }\n      }\n\n      if (modifier) {\n        ret[modifier] = optional ? null : true;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return ret;\n}\n\n/**\n * Compare.\n */\n\nfunction compareHotkey(object, event) {\n  for (var key in object) {\n    var expected = object[key];\n    var actual = void 0;\n\n    if (expected == null) {\n      continue;\n    }\n\n    if (key === 'key' && event.key != null) {\n      actual = event.key.toLowerCase();\n    } else if (key === 'which') {\n      actual = expected === 91 && event.which === 93 ? 91 : event.which;\n    } else {\n      actual = event[key];\n    }\n\n    if (actual == null && expected === false) {\n      continue;\n    }\n\n    if (actual !== expected) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Utils.\n */\n\nfunction toKeyCode(name) {\n  name = toKeyName(name);\n  var code = CODES[name] || name.toUpperCase().charCodeAt(0);\n  return code;\n}\n\nfunction toKeyName(name) {\n  name = name.toLowerCase();\n  name = ALIASES[name] || name;\n  return name;\n}\n\n/**\n * Export.\n */\n\nexports.default = isHotkey;\nexports.isHotkey = isHotkey;\nexports.isCodeHotkey = isCodeHotkey;\nexports.isKeyHotkey = isKeyHotkey;\nexports.parseHotkey = parseHotkey;\nexports.compareHotkey = compareHotkey;\nexports.toKeyCode = toKeyCode;\nexports.toKeyName = toKeyName;","'use strict'\n\nmodule.exports = direction\n\nvar RTL = '\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC'\nvar LTR =\n  'A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6' +\n  '\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u200E\\u2C00-\\uFB1C' +\n  '\\uFE00-\\uFE6F\\uFEFD-\\uFFFF'\n\nvar rtl = new RegExp('^[^' + LTR + ']*[' + RTL + ']')\nvar ltr = new RegExp('^[^' + RTL + ']*[' + LTR + ']')\n\nfunction direction(value) {\n  value = String(value || '')\n\n  if (rtl.test(value)) {\n    return 'rtl'\n  }\n\n  if (ltr.test(value)) {\n    return 'ltr'\n  }\n\n  return 'neutral'\n}\n","const t=t=>\"object\"==typeof t&&null!=t&&1===t.nodeType,e=(t,e)=>(!e||\"hidden\"!==t)&&(\"visible\"!==t&&\"clip\"!==t),n=(t,n)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const o=getComputedStyle(t,null);return e(o.overflowY,n)||e(o.overflowX,n)||(t=>{const e=(t=>{if(!t.ownerDocument||!t.ownerDocument.defaultView)return null;try{return t.ownerDocument.defaultView.frameElement}catch(t){return null}})(t);return!!e&&(e.clientHeight<t.scrollHeight||e.clientWidth<t.scrollWidth)})(t)}return!1},o=(t,e,n,o,l,r,i,s)=>r<t&&i>e||r>t&&i<e?0:r<=t&&s<=n||i>=e&&s>=n?r-t-o:i>e&&s<n||r<t&&s>n?i-e+l:0,l=t=>{const e=t.parentElement;return null==e?t.getRootNode().host||null:e},r=(e,r)=>{var i,s,d,h;if(\"undefined\"==typeof document)return[];const{scrollMode:c,block:f,inline:u,boundary:a,skipOverflowHiddenElements:g}=r,p=\"function\"==typeof a?a:t=>t!==a;if(!t(e))throw new TypeError(\"Invalid target\");const m=document.scrollingElement||document.documentElement,w=[];let W=e;for(;t(W)&&p(W);){if(W=l(W),W===m){w.push(W);break}null!=W&&W===document.body&&n(W)&&!n(document.documentElement)||null!=W&&n(W,g)&&w.push(W)}const b=null!=(s=null==(i=window.visualViewport)?void 0:i.width)?s:innerWidth,H=null!=(h=null==(d=window.visualViewport)?void 0:d.height)?h:innerHeight,{scrollX:y,scrollY:M}=window,{height:v,width:E,top:x,right:C,bottom:I,left:R}=e.getBoundingClientRect(),{top:T,right:B,bottom:F,left:V}=(t=>{const e=window.getComputedStyle(t);return{top:parseFloat(e.scrollMarginTop)||0,right:parseFloat(e.scrollMarginRight)||0,bottom:parseFloat(e.scrollMarginBottom)||0,left:parseFloat(e.scrollMarginLeft)||0}})(e);let k=\"start\"===f||\"nearest\"===f?x-T:\"end\"===f?I+F:x+v/2-T+F,D=\"center\"===u?R+E/2-V+B:\"end\"===u?C+B:R-V;const L=[];for(let t=0;t<w.length;t++){const e=w[t],{height:n,width:l,top:r,right:i,bottom:s,left:d}=e.getBoundingClientRect();if(\"if-needed\"===c&&x>=0&&R>=0&&I<=H&&C<=b&&x>=r&&I<=s&&R>=d&&C<=i)return L;const h=getComputedStyle(e),a=parseInt(h.borderLeftWidth,10),g=parseInt(h.borderTopWidth,10),p=parseInt(h.borderRightWidth,10),W=parseInt(h.borderBottomWidth,10);let T=0,B=0;const F=\"offsetWidth\"in e?e.offsetWidth-e.clientWidth-a-p:0,V=\"offsetHeight\"in e?e.offsetHeight-e.clientHeight-g-W:0,S=\"offsetWidth\"in e?0===e.offsetWidth?0:l/e.offsetWidth:0,X=\"offsetHeight\"in e?0===e.offsetHeight?0:n/e.offsetHeight:0;if(m===e)T=\"start\"===f?k:\"end\"===f?k-H:\"nearest\"===f?o(M,M+H,H,g,W,M+k,M+k+v,v):k-H/2,B=\"start\"===u?D:\"center\"===u?D-b/2:\"end\"===u?D-b:o(y,y+b,b,a,p,y+D,y+D+E,E),T=Math.max(0,T+M),B=Math.max(0,B+y);else{T=\"start\"===f?k-r-g:\"end\"===f?k-s+W+V:\"nearest\"===f?o(r,s,n,g,W+V,k,k+v,v):k-(r+n/2)+V/2,B=\"start\"===u?D-d-a:\"center\"===u?D-(d+l/2)+F/2:\"end\"===u?D-i+p+F:o(d,i,l,a,p+F,D,D+E,E);const{scrollLeft:t,scrollTop:h}=e;T=0===X?0:Math.max(0,Math.min(h+T/X,e.scrollHeight-n/X+V)),B=0===S?0:Math.max(0,Math.min(t+B/S,e.scrollWidth-l/S+F)),k+=h-T,D+=t-B}L.push({el:e,top:T,left:B})}return L};export{r as compute};//# sourceMappingURL=index.js.map\n","import{compute as t}from\"compute-scroll-into-view\";const o=t=>!1===t?{block:\"end\",inline:\"nearest\"}:(t=>t===Object(t)&&0!==Object.keys(t).length)(t)?t:{block:\"start\",inline:\"nearest\"};function e(e,r){if(!e.isConnected||!(t=>{let o=t;for(;o&&o.parentNode;){if(o.parentNode===document)return!0;o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentNode}return!1})(e))return;const n=(t=>{const o=window.getComputedStyle(t);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(e);if((t=>\"object\"==typeof t&&\"function\"==typeof t.behavior)(r))return r.behavior(t(e,r));const l=\"boolean\"==typeof r||null==r?void 0:r.behavior;for(const{el:a,top:i,left:s}of t(e,o(r))){const t=i-n.top+n.bottom,o=s-n.left+n.right;a.scroll({top:t,left:o,behavior:l})}}export{e as default};//# sourceMappingURL=index.js.map\n","// src/utils/env.ts\nvar NOTHING = Symbol.for(\"immer-nothing\");\nvar DRAFTABLE = Symbol.for(\"immer-draftable\");\nvar DRAFT_STATE = Symbol.for(\"immer-state\");\n\n// src/utils/errors.ts\nvar errors = process.env.NODE_ENV !== \"production\" ? [\n  // All error codes, starting by 0:\n  function(plugin) {\n    return `The plugin for '${plugin}' has not been loaded into Immer. To enable the plugin, import and call \\`enable${plugin}()\\` when initializing your application.`;\n  },\n  function(thing) {\n    return `produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${thing}'`;\n  },\n  \"This object has been frozen and should not be mutated\",\n  function(data) {\n    return \"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" + data;\n  },\n  \"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",\n  \"Immer forbids circular references\",\n  \"The first or second argument to `produce` must be a function\",\n  \"The third argument to `produce` must be a function or undefined\",\n  \"First argument to `createDraft` must be a plain object, an array, or an immerable object\",\n  \"First argument to `finishDraft` must be a draft returned by `createDraft`\",\n  function(thing) {\n    return `'current' expects a draft, got: ${thing}`;\n  },\n  \"Object.defineProperty() cannot be used on an Immer draft\",\n  \"Object.setPrototypeOf() cannot be used on an Immer draft\",\n  \"Immer only supports deleting array indices\",\n  \"Immer only supports setting array indices and the 'length' property\",\n  function(thing) {\n    return `'original' expects a draft, got: ${thing}`;\n  }\n  // Note: if more errors are added, the errorOffset in Patches.ts should be increased\n  // See Patches.ts for additional errors\n] : [];\nfunction die(error, ...args) {\n  if (process.env.NODE_ENV !== \"production\") {\n    const e = errors[error];\n    const msg = typeof e === \"function\" ? e.apply(null, args) : e;\n    throw new Error(`[Immer] ${msg}`);\n  }\n  throw new Error(\n    `[Immer] minified error nr: ${error}. Full error at: https://bit.ly/3cXEKWf`\n  );\n}\n\n// src/utils/common.ts\nvar getPrototypeOf = Object.getPrototypeOf;\nfunction isDraft(value) {\n  return !!value && !!value[DRAFT_STATE];\n}\nfunction isDraftable(value) {\n  if (!value)\n    return false;\n  return isPlainObject(value) || Array.isArray(value) || !!value[DRAFTABLE] || !!value.constructor?.[DRAFTABLE] || isMap(value) || isSet(value);\n}\nvar objectCtorString = Object.prototype.constructor.toString();\nfunction isPlainObject(value) {\n  if (!value || typeof value !== \"object\")\n    return false;\n  const proto = getPrototypeOf(value);\n  if (proto === null) {\n    return true;\n  }\n  const Ctor = Object.hasOwnProperty.call(proto, \"constructor\") && proto.constructor;\n  if (Ctor === Object)\n    return true;\n  return typeof Ctor == \"function\" && Function.toString.call(Ctor) === objectCtorString;\n}\nfunction original(value) {\n  if (!isDraft(value))\n    die(15, value);\n  return value[DRAFT_STATE].base_;\n}\nfunction each(obj, iter) {\n  if (getArchtype(obj) === 0 /* Object */) {\n    Object.entries(obj).forEach(([key, value]) => {\n      iter(key, value, obj);\n    });\n  } else {\n    obj.forEach((entry, index) => iter(index, entry, obj));\n  }\n}\nfunction getArchtype(thing) {\n  const state = thing[DRAFT_STATE];\n  return state ? state.type_ : Array.isArray(thing) ? 1 /* Array */ : isMap(thing) ? 2 /* Map */ : isSet(thing) ? 3 /* Set */ : 0 /* Object */;\n}\nfunction has(thing, prop) {\n  return getArchtype(thing) === 2 /* Map */ ? thing.has(prop) : Object.prototype.hasOwnProperty.call(thing, prop);\n}\nfunction get(thing, prop) {\n  return getArchtype(thing) === 2 /* Map */ ? thing.get(prop) : thing[prop];\n}\nfunction set(thing, propOrOldValue, value) {\n  const t = getArchtype(thing);\n  if (t === 2 /* Map */)\n    thing.set(propOrOldValue, value);\n  else if (t === 3 /* Set */) {\n    thing.add(value);\n  } else\n    thing[propOrOldValue] = value;\n}\nfunction is(x, y) {\n  if (x === y) {\n    return x !== 0 || 1 / x === 1 / y;\n  } else {\n    return x !== x && y !== y;\n  }\n}\nfunction isMap(target) {\n  return target instanceof Map;\n}\nfunction isSet(target) {\n  return target instanceof Set;\n}\nfunction latest(state) {\n  return state.copy_ || state.base_;\n}\nfunction shallowCopy(base, strict) {\n  if (isMap(base)) {\n    return new Map(base);\n  }\n  if (isSet(base)) {\n    return new Set(base);\n  }\n  if (Array.isArray(base))\n    return Array.prototype.slice.call(base);\n  if (!strict && isPlainObject(base)) {\n    if (!getPrototypeOf(base)) {\n      const obj = /* @__PURE__ */ Object.create(null);\n      return Object.assign(obj, base);\n    }\n    return { ...base };\n  }\n  const descriptors = Object.getOwnPropertyDescriptors(base);\n  delete descriptors[DRAFT_STATE];\n  let keys = Reflect.ownKeys(descriptors);\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    const desc = descriptors[key];\n    if (desc.writable === false) {\n      desc.writable = true;\n      desc.configurable = true;\n    }\n    if (desc.get || desc.set)\n      descriptors[key] = {\n        configurable: true,\n        writable: true,\n        // could live with !!desc.set as well here...\n        enumerable: desc.enumerable,\n        value: base[key]\n      };\n  }\n  return Object.create(getPrototypeOf(base), descriptors);\n}\nfunction freeze(obj, deep = false) {\n  if (isFrozen(obj) || isDraft(obj) || !isDraftable(obj))\n    return obj;\n  if (getArchtype(obj) > 1) {\n    obj.set = obj.add = obj.clear = obj.delete = dontMutateFrozenCollections;\n  }\n  Object.freeze(obj);\n  if (deep)\n    each(obj, (_key, value) => freeze(value, true), true);\n  return obj;\n}\nfunction dontMutateFrozenCollections() {\n  die(2);\n}\nfunction isFrozen(obj) {\n  return Object.isFrozen(obj);\n}\n\n// src/utils/plugins.ts\nvar plugins = {};\nfunction getPlugin(pluginKey) {\n  const plugin = plugins[pluginKey];\n  if (!plugin) {\n    die(0, pluginKey);\n  }\n  return plugin;\n}\nfunction loadPlugin(pluginKey, implementation) {\n  if (!plugins[pluginKey])\n    plugins[pluginKey] = implementation;\n}\n\n// src/core/scope.ts\nvar currentScope;\nfunction getCurrentScope() {\n  return currentScope;\n}\nfunction createScope(parent_, immer_) {\n  return {\n    drafts_: [],\n    parent_,\n    immer_,\n    // Whenever the modified draft contains a draft from another scope, we\n    // need to prevent auto-freezing so the unowned draft can be finalized.\n    canAutoFreeze_: true,\n    unfinalizedDrafts_: 0\n  };\n}\nfunction usePatchesInScope(scope, patchListener) {\n  if (patchListener) {\n    getPlugin(\"Patches\");\n    scope.patches_ = [];\n    scope.inversePatches_ = [];\n    scope.patchListener_ = patchListener;\n  }\n}\nfunction revokeScope(scope) {\n  leaveScope(scope);\n  scope.drafts_.forEach(revokeDraft);\n  scope.drafts_ = null;\n}\nfunction leaveScope(scope) {\n  if (scope === currentScope) {\n    currentScope = scope.parent_;\n  }\n}\nfunction enterScope(immer2) {\n  return currentScope = createScope(currentScope, immer2);\n}\nfunction revokeDraft(draft) {\n  const state = draft[DRAFT_STATE];\n  if (state.type_ === 0 /* Object */ || state.type_ === 1 /* Array */)\n    state.revoke_();\n  else\n    state.revoked_ = true;\n}\n\n// src/core/finalize.ts\nfunction processResult(result, scope) {\n  scope.unfinalizedDrafts_ = scope.drafts_.length;\n  const baseDraft = scope.drafts_[0];\n  const isReplaced = result !== void 0 && result !== baseDraft;\n  if (isReplaced) {\n    if (baseDraft[DRAFT_STATE].modified_) {\n      revokeScope(scope);\n      die(4);\n    }\n    if (isDraftable(result)) {\n      result = finalize(scope, result);\n      if (!scope.parent_)\n        maybeFreeze(scope, result);\n    }\n    if (scope.patches_) {\n      getPlugin(\"Patches\").generateReplacementPatches_(\n        baseDraft[DRAFT_STATE].base_,\n        result,\n        scope.patches_,\n        scope.inversePatches_\n      );\n    }\n  } else {\n    result = finalize(scope, baseDraft, []);\n  }\n  revokeScope(scope);\n  if (scope.patches_) {\n    scope.patchListener_(scope.patches_, scope.inversePatches_);\n  }\n  return result !== NOTHING ? result : void 0;\n}\nfunction finalize(rootScope, value, path) {\n  if (isFrozen(value))\n    return value;\n  const state = value[DRAFT_STATE];\n  if (!state) {\n    each(\n      value,\n      (key, childValue) => finalizeProperty(rootScope, state, value, key, childValue, path),\n      true\n      // See #590, don't recurse into non-enumerable of non drafted objects\n    );\n    return value;\n  }\n  if (state.scope_ !== rootScope)\n    return value;\n  if (!state.modified_) {\n    maybeFreeze(rootScope, state.base_, true);\n    return state.base_;\n  }\n  if (!state.finalized_) {\n    state.finalized_ = true;\n    state.scope_.unfinalizedDrafts_--;\n    const result = state.copy_;\n    let resultEach = result;\n    let isSet2 = false;\n    if (state.type_ === 3 /* Set */) {\n      resultEach = new Set(result);\n      result.clear();\n      isSet2 = true;\n    }\n    each(\n      resultEach,\n      (key, childValue) => finalizeProperty(rootScope, state, result, key, childValue, path, isSet2)\n    );\n    maybeFreeze(rootScope, result, false);\n    if (path && rootScope.patches_) {\n      getPlugin(\"Patches\").generatePatches_(\n        state,\n        path,\n        rootScope.patches_,\n        rootScope.inversePatches_\n      );\n    }\n  }\n  return state.copy_;\n}\nfunction finalizeProperty(rootScope, parentState, targetObject, prop, childValue, rootPath, targetIsSet) {\n  if (process.env.NODE_ENV !== \"production\" && childValue === targetObject)\n    die(5);\n  if (isDraft(childValue)) {\n    const path = rootPath && parentState && parentState.type_ !== 3 /* Set */ && // Set objects are atomic since they have no keys.\n    !has(parentState.assigned_, prop) ? rootPath.concat(prop) : void 0;\n    const res = finalize(rootScope, childValue, path);\n    set(targetObject, prop, res);\n    if (isDraft(res)) {\n      rootScope.canAutoFreeze_ = false;\n    } else\n      return;\n  } else if (targetIsSet) {\n    targetObject.add(childValue);\n  }\n  if (isDraftable(childValue) && !isFrozen(childValue)) {\n    if (!rootScope.immer_.autoFreeze_ && rootScope.unfinalizedDrafts_ < 1) {\n      return;\n    }\n    finalize(rootScope, childValue);\n    if (!parentState || !parentState.scope_.parent_)\n      maybeFreeze(rootScope, childValue);\n  }\n}\nfunction maybeFreeze(scope, value, deep = false) {\n  if (!scope.parent_ && scope.immer_.autoFreeze_ && scope.canAutoFreeze_) {\n    freeze(value, deep);\n  }\n}\n\n// src/core/proxy.ts\nfunction createProxyProxy(base, parent) {\n  const isArray = Array.isArray(base);\n  const state = {\n    type_: isArray ? 1 /* Array */ : 0 /* Object */,\n    // Track which produce call this is associated with.\n    scope_: parent ? parent.scope_ : getCurrentScope(),\n    // True for both shallow and deep changes.\n    modified_: false,\n    // Used during finalization.\n    finalized_: false,\n    // Track which properties have been assigned (true) or deleted (false).\n    assigned_: {},\n    // The parent draft state.\n    parent_: parent,\n    // The base state.\n    base_: base,\n    // The base proxy.\n    draft_: null,\n    // set below\n    // The base copy with any updated values.\n    copy_: null,\n    // Called by the `produce` function.\n    revoke_: null,\n    isManual_: false\n  };\n  let target = state;\n  let traps = objectTraps;\n  if (isArray) {\n    target = [state];\n    traps = arrayTraps;\n  }\n  const { revoke, proxy } = Proxy.revocable(target, traps);\n  state.draft_ = proxy;\n  state.revoke_ = revoke;\n  return proxy;\n}\nvar objectTraps = {\n  get(state, prop) {\n    if (prop === DRAFT_STATE)\n      return state;\n    const source = latest(state);\n    if (!has(source, prop)) {\n      return readPropFromProto(state, source, prop);\n    }\n    const value = source[prop];\n    if (state.finalized_ || !isDraftable(value)) {\n      return value;\n    }\n    if (value === peek(state.base_, prop)) {\n      prepareCopy(state);\n      return state.copy_[prop] = createProxy(value, state);\n    }\n    return value;\n  },\n  has(state, prop) {\n    return prop in latest(state);\n  },\n  ownKeys(state) {\n    return Reflect.ownKeys(latest(state));\n  },\n  set(state, prop, value) {\n    const desc = getDescriptorFromProto(latest(state), prop);\n    if (desc?.set) {\n      desc.set.call(state.draft_, value);\n      return true;\n    }\n    if (!state.modified_) {\n      const current2 = peek(latest(state), prop);\n      const currentState = current2?.[DRAFT_STATE];\n      if (currentState && currentState.base_ === value) {\n        state.copy_[prop] = value;\n        state.assigned_[prop] = false;\n        return true;\n      }\n      if (is(value, current2) && (value !== void 0 || has(state.base_, prop)))\n        return true;\n      prepareCopy(state);\n      markChanged(state);\n    }\n    if (state.copy_[prop] === value && // special case: handle new props with value 'undefined'\n    (value !== void 0 || prop in state.copy_) || // special case: NaN\n    Number.isNaN(value) && Number.isNaN(state.copy_[prop]))\n      return true;\n    state.copy_[prop] = value;\n    state.assigned_[prop] = true;\n    return true;\n  },\n  deleteProperty(state, prop) {\n    if (peek(state.base_, prop) !== void 0 || prop in state.base_) {\n      state.assigned_[prop] = false;\n      prepareCopy(state);\n      markChanged(state);\n    } else {\n      delete state.assigned_[prop];\n    }\n    if (state.copy_) {\n      delete state.copy_[prop];\n    }\n    return true;\n  },\n  // Note: We never coerce `desc.value` into an Immer draft, because we can't make\n  // the same guarantee in ES5 mode.\n  getOwnPropertyDescriptor(state, prop) {\n    const owner = latest(state);\n    const desc = Reflect.getOwnPropertyDescriptor(owner, prop);\n    if (!desc)\n      return desc;\n    return {\n      writable: true,\n      configurable: state.type_ !== 1 /* Array */ || prop !== \"length\",\n      enumerable: desc.enumerable,\n      value: owner[prop]\n    };\n  },\n  defineProperty() {\n    die(11);\n  },\n  getPrototypeOf(state) {\n    return getPrototypeOf(state.base_);\n  },\n  setPrototypeOf() {\n    die(12);\n  }\n};\nvar arrayTraps = {};\neach(objectTraps, (key, fn) => {\n  arrayTraps[key] = function() {\n    arguments[0] = arguments[0][0];\n    return fn.apply(this, arguments);\n  };\n});\narrayTraps.deleteProperty = function(state, prop) {\n  if (process.env.NODE_ENV !== \"production\" && isNaN(parseInt(prop)))\n    die(13);\n  return arrayTraps.set.call(this, state, prop, void 0);\n};\narrayTraps.set = function(state, prop, value) {\n  if (process.env.NODE_ENV !== \"production\" && prop !== \"length\" && isNaN(parseInt(prop)))\n    die(14);\n  return objectTraps.set.call(this, state[0], prop, value, state[0]);\n};\nfunction peek(draft, prop) {\n  const state = draft[DRAFT_STATE];\n  const source = state ? latest(state) : draft;\n  return source[prop];\n}\nfunction readPropFromProto(state, source, prop) {\n  const desc = getDescriptorFromProto(source, prop);\n  return desc ? `value` in desc ? desc.value : (\n    // This is a very special case, if the prop is a getter defined by the\n    // prototype, we should invoke it with the draft as context!\n    desc.get?.call(state.draft_)\n  ) : void 0;\n}\nfunction getDescriptorFromProto(source, prop) {\n  if (!(prop in source))\n    return void 0;\n  let proto = getPrototypeOf(source);\n  while (proto) {\n    const desc = Object.getOwnPropertyDescriptor(proto, prop);\n    if (desc)\n      return desc;\n    proto = getPrototypeOf(proto);\n  }\n  return void 0;\n}\nfunction markChanged(state) {\n  if (!state.modified_) {\n    state.modified_ = true;\n    if (state.parent_) {\n      markChanged(state.parent_);\n    }\n  }\n}\nfunction prepareCopy(state) {\n  if (!state.copy_) {\n    state.copy_ = shallowCopy(\n      state.base_,\n      state.scope_.immer_.useStrictShallowCopy_\n    );\n  }\n}\n\n// src/core/immerClass.ts\nvar Immer2 = class {\n  constructor(config) {\n    this.autoFreeze_ = true;\n    this.useStrictShallowCopy_ = false;\n    /**\n     * The `produce` function takes a value and a \"recipe function\" (whose\n     * return value often depends on the base state). The recipe function is\n     * free to mutate its first argument however it wants. All mutations are\n     * only ever applied to a __copy__ of the base state.\n     *\n     * Pass only a function to create a \"curried producer\" which relieves you\n     * from passing the recipe function every time.\n     *\n     * Only plain objects and arrays are made mutable. All other objects are\n     * considered uncopyable.\n     *\n     * Note: This function is __bound__ to its `Immer` instance.\n     *\n     * @param {any} base - the initial state\n     * @param {Function} recipe - function that receives a proxy of the base state as first argument and which can be freely modified\n     * @param {Function} patchListener - optional function that will be called with all the patches produced here\n     * @returns {any} a new state, or the initial state if nothing was modified\n     */\n    this.produce = (base, recipe, patchListener) => {\n      if (typeof base === \"function\" && typeof recipe !== \"function\") {\n        const defaultBase = recipe;\n        recipe = base;\n        const self = this;\n        return function curriedProduce(base2 = defaultBase, ...args) {\n          return self.produce(base2, (draft) => recipe.call(this, draft, ...args));\n        };\n      }\n      if (typeof recipe !== \"function\")\n        die(6);\n      if (patchListener !== void 0 && typeof patchListener !== \"function\")\n        die(7);\n      let result;\n      if (isDraftable(base)) {\n        const scope = enterScope(this);\n        const proxy = createProxy(base, void 0);\n        let hasError = true;\n        try {\n          result = recipe(proxy);\n          hasError = false;\n        } finally {\n          if (hasError)\n            revokeScope(scope);\n          else\n            leaveScope(scope);\n        }\n        usePatchesInScope(scope, patchListener);\n        return processResult(result, scope);\n      } else if (!base || typeof base !== \"object\") {\n        result = recipe(base);\n        if (result === void 0)\n          result = base;\n        if (result === NOTHING)\n          result = void 0;\n        if (this.autoFreeze_)\n          freeze(result, true);\n        if (patchListener) {\n          const p = [];\n          const ip = [];\n          getPlugin(\"Patches\").generateReplacementPatches_(base, result, p, ip);\n          patchListener(p, ip);\n        }\n        return result;\n      } else\n        die(1, base);\n    };\n    this.produceWithPatches = (base, recipe) => {\n      if (typeof base === \"function\") {\n        return (state, ...args) => this.produceWithPatches(state, (draft) => base(draft, ...args));\n      }\n      let patches, inversePatches;\n      const result = this.produce(base, recipe, (p, ip) => {\n        patches = p;\n        inversePatches = ip;\n      });\n      return [result, patches, inversePatches];\n    };\n    if (typeof config?.autoFreeze === \"boolean\")\n      this.setAutoFreeze(config.autoFreeze);\n    if (typeof config?.useStrictShallowCopy === \"boolean\")\n      this.setUseStrictShallowCopy(config.useStrictShallowCopy);\n  }\n  createDraft(base) {\n    if (!isDraftable(base))\n      die(8);\n    if (isDraft(base))\n      base = current(base);\n    const scope = enterScope(this);\n    const proxy = createProxy(base, void 0);\n    proxy[DRAFT_STATE].isManual_ = true;\n    leaveScope(scope);\n    return proxy;\n  }\n  finishDraft(draft, patchListener) {\n    const state = draft && draft[DRAFT_STATE];\n    if (!state || !state.isManual_)\n      die(9);\n    const { scope_: scope } = state;\n    usePatchesInScope(scope, patchListener);\n    return processResult(void 0, scope);\n  }\n  /**\n   * Pass true to automatically freeze all copies created by Immer.\n   *\n   * By default, auto-freezing is enabled.\n   */\n  setAutoFreeze(value) {\n    this.autoFreeze_ = value;\n  }\n  /**\n   * Pass true to enable strict shallow copy.\n   *\n   * By default, immer does not copy the object descriptors such as getter, setter and non-enumrable properties.\n   */\n  setUseStrictShallowCopy(value) {\n    this.useStrictShallowCopy_ = value;\n  }\n  applyPatches(base, patches) {\n    let i;\n    for (i = patches.length - 1; i >= 0; i--) {\n      const patch = patches[i];\n      if (patch.path.length === 0 && patch.op === \"replace\") {\n        base = patch.value;\n        break;\n      }\n    }\n    if (i > -1) {\n      patches = patches.slice(i + 1);\n    }\n    const applyPatchesImpl = getPlugin(\"Patches\").applyPatches_;\n    if (isDraft(base)) {\n      return applyPatchesImpl(base, patches);\n    }\n    return this.produce(\n      base,\n      (draft) => applyPatchesImpl(draft, patches)\n    );\n  }\n};\nfunction createProxy(value, parent) {\n  const draft = isMap(value) ? getPlugin(\"MapSet\").proxyMap_(value, parent) : isSet(value) ? getPlugin(\"MapSet\").proxySet_(value, parent) : createProxyProxy(value, parent);\n  const scope = parent ? parent.scope_ : getCurrentScope();\n  scope.drafts_.push(draft);\n  return draft;\n}\n\n// src/core/current.ts\nfunction current(value) {\n  if (!isDraft(value))\n    die(10, value);\n  return currentImpl(value);\n}\nfunction currentImpl(value) {\n  if (!isDraftable(value) || isFrozen(value))\n    return value;\n  const state = value[DRAFT_STATE];\n  let copy;\n  if (state) {\n    if (!state.modified_)\n      return state.base_;\n    state.finalized_ = true;\n    copy = shallowCopy(value, state.scope_.immer_.useStrictShallowCopy_);\n  } else {\n    copy = shallowCopy(value, true);\n  }\n  each(copy, (key, childValue) => {\n    set(copy, key, currentImpl(childValue));\n  });\n  if (state) {\n    state.finalized_ = false;\n  }\n  return copy;\n}\n\n// src/plugins/patches.ts\nfunction enablePatches() {\n  const errorOffset = 16;\n  if (process.env.NODE_ENV !== \"production\") {\n    errors.push(\n      'Sets cannot have \"replace\" patches.',\n      function(op) {\n        return \"Unsupported patch operation: \" + op;\n      },\n      function(path) {\n        return \"Cannot apply patch, path doesn't resolve: \" + path;\n      },\n      \"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"\n    );\n  }\n  const REPLACE = \"replace\";\n  const ADD = \"add\";\n  const REMOVE = \"remove\";\n  function generatePatches_(state, basePath, patches, inversePatches) {\n    switch (state.type_) {\n      case 0 /* Object */:\n      case 2 /* Map */:\n        return generatePatchesFromAssigned(\n          state,\n          basePath,\n          patches,\n          inversePatches\n        );\n      case 1 /* Array */:\n        return generateArrayPatches(state, basePath, patches, inversePatches);\n      case 3 /* Set */:\n        return generateSetPatches(\n          state,\n          basePath,\n          patches,\n          inversePatches\n        );\n    }\n  }\n  function generateArrayPatches(state, basePath, patches, inversePatches) {\n    let { base_, assigned_ } = state;\n    let copy_ = state.copy_;\n    if (copy_.length < base_.length) {\n      ;\n      [base_, copy_] = [copy_, base_];\n      [patches, inversePatches] = [inversePatches, patches];\n    }\n    for (let i = 0; i < base_.length; i++) {\n      if (assigned_[i] && copy_[i] !== base_[i]) {\n        const path = basePath.concat([i]);\n        patches.push({\n          op: REPLACE,\n          path,\n          // Need to maybe clone it, as it can in fact be the original value\n          // due to the base/copy inversion at the start of this function\n          value: clonePatchValueIfNeeded(copy_[i])\n        });\n        inversePatches.push({\n          op: REPLACE,\n          path,\n          value: clonePatchValueIfNeeded(base_[i])\n        });\n      }\n    }\n    for (let i = base_.length; i < copy_.length; i++) {\n      const path = basePath.concat([i]);\n      patches.push({\n        op: ADD,\n        path,\n        // Need to maybe clone it, as it can in fact be the original value\n        // due to the base/copy inversion at the start of this function\n        value: clonePatchValueIfNeeded(copy_[i])\n      });\n    }\n    for (let i = copy_.length - 1; base_.length <= i; --i) {\n      const path = basePath.concat([i]);\n      inversePatches.push({\n        op: REMOVE,\n        path\n      });\n    }\n  }\n  function generatePatchesFromAssigned(state, basePath, patches, inversePatches) {\n    const { base_, copy_ } = state;\n    each(state.assigned_, (key, assignedValue) => {\n      const origValue = get(base_, key);\n      const value = get(copy_, key);\n      const op = !assignedValue ? REMOVE : has(base_, key) ? REPLACE : ADD;\n      if (origValue === value && op === REPLACE)\n        return;\n      const path = basePath.concat(key);\n      patches.push(op === REMOVE ? { op, path } : { op, path, value });\n      inversePatches.push(\n        op === ADD ? { op: REMOVE, path } : op === REMOVE ? { op: ADD, path, value: clonePatchValueIfNeeded(origValue) } : { op: REPLACE, path, value: clonePatchValueIfNeeded(origValue) }\n      );\n    });\n  }\n  function generateSetPatches(state, basePath, patches, inversePatches) {\n    let { base_, copy_ } = state;\n    let i = 0;\n    base_.forEach((value) => {\n      if (!copy_.has(value)) {\n        const path = basePath.concat([i]);\n        patches.push({\n          op: REMOVE,\n          path,\n          value\n        });\n        inversePatches.unshift({\n          op: ADD,\n          path,\n          value\n        });\n      }\n      i++;\n    });\n    i = 0;\n    copy_.forEach((value) => {\n      if (!base_.has(value)) {\n        const path = basePath.concat([i]);\n        patches.push({\n          op: ADD,\n          path,\n          value\n        });\n        inversePatches.unshift({\n          op: REMOVE,\n          path,\n          value\n        });\n      }\n      i++;\n    });\n  }\n  function generateReplacementPatches_(baseValue, replacement, patches, inversePatches) {\n    patches.push({\n      op: REPLACE,\n      path: [],\n      value: replacement === NOTHING ? void 0 : replacement\n    });\n    inversePatches.push({\n      op: REPLACE,\n      path: [],\n      value: baseValue\n    });\n  }\n  function applyPatches_(draft, patches) {\n    patches.forEach((patch) => {\n      const { path, op } = patch;\n      let base = draft;\n      for (let i = 0; i < path.length - 1; i++) {\n        const parentType = getArchtype(base);\n        let p = path[i];\n        if (typeof p !== \"string\" && typeof p !== \"number\") {\n          p = \"\" + p;\n        }\n        if ((parentType === 0 /* Object */ || parentType === 1 /* Array */) && (p === \"__proto__\" || p === \"constructor\"))\n          die(errorOffset + 3);\n        if (typeof base === \"function\" && p === \"prototype\")\n          die(errorOffset + 3);\n        base = get(base, p);\n        if (typeof base !== \"object\")\n          die(errorOffset + 2, path.join(\"/\"));\n      }\n      const type = getArchtype(base);\n      const value = deepClonePatchValue(patch.value);\n      const key = path[path.length - 1];\n      switch (op) {\n        case REPLACE:\n          switch (type) {\n            case 2 /* Map */:\n              return base.set(key, value);\n            case 3 /* Set */:\n              die(errorOffset);\n            default:\n              return base[key] = value;\n          }\n        case ADD:\n          switch (type) {\n            case 1 /* Array */:\n              return key === \"-\" ? base.push(value) : base.splice(key, 0, value);\n            case 2 /* Map */:\n              return base.set(key, value);\n            case 3 /* Set */:\n              return base.add(value);\n            default:\n              return base[key] = value;\n          }\n        case REMOVE:\n          switch (type) {\n            case 1 /* Array */:\n              return base.splice(key, 1);\n            case 2 /* Map */:\n              return base.delete(key);\n            case 3 /* Set */:\n              return base.delete(patch.value);\n            default:\n              return delete base[key];\n          }\n        default:\n          die(errorOffset + 1, op);\n      }\n    });\n    return draft;\n  }\n  function deepClonePatchValue(obj) {\n    if (!isDraftable(obj))\n      return obj;\n    if (Array.isArray(obj))\n      return obj.map(deepClonePatchValue);\n    if (isMap(obj))\n      return new Map(\n        Array.from(obj.entries()).map(([k, v]) => [k, deepClonePatchValue(v)])\n      );\n    if (isSet(obj))\n      return new Set(Array.from(obj).map(deepClonePatchValue));\n    const cloned = Object.create(getPrototypeOf(obj));\n    for (const key in obj)\n      cloned[key] = deepClonePatchValue(obj[key]);\n    if (has(obj, DRAFTABLE))\n      cloned[DRAFTABLE] = obj[DRAFTABLE];\n    return cloned;\n  }\n  function clonePatchValueIfNeeded(obj) {\n    if (isDraft(obj)) {\n      return deepClonePatchValue(obj);\n    } else\n      return obj;\n  }\n  loadPlugin(\"Patches\", {\n    applyPatches_,\n    generatePatches_,\n    generateReplacementPatches_\n  });\n}\n\n// src/plugins/mapset.ts\nfunction enableMapSet() {\n  class DraftMap extends Map {\n    constructor(target, parent) {\n      super();\n      this[DRAFT_STATE] = {\n        type_: 2 /* Map */,\n        parent_: parent,\n        scope_: parent ? parent.scope_ : getCurrentScope(),\n        modified_: false,\n        finalized_: false,\n        copy_: void 0,\n        assigned_: void 0,\n        base_: target,\n        draft_: this,\n        isManual_: false,\n        revoked_: false\n      };\n    }\n    get size() {\n      return latest(this[DRAFT_STATE]).size;\n    }\n    has(key) {\n      return latest(this[DRAFT_STATE]).has(key);\n    }\n    set(key, value) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (!latest(state).has(key) || latest(state).get(key) !== value) {\n        prepareMapCopy(state);\n        markChanged(state);\n        state.assigned_.set(key, true);\n        state.copy_.set(key, value);\n        state.assigned_.set(key, true);\n      }\n      return this;\n    }\n    delete(key) {\n      if (!this.has(key)) {\n        return false;\n      }\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareMapCopy(state);\n      markChanged(state);\n      if (state.base_.has(key)) {\n        state.assigned_.set(key, false);\n      } else {\n        state.assigned_.delete(key);\n      }\n      state.copy_.delete(key);\n      return true;\n    }\n    clear() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (latest(state).size) {\n        prepareMapCopy(state);\n        markChanged(state);\n        state.assigned_ = /* @__PURE__ */ new Map();\n        each(state.base_, (key) => {\n          state.assigned_.set(key, false);\n        });\n        state.copy_.clear();\n      }\n    }\n    forEach(cb, thisArg) {\n      const state = this[DRAFT_STATE];\n      latest(state).forEach((_value, key, _map) => {\n        cb.call(thisArg, this.get(key), key, this);\n      });\n    }\n    get(key) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      const value = latest(state).get(key);\n      if (state.finalized_ || !isDraftable(value)) {\n        return value;\n      }\n      if (value !== state.base_.get(key)) {\n        return value;\n      }\n      const draft = createProxy(value, state);\n      prepareMapCopy(state);\n      state.copy_.set(key, draft);\n      return draft;\n    }\n    keys() {\n      return latest(this[DRAFT_STATE]).keys();\n    }\n    values() {\n      const iterator = this.keys();\n      return {\n        [Symbol.iterator]: () => this.values(),\n        next: () => {\n          const r = iterator.next();\n          if (r.done)\n            return r;\n          const value = this.get(r.value);\n          return {\n            done: false,\n            value\n          };\n        }\n      };\n    }\n    entries() {\n      const iterator = this.keys();\n      return {\n        [Symbol.iterator]: () => this.entries(),\n        next: () => {\n          const r = iterator.next();\n          if (r.done)\n            return r;\n          const value = this.get(r.value);\n          return {\n            done: false,\n            value: [r.value, value]\n          };\n        }\n      };\n    }\n    [(DRAFT_STATE, Symbol.iterator)]() {\n      return this.entries();\n    }\n  }\n  function proxyMap_(target, parent) {\n    return new DraftMap(target, parent);\n  }\n  function prepareMapCopy(state) {\n    if (!state.copy_) {\n      state.assigned_ = /* @__PURE__ */ new Map();\n      state.copy_ = new Map(state.base_);\n    }\n  }\n  class DraftSet extends Set {\n    constructor(target, parent) {\n      super();\n      this[DRAFT_STATE] = {\n        type_: 3 /* Set */,\n        parent_: parent,\n        scope_: parent ? parent.scope_ : getCurrentScope(),\n        modified_: false,\n        finalized_: false,\n        copy_: void 0,\n        base_: target,\n        draft_: this,\n        drafts_: /* @__PURE__ */ new Map(),\n        revoked_: false,\n        isManual_: false\n      };\n    }\n    get size() {\n      return latest(this[DRAFT_STATE]).size;\n    }\n    has(value) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (!state.copy_) {\n        return state.base_.has(value);\n      }\n      if (state.copy_.has(value))\n        return true;\n      if (state.drafts_.has(value) && state.copy_.has(state.drafts_.get(value)))\n        return true;\n      return false;\n    }\n    add(value) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (!this.has(value)) {\n        prepareSetCopy(state);\n        markChanged(state);\n        state.copy_.add(value);\n      }\n      return this;\n    }\n    delete(value) {\n      if (!this.has(value)) {\n        return false;\n      }\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareSetCopy(state);\n      markChanged(state);\n      return state.copy_.delete(value) || (state.drafts_.has(value) ? state.copy_.delete(state.drafts_.get(value)) : (\n        /* istanbul ignore next */\n        false\n      ));\n    }\n    clear() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (latest(state).size) {\n        prepareSetCopy(state);\n        markChanged(state);\n        state.copy_.clear();\n      }\n    }\n    values() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareSetCopy(state);\n      return state.copy_.values();\n    }\n    entries() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareSetCopy(state);\n      return state.copy_.entries();\n    }\n    keys() {\n      return this.values();\n    }\n    [(DRAFT_STATE, Symbol.iterator)]() {\n      return this.values();\n    }\n    forEach(cb, thisArg) {\n      const iterator = this.values();\n      let result = iterator.next();\n      while (!result.done) {\n        cb.call(thisArg, result.value, result.value, this);\n        result = iterator.next();\n      }\n    }\n  }\n  function proxySet_(target, parent) {\n    return new DraftSet(target, parent);\n  }\n  function prepareSetCopy(state) {\n    if (!state.copy_) {\n      state.copy_ = /* @__PURE__ */ new Set();\n      state.base_.forEach((value) => {\n        if (isDraftable(value)) {\n          const draft = createProxy(value, state);\n          state.drafts_.set(value, draft);\n          state.copy_.add(draft);\n        } else {\n          state.copy_.add(value);\n        }\n      });\n    }\n  }\n  function assertUnrevoked(state) {\n    if (state.revoked_)\n      die(3, JSON.stringify(latest(state)));\n  }\n  loadPlugin(\"MapSet\", { proxyMap_, proxySet_ });\n}\n\n// src/immer.ts\nvar immer = new Immer2();\nvar produce = immer.produce;\nvar produceWithPatches = immer.produceWithPatches.bind(\n  immer\n);\nvar setAutoFreeze = immer.setAutoFreeze.bind(immer);\nvar setUseStrictShallowCopy = immer.setUseStrictShallowCopy.bind(immer);\nvar applyPatches = immer.applyPatches.bind(immer);\nvar createDraft = immer.createDraft.bind(immer);\nvar finishDraft = immer.finishDraft.bind(immer);\nfunction castDraft(value) {\n  return value;\n}\nfunction castImmutable(value) {\n  return value;\n}\nexport {\n  Immer2 as Immer,\n  applyPatches,\n  castDraft,\n  castImmutable,\n  createDraft,\n  current,\n  enableMapSet,\n  enablePatches,\n  finishDraft,\n  freeze,\n  DRAFTABLE as immerable,\n  isDraft,\n  isDraftable,\n  NOTHING as nothing,\n  original,\n  produce,\n  produceWithPatches,\n  setAutoFreeze,\n  setUseStrictShallowCopy\n};\n//# sourceMappingURL=immer.mjs.map","import { isPlainObject } from 'is-plain-object';\nimport { createDraft, finishDraft, isDraft, produce } from 'immer';\n\n// eslint-disable-next-line no-redeclare\nvar PathRef = {\n  transform(ref, op) {\n    var {\n      current,\n      affinity\n    } = ref;\n    if (current == null) {\n      return;\n    }\n    var path = Path.transform(current, op, {\n      affinity\n    });\n    ref.current = path;\n    if (path == null) {\n      ref.unref();\n    }\n  }\n};\n\n// eslint-disable-next-line no-redeclare\nvar PointRef = {\n  transform(ref, op) {\n    var {\n      current,\n      affinity\n    } = ref;\n    if (current == null) {\n      return;\n    }\n    var point = Point.transform(current, op, {\n      affinity\n    });\n    ref.current = point;\n    if (point == null) {\n      ref.unref();\n    }\n  }\n};\n\n// eslint-disable-next-line no-redeclare\nvar RangeRef = {\n  transform(ref, op) {\n    var {\n      current,\n      affinity\n    } = ref;\n    if (current == null) {\n      return;\n    }\n    var path = Range.transform(current, op, {\n      affinity\n    });\n    ref.current = path;\n    if (path == null) {\n      ref.unref();\n    }\n  }\n};\n\nvar DIRTY_PATHS = new WeakMap();\nvar DIRTY_PATH_KEYS = new WeakMap();\nvar FLUSHING = new WeakMap();\nvar NORMALIZING = new WeakMap();\nvar PATH_REFS = new WeakMap();\nvar POINT_REFS = new WeakMap();\nvar RANGE_REFS = new WeakMap();\n\n// eslint-disable-next-line no-redeclare\nvar Path = {\n  ancestors(path) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      reverse = false\n    } = options;\n    var paths = Path.levels(path, options);\n    if (reverse) {\n      paths = paths.slice(1);\n    } else {\n      paths = paths.slice(0, -1);\n    }\n    return paths;\n  },\n  common(path, another) {\n    var common = [];\n    for (var i = 0; i < path.length && i < another.length; i++) {\n      var av = path[i];\n      var bv = another[i];\n      if (av !== bv) {\n        break;\n      }\n      common.push(av);\n    }\n    return common;\n  },\n  compare(path, another) {\n    var min = Math.min(path.length, another.length);\n    for (var i = 0; i < min; i++) {\n      if (path[i] < another[i]) return -1;\n      if (path[i] > another[i]) return 1;\n    }\n    return 0;\n  },\n  endsAfter(path, another) {\n    var i = path.length - 1;\n    var as = path.slice(0, i);\n    var bs = another.slice(0, i);\n    var av = path[i];\n    var bv = another[i];\n    return Path.equals(as, bs) && av > bv;\n  },\n  endsAt(path, another) {\n    var i = path.length;\n    var as = path.slice(0, i);\n    var bs = another.slice(0, i);\n    return Path.equals(as, bs);\n  },\n  endsBefore(path, another) {\n    var i = path.length - 1;\n    var as = path.slice(0, i);\n    var bs = another.slice(0, i);\n    var av = path[i];\n    var bv = another[i];\n    return Path.equals(as, bs) && av < bv;\n  },\n  equals(path, another) {\n    return path.length === another.length && path.every((n, i) => n === another[i]);\n  },\n  hasPrevious(path) {\n    return path[path.length - 1] > 0;\n  },\n  isAfter(path, another) {\n    return Path.compare(path, another) === 1;\n  },\n  isAncestor(path, another) {\n    return path.length < another.length && Path.compare(path, another) === 0;\n  },\n  isBefore(path, another) {\n    return Path.compare(path, another) === -1;\n  },\n  isChild(path, another) {\n    return path.length === another.length + 1 && Path.compare(path, another) === 0;\n  },\n  isCommon(path, another) {\n    return path.length <= another.length && Path.compare(path, another) === 0;\n  },\n  isDescendant(path, another) {\n    return path.length > another.length && Path.compare(path, another) === 0;\n  },\n  isParent(path, another) {\n    return path.length + 1 === another.length && Path.compare(path, another) === 0;\n  },\n  isPath(value) {\n    return Array.isArray(value) && (value.length === 0 || typeof value[0] === 'number');\n  },\n  isSibling(path, another) {\n    if (path.length !== another.length) {\n      return false;\n    }\n    var as = path.slice(0, -1);\n    var bs = another.slice(0, -1);\n    var al = path[path.length - 1];\n    var bl = another[another.length - 1];\n    return al !== bl && Path.equals(as, bs);\n  },\n  levels(path) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      reverse = false\n    } = options;\n    var list = [];\n    for (var i = 0; i <= path.length; i++) {\n      list.push(path.slice(0, i));\n    }\n    if (reverse) {\n      list.reverse();\n    }\n    return list;\n  },\n  next(path) {\n    if (path.length === 0) {\n      throw new Error(\"Cannot get the next path of a root path [\".concat(path, \"], because it has no next index.\"));\n    }\n    var last = path[path.length - 1];\n    return path.slice(0, -1).concat(last + 1);\n  },\n  operationCanTransformPath(operation) {\n    switch (operation.type) {\n      case 'insert_node':\n      case 'remove_node':\n      case 'merge_node':\n      case 'split_node':\n      case 'move_node':\n        return true;\n      default:\n        return false;\n    }\n  },\n  parent(path) {\n    if (path.length === 0) {\n      throw new Error(\"Cannot get the parent path of the root path [\".concat(path, \"].\"));\n    }\n    return path.slice(0, -1);\n  },\n  previous(path) {\n    if (path.length === 0) {\n      throw new Error(\"Cannot get the previous path of a root path [\".concat(path, \"], because it has no previous index.\"));\n    }\n    var last = path[path.length - 1];\n    if (last <= 0) {\n      throw new Error(\"Cannot get the previous path of a first child path [\".concat(path, \"] because it would result in a negative index.\"));\n    }\n    return path.slice(0, -1).concat(last - 1);\n  },\n  relative(path, ancestor) {\n    if (!Path.isAncestor(ancestor, path) && !Path.equals(path, ancestor)) {\n      throw new Error(\"Cannot get the relative path of [\".concat(path, \"] inside ancestor [\").concat(ancestor, \"], because it is not above or equal to the path.\"));\n    }\n    return path.slice(ancestor.length);\n  },\n  transform(path, operation) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    if (!path) return null;\n    // PERF: use destructing instead of immer\n    var p = [...path];\n    var {\n      affinity = 'forward'\n    } = options;\n    // PERF: Exit early if the operation is guaranteed not to have an effect.\n    if (path.length === 0) {\n      return p;\n    }\n    switch (operation.type) {\n      case 'insert_node':\n        {\n          var {\n            path: op\n          } = operation;\n          if (Path.equals(op, p) || Path.endsBefore(op, p) || Path.isAncestor(op, p)) {\n            p[op.length - 1] += 1;\n          }\n          break;\n        }\n      case 'remove_node':\n        {\n          var {\n            path: _op\n          } = operation;\n          if (Path.equals(_op, p) || Path.isAncestor(_op, p)) {\n            return null;\n          } else if (Path.endsBefore(_op, p)) {\n            p[_op.length - 1] -= 1;\n          }\n          break;\n        }\n      case 'merge_node':\n        {\n          var {\n            path: _op2,\n            position\n          } = operation;\n          if (Path.equals(_op2, p) || Path.endsBefore(_op2, p)) {\n            p[_op2.length - 1] -= 1;\n          } else if (Path.isAncestor(_op2, p)) {\n            p[_op2.length - 1] -= 1;\n            p[_op2.length] += position;\n          }\n          break;\n        }\n      case 'split_node':\n        {\n          var {\n            path: _op3,\n            position: _position\n          } = operation;\n          if (Path.equals(_op3, p)) {\n            if (affinity === 'forward') {\n              p[p.length - 1] += 1;\n            } else if (affinity === 'backward') ; else {\n              return null;\n            }\n          } else if (Path.endsBefore(_op3, p)) {\n            p[_op3.length - 1] += 1;\n          } else if (Path.isAncestor(_op3, p) && path[_op3.length] >= _position) {\n            p[_op3.length - 1] += 1;\n            p[_op3.length] -= _position;\n          }\n          break;\n        }\n      case 'move_node':\n        {\n          var {\n            path: _op4,\n            newPath: onp\n          } = operation;\n          // If the old and new path are the same, it's a no-op.\n          if (Path.equals(_op4, onp)) {\n            return p;\n          }\n          if (Path.isAncestor(_op4, p) || Path.equals(_op4, p)) {\n            var copy = onp.slice();\n            if (Path.endsBefore(_op4, onp) && _op4.length < onp.length) {\n              copy[_op4.length - 1] -= 1;\n            }\n            return copy.concat(p.slice(_op4.length));\n          } else if (Path.isSibling(_op4, onp) && (Path.isAncestor(onp, p) || Path.equals(onp, p))) {\n            if (Path.endsBefore(_op4, p)) {\n              p[_op4.length - 1] -= 1;\n            } else {\n              p[_op4.length - 1] += 1;\n            }\n          } else if (Path.endsBefore(onp, p) || Path.equals(onp, p) || Path.isAncestor(onp, p)) {\n            if (Path.endsBefore(_op4, p)) {\n              p[_op4.length - 1] -= 1;\n            }\n            p[onp.length - 1] += 1;\n          } else if (Path.endsBefore(_op4, p)) {\n            if (Path.equals(onp, p)) {\n              p[onp.length - 1] += 1;\n            }\n            p[_op4.length - 1] -= 1;\n          }\n          break;\n        }\n    }\n    return p;\n  }\n};\n\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\n\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\n\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\n\nfunction ownKeys$e(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$e(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$e(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$e(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar applyToDraft = (editor, selection, op) => {\n  switch (op.type) {\n    case 'insert_node':\n      {\n        var {\n          path,\n          node\n        } = op;\n        var parent = Node.parent(editor, path);\n        var index = path[path.length - 1];\n        if (index > parent.children.length) {\n          throw new Error(\"Cannot apply an \\\"insert_node\\\" operation at path [\".concat(path, \"] because the destination is past the end of the node.\"));\n        }\n        parent.children.splice(index, 0, node);\n        if (selection) {\n          for (var [point, key] of Range.points(selection)) {\n            selection[key] = Point.transform(point, op);\n          }\n        }\n        break;\n      }\n    case 'insert_text':\n      {\n        var {\n          path: _path,\n          offset,\n          text\n        } = op;\n        if (text.length === 0) break;\n        var _node = Node.leaf(editor, _path);\n        var before = _node.text.slice(0, offset);\n        var after = _node.text.slice(offset);\n        _node.text = before + text + after;\n        if (selection) {\n          for (var [_point, _key] of Range.points(selection)) {\n            selection[_key] = Point.transform(_point, op);\n          }\n        }\n        break;\n      }\n    case 'merge_node':\n      {\n        var {\n          path: _path2\n        } = op;\n        var _node2 = Node.get(editor, _path2);\n        var prevPath = Path.previous(_path2);\n        var prev = Node.get(editor, prevPath);\n        var _parent = Node.parent(editor, _path2);\n        var _index = _path2[_path2.length - 1];\n        if (Text.isText(_node2) && Text.isText(prev)) {\n          prev.text += _node2.text;\n        } else if (!Text.isText(_node2) && !Text.isText(prev)) {\n          prev.children.push(..._node2.children);\n        } else {\n          throw new Error(\"Cannot apply a \\\"merge_node\\\" operation at path [\".concat(_path2, \"] to nodes of different interfaces: \").concat(Scrubber.stringify(_node2), \" \").concat(Scrubber.stringify(prev)));\n        }\n        _parent.children.splice(_index, 1);\n        if (selection) {\n          for (var [_point2, _key2] of Range.points(selection)) {\n            selection[_key2] = Point.transform(_point2, op);\n          }\n        }\n        break;\n      }\n    case 'move_node':\n      {\n        var {\n          path: _path3,\n          newPath\n        } = op;\n        if (Path.isAncestor(_path3, newPath)) {\n          throw new Error(\"Cannot move a path [\".concat(_path3, \"] to new path [\").concat(newPath, \"] because the destination is inside itself.\"));\n        }\n        var _node3 = Node.get(editor, _path3);\n        var _parent2 = Node.parent(editor, _path3);\n        var _index2 = _path3[_path3.length - 1];\n        // This is tricky, but since the `path` and `newPath` both refer to\n        // the same snapshot in time, there's a mismatch. After either\n        // removing the original position, the second step's path can be out\n        // of date. So instead of using the `op.newPath` directly, we\n        // transform `op.path` to ascertain what the `newPath` would be after\n        // the operation was applied.\n        _parent2.children.splice(_index2, 1);\n        var truePath = Path.transform(_path3, op);\n        var newParent = Node.get(editor, Path.parent(truePath));\n        var newIndex = truePath[truePath.length - 1];\n        newParent.children.splice(newIndex, 0, _node3);\n        if (selection) {\n          for (var [_point3, _key3] of Range.points(selection)) {\n            selection[_key3] = Point.transform(_point3, op);\n          }\n        }\n        break;\n      }\n    case 'remove_node':\n      {\n        var {\n          path: _path4\n        } = op;\n        var _index3 = _path4[_path4.length - 1];\n        var _parent3 = Node.parent(editor, _path4);\n        _parent3.children.splice(_index3, 1);\n        // Transform all the points in the value, but if the point was in the\n        // node that was removed we need to update the range or remove it.\n        if (selection) {\n          for (var [_point4, _key4] of Range.points(selection)) {\n            var result = Point.transform(_point4, op);\n            if (selection != null && result != null) {\n              selection[_key4] = result;\n            } else {\n              var _prev = void 0;\n              var next = void 0;\n              for (var [n, p] of Node.texts(editor)) {\n                if (Path.compare(p, _path4) === -1) {\n                  _prev = [n, p];\n                } else {\n                  next = [n, p];\n                  break;\n                }\n              }\n              var preferNext = false;\n              if (_prev && next) {\n                if (Path.equals(next[1], _path4)) {\n                  preferNext = !Path.hasPrevious(next[1]);\n                } else {\n                  preferNext = Path.common(_prev[1], _path4).length < Path.common(next[1], _path4).length;\n                }\n              }\n              if (_prev && !preferNext) {\n                _point4.path = _prev[1];\n                _point4.offset = _prev[0].text.length;\n              } else if (next) {\n                _point4.path = next[1];\n                _point4.offset = 0;\n              } else {\n                selection = null;\n              }\n            }\n          }\n        }\n        break;\n      }\n    case 'remove_text':\n      {\n        var {\n          path: _path5,\n          offset: _offset,\n          text: _text\n        } = op;\n        if (_text.length === 0) break;\n        var _node4 = Node.leaf(editor, _path5);\n        var _before = _node4.text.slice(0, _offset);\n        var _after = _node4.text.slice(_offset + _text.length);\n        _node4.text = _before + _after;\n        if (selection) {\n          for (var [_point5, _key5] of Range.points(selection)) {\n            selection[_key5] = Point.transform(_point5, op);\n          }\n        }\n        break;\n      }\n    case 'set_node':\n      {\n        var {\n          path: _path6,\n          properties,\n          newProperties\n        } = op;\n        if (_path6.length === 0) {\n          throw new Error(\"Cannot set properties on the root node!\");\n        }\n        var _node5 = Node.get(editor, _path6);\n        for (var _key6 in newProperties) {\n          if (_key6 === 'children' || _key6 === 'text') {\n            throw new Error(\"Cannot set the \\\"\".concat(_key6, \"\\\" property of nodes!\"));\n          }\n          var value = newProperties[_key6];\n          if (value == null) {\n            delete _node5[_key6];\n          } else {\n            _node5[_key6] = value;\n          }\n        }\n        // properties that were previously defined, but are now missing, must be deleted\n        for (var _key7 in properties) {\n          if (!newProperties.hasOwnProperty(_key7)) {\n            delete _node5[_key7];\n          }\n        }\n        break;\n      }\n    case 'set_selection':\n      {\n        var {\n          newProperties: _newProperties\n        } = op;\n        if (_newProperties == null) {\n          selection = _newProperties;\n        } else {\n          if (selection == null) {\n            if (!Range.isRange(_newProperties)) {\n              throw new Error(\"Cannot apply an incomplete \\\"set_selection\\\" operation properties \".concat(Scrubber.stringify(_newProperties), \" when there is no current selection.\"));\n            }\n            selection = _objectSpread$e({}, _newProperties);\n          }\n          for (var _key8 in _newProperties) {\n            var _value = _newProperties[_key8];\n            if (_value == null) {\n              if (_key8 === 'anchor' || _key8 === 'focus') {\n                throw new Error(\"Cannot remove the \\\"\".concat(_key8, \"\\\" selection property\"));\n              }\n              delete selection[_key8];\n            } else {\n              selection[_key8] = _value;\n            }\n          }\n        }\n        break;\n      }\n    case 'split_node':\n      {\n        var {\n          path: _path7,\n          position,\n          properties: _properties\n        } = op;\n        if (_path7.length === 0) {\n          throw new Error(\"Cannot apply a \\\"split_node\\\" operation at path [\".concat(_path7, \"] because the root node cannot be split.\"));\n        }\n        var _node6 = Node.get(editor, _path7);\n        var _parent4 = Node.parent(editor, _path7);\n        var _index4 = _path7[_path7.length - 1];\n        var newNode;\n        if (Text.isText(_node6)) {\n          var _before2 = _node6.text.slice(0, position);\n          var _after2 = _node6.text.slice(position);\n          _node6.text = _before2;\n          newNode = _objectSpread$e(_objectSpread$e({}, _properties), {}, {\n            text: _after2\n          });\n        } else {\n          var _before3 = _node6.children.slice(0, position);\n          var _after3 = _node6.children.slice(position);\n          _node6.children = _before3;\n          newNode = _objectSpread$e(_objectSpread$e({}, _properties), {}, {\n            children: _after3\n          });\n        }\n        _parent4.children.splice(_index4 + 1, 0, newNode);\n        if (selection) {\n          for (var [_point6, _key9] of Range.points(selection)) {\n            selection[_key9] = Point.transform(_point6, op);\n          }\n        }\n        break;\n      }\n  }\n  return selection;\n};\n// eslint-disable-next-line no-redeclare\nvar GeneralTransforms = {\n  transform(editor, op) {\n    editor.children = createDraft(editor.children);\n    var selection = editor.selection && createDraft(editor.selection);\n    try {\n      selection = applyToDraft(editor, selection, op);\n    } finally {\n      editor.children = finishDraft(editor.children);\n      if (selection) {\n        editor.selection = isDraft(selection) ? finishDraft(selection) : selection;\n      } else {\n        editor.selection = null;\n      }\n    }\n  }\n};\n\n// eslint-disable-next-line no-redeclare\nvar NodeTransforms = {\n  insertNodes(editor, nodes, options) {\n    editor.insertNodes(nodes, options);\n  },\n  liftNodes(editor, options) {\n    editor.liftNodes(options);\n  },\n  mergeNodes(editor, options) {\n    editor.mergeNodes(options);\n  },\n  moveNodes(editor, options) {\n    editor.moveNodes(options);\n  },\n  removeNodes(editor, options) {\n    editor.removeNodes(options);\n  },\n  setNodes(editor, props, options) {\n    editor.setNodes(props, options);\n  },\n  splitNodes(editor, options) {\n    editor.splitNodes(options);\n  },\n  unsetNodes(editor, props, options) {\n    editor.unsetNodes(props, options);\n  },\n  unwrapNodes(editor, options) {\n    editor.unwrapNodes(options);\n  },\n  wrapNodes(editor, element, options) {\n    editor.wrapNodes(element, options);\n  }\n};\n\n// eslint-disable-next-line no-redeclare\nvar SelectionTransforms = {\n  collapse(editor, options) {\n    editor.collapse(options);\n  },\n  deselect(editor) {\n    editor.deselect();\n  },\n  move(editor, options) {\n    editor.move(options);\n  },\n  select(editor, target) {\n    editor.select(target);\n  },\n  setPoint(editor, props, options) {\n    editor.setPoint(props, options);\n  },\n  setSelection(editor, props) {\n    editor.setSelection(props);\n  }\n};\n\n/*\n  Custom deep equal comparison for Slate nodes.\n\n  We don't need general purpose deep equality;\n  Slate only supports plain values, Arrays, and nested objects.\n  Complex values nested inside Arrays are not supported.\n\n  Slate objects are designed to be serialised, so\n  missing keys are deliberately normalised to undefined.\n */\nvar isDeepEqual = (node, another) => {\n  for (var key in node) {\n    var a = node[key];\n    var b = another[key];\n    if (isPlainObject(a) && isPlainObject(b)) {\n      if (!isDeepEqual(a, b)) return false;\n    } else if (Array.isArray(a) && Array.isArray(b)) {\n      if (a.length !== b.length) return false;\n      for (var i = 0; i < a.length; i++) {\n        if (a[i] !== b[i]) return false;\n      }\n    } else if (a !== b) {\n      return false;\n    }\n  }\n  /*\n    Deep object equality is only necessary in one direction; in the reverse direction\n    we are only looking for keys that are missing.\n    As above, undefined keys are normalised to missing.\n  */\n  for (var _key in another) {\n    if (node[_key] === undefined && another[_key] !== undefined) {\n      return false;\n    }\n  }\n  return true;\n};\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\n\nvar _excluded$4 = [\"anchor\", \"focus\"];\nfunction ownKeys$d(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$d(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$d(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$d(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n// eslint-disable-next-line no-redeclare\nvar Range = {\n  edges(range) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      reverse = false\n    } = options;\n    var {\n      anchor,\n      focus\n    } = range;\n    return Range.isBackward(range) === reverse ? [anchor, focus] : [focus, anchor];\n  },\n  end(range) {\n    var [, end] = Range.edges(range);\n    return end;\n  },\n  equals(range, another) {\n    return Point.equals(range.anchor, another.anchor) && Point.equals(range.focus, another.focus);\n  },\n  includes(range, target) {\n    if (Range.isRange(target)) {\n      if (Range.includes(range, target.anchor) || Range.includes(range, target.focus)) {\n        return true;\n      }\n      var [rs, re] = Range.edges(range);\n      var [ts, te] = Range.edges(target);\n      return Point.isBefore(rs, ts) && Point.isAfter(re, te);\n    }\n    var [start, end] = Range.edges(range);\n    var isAfterStart = false;\n    var isBeforeEnd = false;\n    if (Point.isPoint(target)) {\n      isAfterStart = Point.compare(target, start) >= 0;\n      isBeforeEnd = Point.compare(target, end) <= 0;\n    } else {\n      isAfterStart = Path.compare(target, start.path) >= 0;\n      isBeforeEnd = Path.compare(target, end.path) <= 0;\n    }\n    return isAfterStart && isBeforeEnd;\n  },\n  intersection(range, another) {\n    var rest = _objectWithoutProperties(range, _excluded$4);\n    var [s1, e1] = Range.edges(range);\n    var [s2, e2] = Range.edges(another);\n    var start = Point.isBefore(s1, s2) ? s2 : s1;\n    var end = Point.isBefore(e1, e2) ? e1 : e2;\n    if (Point.isBefore(end, start)) {\n      return null;\n    } else {\n      return _objectSpread$d({\n        anchor: start,\n        focus: end\n      }, rest);\n    }\n  },\n  isBackward(range) {\n    var {\n      anchor,\n      focus\n    } = range;\n    return Point.isAfter(anchor, focus);\n  },\n  isCollapsed(range) {\n    var {\n      anchor,\n      focus\n    } = range;\n    return Point.equals(anchor, focus);\n  },\n  isExpanded(range) {\n    return !Range.isCollapsed(range);\n  },\n  isForward(range) {\n    return !Range.isBackward(range);\n  },\n  isRange(value) {\n    return isPlainObject(value) && Point.isPoint(value.anchor) && Point.isPoint(value.focus);\n  },\n  *points(range) {\n    yield [range.anchor, 'anchor'];\n    yield [range.focus, 'focus'];\n  },\n  start(range) {\n    var [start] = Range.edges(range);\n    return start;\n  },\n  transform(range, op) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return produce(range, r => {\n      if (r === null) {\n        return null;\n      }\n      var {\n        affinity = 'inward'\n      } = options;\n      var affinityAnchor;\n      var affinityFocus;\n      if (affinity === 'inward') {\n        // If the range is collapsed, make sure to use the same affinity to\n        // avoid the two points passing each other and expanding in the opposite\n        // direction\n        var isCollapsed = Range.isCollapsed(r);\n        if (Range.isForward(r)) {\n          affinityAnchor = 'forward';\n          affinityFocus = isCollapsed ? affinityAnchor : 'backward';\n        } else {\n          affinityAnchor = 'backward';\n          affinityFocus = isCollapsed ? affinityAnchor : 'forward';\n        }\n      } else if (affinity === 'outward') {\n        if (Range.isForward(r)) {\n          affinityAnchor = 'backward';\n          affinityFocus = 'forward';\n        } else {\n          affinityAnchor = 'forward';\n          affinityFocus = 'backward';\n        }\n      } else {\n        affinityAnchor = affinity;\n        affinityFocus = affinity;\n      }\n      var anchor = Point.transform(r.anchor, op, {\n        affinity: affinityAnchor\n      });\n      var focus = Point.transform(r.focus, op, {\n        affinity: affinityFocus\n      });\n      if (!anchor || !focus) {\n        return null;\n      }\n      r.anchor = anchor;\n      r.focus = focus;\n    });\n  }\n};\n\n/**\n * Shared the function with isElementType utility\n */\nvar isElement = value => {\n  return isPlainObject(value) && Node.isNodeList(value.children) && !Editor.isEditor(value);\n};\n// eslint-disable-next-line no-redeclare\nvar Element = {\n  isAncestor(value) {\n    return isPlainObject(value) && Node.isNodeList(value.children);\n  },\n  isElement,\n  isElementList(value) {\n    return Array.isArray(value) && value.every(val => Element.isElement(val));\n  },\n  isElementProps(props) {\n    return props.children !== undefined;\n  },\n  isElementType: function isElementType(value, elementVal) {\n    var elementKey = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'type';\n    return isElement(value) && value[elementKey] === elementVal;\n  },\n  matches(element, props) {\n    for (var key in props) {\n      if (key === 'children') {\n        continue;\n      }\n      if (element[key] !== props[key]) {\n        return false;\n      }\n    }\n    return true;\n  }\n};\n\nvar _excluded$3 = [\"children\"],\n  _excluded2$3 = [\"text\"];\nvar IS_NODE_LIST_CACHE = new WeakMap();\n// eslint-disable-next-line no-redeclare\nvar Node = {\n  ancestor(root, path) {\n    var node = Node.get(root, path);\n    if (Text.isText(node)) {\n      throw new Error(\"Cannot get the ancestor node at path [\".concat(path, \"] because it refers to a text node instead: \").concat(Scrubber.stringify(node)));\n    }\n    return node;\n  },\n  ancestors(root, path) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return function* () {\n      for (var p of Path.ancestors(path, options)) {\n        var n = Node.ancestor(root, p);\n        var entry = [n, p];\n        yield entry;\n      }\n    }();\n  },\n  child(root, index) {\n    if (Text.isText(root)) {\n      throw new Error(\"Cannot get the child of a text node: \".concat(Scrubber.stringify(root)));\n    }\n    var c = root.children[index];\n    if (c == null) {\n      throw new Error(\"Cannot get child at index `\".concat(index, \"` in node: \").concat(Scrubber.stringify(root)));\n    }\n    return c;\n  },\n  children(root, path) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return function* () {\n      var {\n        reverse = false\n      } = options;\n      var ancestor = Node.ancestor(root, path);\n      var {\n        children\n      } = ancestor;\n      var index = reverse ? children.length - 1 : 0;\n      while (reverse ? index >= 0 : index < children.length) {\n        var child = Node.child(ancestor, index);\n        var childPath = path.concat(index);\n        yield [child, childPath];\n        index = reverse ? index - 1 : index + 1;\n      }\n    }();\n  },\n  common(root, path, another) {\n    var p = Path.common(path, another);\n    var n = Node.get(root, p);\n    return [n, p];\n  },\n  descendant(root, path) {\n    var node = Node.get(root, path);\n    if (Editor.isEditor(node)) {\n      throw new Error(\"Cannot get the descendant node at path [\".concat(path, \"] because it refers to the root editor node instead: \").concat(Scrubber.stringify(node)));\n    }\n    return node;\n  },\n  descendants(root) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return function* () {\n      for (var [node, path] of Node.nodes(root, options)) {\n        if (path.length !== 0) {\n          // NOTE: we have to coerce here because checking the path's length does\n          // guarantee that `node` is not a `Editor`, but TypeScript doesn't know.\n          yield [node, path];\n        }\n      }\n    }();\n  },\n  elements(root) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return function* () {\n      for (var [node, path] of Node.nodes(root, options)) {\n        if (Element.isElement(node)) {\n          yield [node, path];\n        }\n      }\n    }();\n  },\n  extractProps(node) {\n    if (Element.isAncestor(node)) {\n      var properties = _objectWithoutProperties(node, _excluded$3);\n      return properties;\n    } else {\n      var properties = _objectWithoutProperties(node, _excluded2$3);\n      return properties;\n    }\n  },\n  first(root, path) {\n    var p = path.slice();\n    var n = Node.get(root, p);\n    while (n) {\n      if (Text.isText(n) || n.children.length === 0) {\n        break;\n      } else {\n        n = n.children[0];\n        p.push(0);\n      }\n    }\n    return [n, p];\n  },\n  fragment(root, range) {\n    if (Text.isText(root)) {\n      throw new Error(\"Cannot get a fragment starting from a root text node: \".concat(Scrubber.stringify(root)));\n    }\n    var newRoot = produce({\n      children: root.children\n    }, r => {\n      var [start, end] = Range.edges(range);\n      var nodeEntries = Node.nodes(r, {\n        reverse: true,\n        pass: _ref => {\n          var [, path] = _ref;\n          return !Range.includes(range, path);\n        }\n      });\n      for (var [, path] of nodeEntries) {\n        if (!Range.includes(range, path)) {\n          var parent = Node.parent(r, path);\n          var index = path[path.length - 1];\n          parent.children.splice(index, 1);\n        }\n        if (Path.equals(path, end.path)) {\n          var leaf = Node.leaf(r, path);\n          leaf.text = leaf.text.slice(0, end.offset);\n        }\n        if (Path.equals(path, start.path)) {\n          var _leaf = Node.leaf(r, path);\n          _leaf.text = _leaf.text.slice(start.offset);\n        }\n      }\n      if (Editor.isEditor(r)) {\n        r.selection = null;\n      }\n    });\n    return newRoot.children;\n  },\n  get(root, path) {\n    var node = root;\n    for (var i = 0; i < path.length; i++) {\n      var p = path[i];\n      if (Text.isText(node) || !node.children[p]) {\n        throw new Error(\"Cannot find a descendant at path [\".concat(path, \"] in node: \").concat(Scrubber.stringify(root)));\n      }\n      node = node.children[p];\n    }\n    return node;\n  },\n  has(root, path) {\n    var node = root;\n    for (var i = 0; i < path.length; i++) {\n      var p = path[i];\n      if (Text.isText(node) || !node.children[p]) {\n        return false;\n      }\n      node = node.children[p];\n    }\n    return true;\n  },\n  isNode(value) {\n    return Text.isText(value) || Element.isElement(value) || Editor.isEditor(value);\n  },\n  isNodeList(value) {\n    if (!Array.isArray(value)) {\n      return false;\n    }\n    var cachedResult = IS_NODE_LIST_CACHE.get(value);\n    if (cachedResult !== undefined) {\n      return cachedResult;\n    }\n    var isNodeList = value.every(val => Node.isNode(val));\n    IS_NODE_LIST_CACHE.set(value, isNodeList);\n    return isNodeList;\n  },\n  last(root, path) {\n    var p = path.slice();\n    var n = Node.get(root, p);\n    while (n) {\n      if (Text.isText(n) || n.children.length === 0) {\n        break;\n      } else {\n        var i = n.children.length - 1;\n        n = n.children[i];\n        p.push(i);\n      }\n    }\n    return [n, p];\n  },\n  leaf(root, path) {\n    var node = Node.get(root, path);\n    if (!Text.isText(node)) {\n      throw new Error(\"Cannot get the leaf node at path [\".concat(path, \"] because it refers to a non-leaf node: \").concat(Scrubber.stringify(node)));\n    }\n    return node;\n  },\n  levels(root, path) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return function* () {\n      for (var p of Path.levels(path, options)) {\n        var n = Node.get(root, p);\n        yield [n, p];\n      }\n    }();\n  },\n  matches(node, props) {\n    return Element.isElement(node) && Element.isElementProps(props) && Element.matches(node, props) || Text.isText(node) && Text.isTextProps(props) && Text.matches(node, props);\n  },\n  nodes(root) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return function* () {\n      var {\n        pass,\n        reverse = false\n      } = options;\n      var {\n        from = [],\n        to\n      } = options;\n      var visited = new Set();\n      var p = [];\n      var n = root;\n      while (true) {\n        if (to && (reverse ? Path.isBefore(p, to) : Path.isAfter(p, to))) {\n          break;\n        }\n        if (!visited.has(n)) {\n          yield [n, p];\n        }\n        // If we're allowed to go downward and we haven't descended yet, do.\n        if (!visited.has(n) && !Text.isText(n) && n.children.length !== 0 && (pass == null || pass([n, p]) === false)) {\n          visited.add(n);\n          var nextIndex = reverse ? n.children.length - 1 : 0;\n          if (Path.isAncestor(p, from)) {\n            nextIndex = from[p.length];\n          }\n          p = p.concat(nextIndex);\n          n = Node.get(root, p);\n          continue;\n        }\n        // If we're at the root and we can't go down, we're done.\n        if (p.length === 0) {\n          break;\n        }\n        // If we're going forward...\n        if (!reverse) {\n          var newPath = Path.next(p);\n          if (Node.has(root, newPath)) {\n            p = newPath;\n            n = Node.get(root, p);\n            continue;\n          }\n        }\n        // If we're going backward...\n        if (reverse && p[p.length - 1] !== 0) {\n          var _newPath = Path.previous(p);\n          p = _newPath;\n          n = Node.get(root, p);\n          continue;\n        }\n        // Otherwise we're going upward...\n        p = Path.parent(p);\n        n = Node.get(root, p);\n        visited.add(n);\n      }\n    }();\n  },\n  parent(root, path) {\n    var parentPath = Path.parent(path);\n    var p = Node.get(root, parentPath);\n    if (Text.isText(p)) {\n      throw new Error(\"Cannot get the parent of path [\".concat(path, \"] because it does not exist in the root.\"));\n    }\n    return p;\n  },\n  string(node) {\n    if (Text.isText(node)) {\n      return node.text;\n    } else {\n      return node.children.map(Node.string).join('');\n    }\n  },\n  texts(root) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return function* () {\n      for (var [node, path] of Node.nodes(root, options)) {\n        if (Text.isText(node)) {\n          yield [node, path];\n        }\n      }\n    }();\n  }\n};\n\nfunction ownKeys$c(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$c(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$c(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$c(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n// eslint-disable-next-line no-redeclare\nvar Operation = {\n  isNodeOperation(value) {\n    return Operation.isOperation(value) && value.type.endsWith('_node');\n  },\n  isOperation(value) {\n    if (!isPlainObject(value)) {\n      return false;\n    }\n    switch (value.type) {\n      case 'insert_node':\n        return Path.isPath(value.path) && Node.isNode(value.node);\n      case 'insert_text':\n        return typeof value.offset === 'number' && typeof value.text === 'string' && Path.isPath(value.path);\n      case 'merge_node':\n        return typeof value.position === 'number' && Path.isPath(value.path) && isPlainObject(value.properties);\n      case 'move_node':\n        return Path.isPath(value.path) && Path.isPath(value.newPath);\n      case 'remove_node':\n        return Path.isPath(value.path) && Node.isNode(value.node);\n      case 'remove_text':\n        return typeof value.offset === 'number' && typeof value.text === 'string' && Path.isPath(value.path);\n      case 'set_node':\n        return Path.isPath(value.path) && isPlainObject(value.properties) && isPlainObject(value.newProperties);\n      case 'set_selection':\n        return value.properties === null && Range.isRange(value.newProperties) || value.newProperties === null && Range.isRange(value.properties) || isPlainObject(value.properties) && isPlainObject(value.newProperties);\n      case 'split_node':\n        return Path.isPath(value.path) && typeof value.position === 'number' && isPlainObject(value.properties);\n      default:\n        return false;\n    }\n  },\n  isOperationList(value) {\n    return Array.isArray(value) && value.every(val => Operation.isOperation(val));\n  },\n  isSelectionOperation(value) {\n    return Operation.isOperation(value) && value.type.endsWith('_selection');\n  },\n  isTextOperation(value) {\n    return Operation.isOperation(value) && value.type.endsWith('_text');\n  },\n  inverse(op) {\n    switch (op.type) {\n      case 'insert_node':\n        {\n          return _objectSpread$c(_objectSpread$c({}, op), {}, {\n            type: 'remove_node'\n          });\n        }\n      case 'insert_text':\n        {\n          return _objectSpread$c(_objectSpread$c({}, op), {}, {\n            type: 'remove_text'\n          });\n        }\n      case 'merge_node':\n        {\n          return _objectSpread$c(_objectSpread$c({}, op), {}, {\n            type: 'split_node',\n            path: Path.previous(op.path)\n          });\n        }\n      case 'move_node':\n        {\n          var {\n            newPath,\n            path\n          } = op;\n          // PERF: in this case the move operation is a no-op anyways.\n          if (Path.equals(newPath, path)) {\n            return op;\n          }\n          // If the move happens completely within a single parent the path and\n          // newPath are stable with respect to each other.\n          if (Path.isSibling(path, newPath)) {\n            return _objectSpread$c(_objectSpread$c({}, op), {}, {\n              path: newPath,\n              newPath: path\n            });\n          }\n          // If the move does not happen within a single parent it is possible\n          // for the move to impact the true path to the location where the node\n          // was removed from and where it was inserted. We have to adjust for this\n          // and find the original path. We can accomplish this (only in non-sibling)\n          // moves by looking at the impact of the move operation on the node\n          // after the original move path.\n          var inversePath = Path.transform(path, op);\n          var inverseNewPath = Path.transform(Path.next(path), op);\n          return _objectSpread$c(_objectSpread$c({}, op), {}, {\n            path: inversePath,\n            newPath: inverseNewPath\n          });\n        }\n      case 'remove_node':\n        {\n          return _objectSpread$c(_objectSpread$c({}, op), {}, {\n            type: 'insert_node'\n          });\n        }\n      case 'remove_text':\n        {\n          return _objectSpread$c(_objectSpread$c({}, op), {}, {\n            type: 'insert_text'\n          });\n        }\n      case 'set_node':\n        {\n          var {\n            properties,\n            newProperties\n          } = op;\n          return _objectSpread$c(_objectSpread$c({}, op), {}, {\n            properties: newProperties,\n            newProperties: properties\n          });\n        }\n      case 'set_selection':\n        {\n          var {\n            properties: _properties,\n            newProperties: _newProperties\n          } = op;\n          if (_properties == null) {\n            return _objectSpread$c(_objectSpread$c({}, op), {}, {\n              properties: _newProperties,\n              newProperties: null\n            });\n          } else if (_newProperties == null) {\n            return _objectSpread$c(_objectSpread$c({}, op), {}, {\n              properties: null,\n              newProperties: _properties\n            });\n          } else {\n            return _objectSpread$c(_objectSpread$c({}, op), {}, {\n              properties: _newProperties,\n              newProperties: _properties\n            });\n          }\n        }\n      case 'split_node':\n        {\n          return _objectSpread$c(_objectSpread$c({}, op), {}, {\n            type: 'merge_node',\n            path: Path.next(op.path)\n          });\n        }\n    }\n  }\n};\n\nvar IS_EDITOR_CACHE = new WeakMap();\nvar isEditor = value => {\n  var cachedIsEditor = IS_EDITOR_CACHE.get(value);\n  if (cachedIsEditor !== undefined) {\n    return cachedIsEditor;\n  }\n  if (!isPlainObject(value)) {\n    return false;\n  }\n  var isEditor = typeof value.addMark === 'function' && typeof value.apply === 'function' && typeof value.deleteFragment === 'function' && typeof value.insertBreak === 'function' && typeof value.insertSoftBreak === 'function' && typeof value.insertFragment === 'function' && typeof value.insertNode === 'function' && typeof value.insertText === 'function' && typeof value.isElementReadOnly === 'function' && typeof value.isInline === 'function' && typeof value.isSelectable === 'function' && typeof value.isVoid === 'function' && typeof value.normalizeNode === 'function' && typeof value.onChange === 'function' && typeof value.removeMark === 'function' && typeof value.getDirtyPaths === 'function' && (value.marks === null || isPlainObject(value.marks)) && (value.selection === null || Range.isRange(value.selection)) && Node.isNodeList(value.children) && Operation.isOperationList(value.operations);\n  IS_EDITOR_CACHE.set(value, isEditor);\n  return isEditor;\n};\n\n// eslint-disable-next-line no-redeclare\nvar Editor = {\n  above(editor, options) {\n    return editor.above(options);\n  },\n  addMark(editor, key, value) {\n    editor.addMark(key, value);\n  },\n  after(editor, at, options) {\n    return editor.after(at, options);\n  },\n  before(editor, at, options) {\n    return editor.before(at, options);\n  },\n  deleteBackward(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      unit = 'character'\n    } = options;\n    editor.deleteBackward(unit);\n  },\n  deleteForward(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      unit = 'character'\n    } = options;\n    editor.deleteForward(unit);\n  },\n  deleteFragment(editor, options) {\n    editor.deleteFragment(options);\n  },\n  edges(editor, at) {\n    return editor.edges(at);\n  },\n  elementReadOnly(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return editor.elementReadOnly(options);\n  },\n  end(editor, at) {\n    return editor.end(at);\n  },\n  first(editor, at) {\n    return editor.first(at);\n  },\n  fragment(editor, at) {\n    return editor.fragment(at);\n  },\n  hasBlocks(editor, element) {\n    return editor.hasBlocks(element);\n  },\n  hasInlines(editor, element) {\n    return editor.hasInlines(element);\n  },\n  hasPath(editor, path) {\n    return editor.hasPath(path);\n  },\n  hasTexts(editor, element) {\n    return editor.hasTexts(element);\n  },\n  insertBreak(editor) {\n    editor.insertBreak();\n  },\n  insertFragment(editor, fragment, options) {\n    editor.insertFragment(fragment, options);\n  },\n  insertNode(editor, node) {\n    editor.insertNode(node);\n  },\n  insertSoftBreak(editor) {\n    editor.insertSoftBreak();\n  },\n  insertText(editor, text) {\n    editor.insertText(text);\n  },\n  isBlock(editor, value) {\n    return editor.isBlock(value);\n  },\n  isEdge(editor, point, at) {\n    return editor.isEdge(point, at);\n  },\n  isEditor(value) {\n    return isEditor(value);\n  },\n  isElementReadOnly(editor, element) {\n    return editor.isElementReadOnly(element);\n  },\n  isEmpty(editor, element) {\n    return editor.isEmpty(element);\n  },\n  isEnd(editor, point, at) {\n    return editor.isEnd(point, at);\n  },\n  isInline(editor, value) {\n    return editor.isInline(value);\n  },\n  isNormalizing(editor) {\n    return editor.isNormalizing();\n  },\n  isSelectable(editor, value) {\n    return editor.isSelectable(value);\n  },\n  isStart(editor, point, at) {\n    return editor.isStart(point, at);\n  },\n  isVoid(editor, value) {\n    return editor.isVoid(value);\n  },\n  last(editor, at) {\n    return editor.last(at);\n  },\n  leaf(editor, at, options) {\n    return editor.leaf(at, options);\n  },\n  levels(editor, options) {\n    return editor.levels(options);\n  },\n  marks(editor) {\n    return editor.getMarks();\n  },\n  next(editor, options) {\n    return editor.next(options);\n  },\n  node(editor, at, options) {\n    return editor.node(at, options);\n  },\n  nodes(editor, options) {\n    return editor.nodes(options);\n  },\n  normalize(editor, options) {\n    editor.normalize(options);\n  },\n  parent(editor, at, options) {\n    return editor.parent(at, options);\n  },\n  path(editor, at, options) {\n    return editor.path(at, options);\n  },\n  pathRef(editor, path, options) {\n    return editor.pathRef(path, options);\n  },\n  pathRefs(editor) {\n    return editor.pathRefs();\n  },\n  point(editor, at, options) {\n    return editor.point(at, options);\n  },\n  pointRef(editor, point, options) {\n    return editor.pointRef(point, options);\n  },\n  pointRefs(editor) {\n    return editor.pointRefs();\n  },\n  positions(editor, options) {\n    return editor.positions(options);\n  },\n  previous(editor, options) {\n    return editor.previous(options);\n  },\n  range(editor, at, to) {\n    return editor.range(at, to);\n  },\n  rangeRef(editor, range, options) {\n    return editor.rangeRef(range, options);\n  },\n  rangeRefs(editor) {\n    return editor.rangeRefs();\n  },\n  removeMark(editor, key) {\n    editor.removeMark(key);\n  },\n  setNormalizing(editor, isNormalizing) {\n    editor.setNormalizing(isNormalizing);\n  },\n  start(editor, at) {\n    return editor.start(at);\n  },\n  string(editor, at, options) {\n    return editor.string(at, options);\n  },\n  unhangRange(editor, range, options) {\n    return editor.unhangRange(range, options);\n  },\n  void(editor, options) {\n    return editor.void(options);\n  },\n  withoutNormalizing(editor, fn) {\n    editor.withoutNormalizing(fn);\n  },\n  shouldMergeNodesRemovePrevNode: (editor, prevNode, curNode) => {\n    return editor.shouldMergeNodesRemovePrevNode(prevNode, curNode);\n  }\n};\n\n// eslint-disable-next-line no-redeclare\nvar Location = {\n  isLocation(value) {\n    return Path.isPath(value) || Point.isPoint(value) || Range.isRange(value);\n  }\n};\n// eslint-disable-next-line no-redeclare\nvar Span = {\n  isSpan(value) {\n    return Array.isArray(value) && value.length === 2 && value.every(Path.isPath);\n  }\n};\n\nfunction ownKeys$b(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$b(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$b(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$b(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n// eslint-disable-next-line no-redeclare\nvar Point = {\n  compare(point, another) {\n    var result = Path.compare(point.path, another.path);\n    if (result === 0) {\n      if (point.offset < another.offset) return -1;\n      if (point.offset > another.offset) return 1;\n      return 0;\n    }\n    return result;\n  },\n  isAfter(point, another) {\n    return Point.compare(point, another) === 1;\n  },\n  isBefore(point, another) {\n    return Point.compare(point, another) === -1;\n  },\n  equals(point, another) {\n    // PERF: ensure the offsets are equal first since they are cheaper to check.\n    return point.offset === another.offset && Path.equals(point.path, another.path);\n  },\n  isPoint(value) {\n    return isPlainObject(value) && typeof value.offset === 'number' && Path.isPath(value.path);\n  },\n  transform(point, op) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return produce(point, p => {\n      if (p === null) {\n        return null;\n      }\n      var {\n        affinity = 'forward'\n      } = options;\n      var {\n        path,\n        offset\n      } = p;\n      switch (op.type) {\n        case 'insert_node':\n        case 'move_node':\n          {\n            p.path = Path.transform(path, op, options);\n            break;\n          }\n        case 'insert_text':\n          {\n            if (Path.equals(op.path, path) && (op.offset < offset || op.offset === offset && affinity === 'forward')) {\n              p.offset += op.text.length;\n            }\n            break;\n          }\n        case 'merge_node':\n          {\n            if (Path.equals(op.path, path)) {\n              p.offset += op.position;\n            }\n            p.path = Path.transform(path, op, options);\n            break;\n          }\n        case 'remove_text':\n          {\n            if (Path.equals(op.path, path) && op.offset <= offset) {\n              p.offset -= Math.min(offset - op.offset, op.text.length);\n            }\n            break;\n          }\n        case 'remove_node':\n          {\n            if (Path.equals(op.path, path) || Path.isAncestor(op.path, path)) {\n              return null;\n            }\n            p.path = Path.transform(path, op, options);\n            break;\n          }\n        case 'split_node':\n          {\n            if (Path.equals(op.path, path)) {\n              if (op.position === offset && affinity == null) {\n                return null;\n              } else if (op.position < offset || op.position === offset && affinity === 'forward') {\n                p.offset -= op.position;\n                p.path = Path.transform(path, op, _objectSpread$b(_objectSpread$b({}, options), {}, {\n                  affinity: 'forward'\n                }));\n              }\n            } else {\n              p.path = Path.transform(path, op, options);\n            }\n            break;\n          }\n      }\n    });\n  }\n};\n\nvar _scrubber = undefined;\n/**\n * This interface implements a stringify() function, which is used by Slate\n * internally when generating exceptions containing end user data. Developers\n * using Slate may call Scrubber.setScrubber() to alter the behavior of this\n * stringify() function.\n *\n * For example, to prevent the cleartext logging of 'text' fields within Nodes:\n *\n *    import { Scrubber } from 'slate';\n *    Scrubber.setScrubber((key, val) => {\n *      if (key === 'text') return '...scrubbed...'\n *      return val\n *    });\n *\n */\n// eslint-disable-next-line no-redeclare\nvar Scrubber = {\n  setScrubber(scrubber) {\n    _scrubber = scrubber;\n  },\n  stringify(value) {\n    return JSON.stringify(value, _scrubber);\n  }\n};\n\nvar _excluded$2 = [\"text\"],\n  _excluded2$2 = [\"anchor\", \"focus\"];\nfunction ownKeys$a(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$a(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$a(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$a(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n// eslint-disable-next-line no-redeclare\nvar Text = {\n  equals(text, another) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var {\n      loose = false\n    } = options;\n    function omitText(obj) {\n      var rest = _objectWithoutProperties(obj, _excluded$2);\n      return rest;\n    }\n    return isDeepEqual(loose ? omitText(text) : text, loose ? omitText(another) : another);\n  },\n  isText(value) {\n    return isPlainObject(value) && typeof value.text === 'string';\n  },\n  isTextList(value) {\n    return Array.isArray(value) && value.every(val => Text.isText(val));\n  },\n  isTextProps(props) {\n    return props.text !== undefined;\n  },\n  matches(text, props) {\n    for (var key in props) {\n      if (key === 'text') {\n        continue;\n      }\n      if (!text.hasOwnProperty(key) || text[key] !== props[key]) {\n        return false;\n      }\n    }\n    return true;\n  },\n  decorations(node, decorations) {\n    var leaves = [_objectSpread$a({}, node)];\n    for (var dec of decorations) {\n      var rest = _objectWithoutProperties(dec, _excluded2$2);\n      var [start, end] = Range.edges(dec);\n      var next = [];\n      var leafEnd = 0;\n      var decorationStart = start.offset;\n      var decorationEnd = end.offset;\n      for (var leaf of leaves) {\n        var {\n          length\n        } = leaf.text;\n        var leafStart = leafEnd;\n        leafEnd += length;\n        // If the range encompasses the entire leaf, add the range.\n        if (decorationStart <= leafStart && leafEnd <= decorationEnd) {\n          Object.assign(leaf, rest);\n          next.push(leaf);\n          continue;\n        }\n        // If the range expanded and match the leaf, or starts after, or ends before it, continue.\n        if (decorationStart !== decorationEnd && (decorationStart === leafEnd || decorationEnd === leafStart) || decorationStart > leafEnd || decorationEnd < leafStart || decorationEnd === leafStart && leafStart !== 0) {\n          next.push(leaf);\n          continue;\n        }\n        // Otherwise we need to split the leaf, at the start, end, or both,\n        // and add the range to the middle intersecting section. Do the end\n        // split first since we don't need to update the offset that way.\n        var middle = leaf;\n        var before = void 0;\n        var after = void 0;\n        if (decorationEnd < leafEnd) {\n          var off = decorationEnd - leafStart;\n          after = _objectSpread$a(_objectSpread$a({}, middle), {}, {\n            text: middle.text.slice(off)\n          });\n          middle = _objectSpread$a(_objectSpread$a({}, middle), {}, {\n            text: middle.text.slice(0, off)\n          });\n        }\n        if (decorationStart > leafStart) {\n          var _off = decorationStart - leafStart;\n          before = _objectSpread$a(_objectSpread$a({}, middle), {}, {\n            text: middle.text.slice(0, _off)\n          });\n          middle = _objectSpread$a(_objectSpread$a({}, middle), {}, {\n            text: middle.text.slice(_off)\n          });\n        }\n        Object.assign(middle, rest);\n        if (before) {\n          next.push(before);\n        }\n        next.push(middle);\n        if (after) {\n          next.push(after);\n        }\n      }\n      leaves = next;\n    }\n    return leaves;\n  }\n};\n\n/**\n * Get the default location to insert content into the editor.\n * By default, use the selection as the target location. But if there is\n * no selection, insert at the end of the document since that is such a\n * common use case when inserting from a non-selected state.\n */\nvar getDefaultInsertLocation = editor => {\n  if (editor.selection) {\n    return editor.selection;\n  } else if (editor.children.length > 0) {\n    return Editor.end(editor, []);\n  } else {\n    return [0];\n  }\n};\n\nvar matchPath = (editor, path) => {\n  var [node] = Editor.node(editor, path);\n  return n => n === node;\n};\n\n// Character (grapheme cluster) boundaries are determined according to\n// the default grapheme cluster boundary specification, extended grapheme clusters variant[1].\n//\n// References:\n//\n// [1] https://www.unicode.org/reports/tr29/#Default_Grapheme_Cluster_Table\n// [2] https://www.unicode.org/Public/UCD/latest/ucd/auxiliary/GraphemeBreakProperty.txt\n// [3] https://www.unicode.org/Public/UCD/latest/ucd/auxiliary/GraphemeBreakTest.html\n// [4] https://www.unicode.org/Public/UCD/latest/ucd/auxiliary/GraphemeBreakTest.txt\n/**\n * Get the distance to the end of the first character in a string of text.\n */\nvar getCharacterDistance = function getCharacterDistance(str) {\n  var isRTL = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var isLTR = !isRTL;\n  var codepoints = isRTL ? codepointsIteratorRTL(str) : str;\n  var left = CodepointType.None;\n  var right = CodepointType.None;\n  var distance = 0;\n  // Evaluation of these conditions are deferred.\n  var gb11 = null; // Is GB11 applicable?\n  var gb12Or13 = null; // Is GB12 or GB13 applicable?\n  for (var char of codepoints) {\n    var code = char.codePointAt(0);\n    if (!code) break;\n    var type = getCodepointType(char, code);\n    [left, right] = isLTR ? [right, type] : [type, left];\n    if (intersects(left, CodepointType.ZWJ) && intersects(right, CodepointType.ExtPict)) {\n      if (isLTR) {\n        gb11 = endsWithEmojiZWJ(str.substring(0, distance));\n      } else {\n        gb11 = endsWithEmojiZWJ(str.substring(0, str.length - distance));\n      }\n      if (!gb11) break;\n    }\n    if (intersects(left, CodepointType.RI) && intersects(right, CodepointType.RI)) {\n      if (gb12Or13 !== null) {\n        gb12Or13 = !gb12Or13;\n      } else {\n        if (isLTR) {\n          gb12Or13 = true;\n        } else {\n          gb12Or13 = endsWithOddNumberOfRIs(str.substring(0, str.length - distance));\n        }\n      }\n      if (!gb12Or13) break;\n    }\n    if (left !== CodepointType.None && right !== CodepointType.None && isBoundaryPair(left, right)) {\n      break;\n    }\n    distance += char.length;\n  }\n  return distance || 1;\n};\nvar SPACE = /\\s/;\nvar PUNCTUATION = /[\\u002B\\u0021-\\u0023\\u0025-\\u002A\\u002C-\\u002F\\u003A\\u003B\\u003F\\u0040\\u005B-\\u005D\\u005F\\u007B\\u007D\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E3B\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]/;\nvar CHAMELEON = /['\\u2018\\u2019]/;\n/**\n * Get the distance to the end of the first word in a string of text.\n */\nvar getWordDistance = function getWordDistance(text) {\n  var isRTL = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var dist = 0;\n  var started = false;\n  while (text.length > 0) {\n    var charDist = getCharacterDistance(text, isRTL);\n    var [char, remaining] = splitByCharacterDistance(text, charDist, isRTL);\n    if (isWordCharacter(char, remaining, isRTL)) {\n      started = true;\n      dist += charDist;\n    } else if (!started) {\n      dist += charDist;\n    } else {\n      break;\n    }\n    text = remaining;\n  }\n  return dist;\n};\n/**\n * Split a string in two parts at a given distance starting from the end when\n * `isRTL` is set to `true`.\n */\nvar splitByCharacterDistance = (str, dist, isRTL) => {\n  if (isRTL) {\n    var at = str.length - dist;\n    return [str.slice(at, str.length), str.slice(0, at)];\n  }\n  return [str.slice(0, dist), str.slice(dist)];\n};\n/**\n * Check if a character is a word character. The `remaining` argument is used\n * because sometimes you must read subsequent characters to truly determine it.\n */\nvar isWordCharacter = function isWordCharacter(char, remaining) {\n  var isRTL = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  if (SPACE.test(char)) {\n    return false;\n  }\n  // Chameleons count as word characters as long as they're in a word, so\n  // recurse to see if the next one is a word character or not.\n  if (CHAMELEON.test(char)) {\n    var charDist = getCharacterDistance(remaining, isRTL);\n    var [nextChar, nextRemaining] = splitByCharacterDistance(remaining, charDist, isRTL);\n    if (isWordCharacter(nextChar, nextRemaining, isRTL)) {\n      return true;\n    }\n  }\n  if (PUNCTUATION.test(char)) {\n    return false;\n  }\n  return true;\n};\n/**\n * Iterate on codepoints from right to left.\n */\nvar codepointsIteratorRTL = function* codepointsIteratorRTL(str) {\n  var end = str.length - 1;\n  for (var i = 0; i < str.length; i++) {\n    var char1 = str.charAt(end - i);\n    if (isLowSurrogate(char1.charCodeAt(0))) {\n      var char2 = str.charAt(end - i - 1);\n      if (isHighSurrogate(char2.charCodeAt(0))) {\n        yield char2 + char1;\n        i++;\n        continue;\n      }\n    }\n    yield char1;\n  }\n};\n/**\n * Is `charCode` a high surrogate.\n *\n * https://en.wikipedia.org/wiki/Universal_Character_Set_characters#Surrogates\n */\nvar isHighSurrogate = charCode => {\n  return charCode >= 0xd800 && charCode <= 0xdbff;\n};\n/**\n * Is `charCode` a low surrogate.\n *\n * https://en.wikipedia.org/wiki/Universal_Character_Set_characters#Surrogates\n */\nvar isLowSurrogate = charCode => {\n  return charCode >= 0xdc00 && charCode <= 0xdfff;\n};\nvar CodepointType;\n(function (CodepointType) {\n  CodepointType[CodepointType[\"None\"] = 0] = \"None\";\n  CodepointType[CodepointType[\"Extend\"] = 1] = \"Extend\";\n  CodepointType[CodepointType[\"ZWJ\"] = 2] = \"ZWJ\";\n  CodepointType[CodepointType[\"RI\"] = 4] = \"RI\";\n  CodepointType[CodepointType[\"Prepend\"] = 8] = \"Prepend\";\n  CodepointType[CodepointType[\"SpacingMark\"] = 16] = \"SpacingMark\";\n  CodepointType[CodepointType[\"L\"] = 32] = \"L\";\n  CodepointType[CodepointType[\"V\"] = 64] = \"V\";\n  CodepointType[CodepointType[\"T\"] = 128] = \"T\";\n  CodepointType[CodepointType[\"LV\"] = 256] = \"LV\";\n  CodepointType[CodepointType[\"LVT\"] = 512] = \"LVT\";\n  CodepointType[CodepointType[\"ExtPict\"] = 1024] = \"ExtPict\";\n  CodepointType[CodepointType[\"Any\"] = 2048] = \"Any\";\n})(CodepointType || (CodepointType = {}));\nvar reExtend = /^(?:[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u07FD\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u0898-\\u089F\\u08CA-\\u08E1\\u08E3-\\u0902\\u093A\\u093C\\u0941-\\u0948\\u094D\\u0951-\\u0957\\u0962\\u0963\\u0981\\u09BC\\u09BE\\u09C1-\\u09C4\\u09CD\\u09D7\\u09E2\\u09E3\\u09FE\\u0A01\\u0A02\\u0A3C\\u0A41\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81\\u0A82\\u0ABC\\u0AC1-\\u0AC5\\u0AC7\\u0AC8\\u0ACD\\u0AE2\\u0AE3\\u0AFA-\\u0AFF\\u0B01\\u0B3C\\u0B3E\\u0B3F\\u0B41-\\u0B44\\u0B4D\\u0B55-\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE\\u0BC0\\u0BCD\\u0BD7\\u0C00\\u0C04\\u0C3C\\u0C3E-\\u0C40\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81\\u0CBC\\u0CBF\\u0CC2\\u0CC6\\u0CCC\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D00\\u0D01\\u0D3B\\u0D3C\\u0D3E\\u0D41-\\u0D44\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D81\\u0DCA\\u0DCF\\u0DD2-\\u0DD4\\u0DD6\\u0DDF\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EBC\\u0EC8-\\u0ECE\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102D-\\u1030\\u1032-\\u1037\\u1039\\u103A\\u103D\\u103E\\u1058\\u1059\\u105E-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108D\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732\\u1733\\u1752\\u1753\\u1772\\u1773\\u17B4\\u17B5\\u17B7-\\u17BD\\u17C6\\u17C9-\\u17D3\\u17DD\\u180B-\\u180D\\u180F\\u1885\\u1886\\u18A9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193B\\u1A17\\u1A18\\u1A1B\\u1A56\\u1A58-\\u1A5E\\u1A60\\u1A62\\u1A65-\\u1A6C\\u1A73-\\u1A7C\\u1A7F\\u1AB0-\\u1ACE\\u1B00-\\u1B03\\u1B34-\\u1B3A\\u1B3C\\u1B42\\u1B6B-\\u1B73\\u1B80\\u1B81\\u1BA2-\\u1BA5\\u1BA8\\u1BA9\\u1BAB-\\u1BAD\\u1BE6\\u1BE8\\u1BE9\\u1BED\\u1BEF-\\u1BF1\\u1C2C-\\u1C33\\u1C36\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DFF\\u200C\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA825\\uA826\\uA82C\\uA8C4\\uA8C5\\uA8E0-\\uA8F1\\uA8FF\\uA926-\\uA92D\\uA947-\\uA951\\uA980-\\uA982\\uA9B3\\uA9B6-\\uA9B9\\uA9BC\\uA9BD\\uA9E5\\uAA29-\\uAA2E\\uAA31\\uAA32\\uAA35\\uAA36\\uAA43\\uAA4C\\uAA7C\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEC\\uAAED\\uAAF6\\uABE5\\uABE8\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F\\uFF9E\\uFF9F]|\\uD800[\\uDDFD\\uDEE0\\uDF76-\\uDF7A]|\\uD802[\\uDE01-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE0F\\uDE38-\\uDE3A\\uDE3F\\uDEE5\\uDEE6]|\\uD803[\\uDD24-\\uDD27\\uDEAB\\uDEAC\\uDEFD-\\uDEFF\\uDF46-\\uDF50\\uDF82-\\uDF85]|\\uD804[\\uDC01\\uDC38-\\uDC46\\uDC70\\uDC73\\uDC74\\uDC7F-\\uDC81\\uDCB3-\\uDCB6\\uDCB9\\uDCBA\\uDCC2\\uDD00-\\uDD02\\uDD27-\\uDD2B\\uDD2D-\\uDD34\\uDD73\\uDD80\\uDD81\\uDDB6-\\uDDBE\\uDDC9-\\uDDCC\\uDDCF\\uDE2F-\\uDE31\\uDE34\\uDE36\\uDE37\\uDE3E\\uDE41\\uDEDF\\uDEE3-\\uDEEA\\uDF00\\uDF01\\uDF3B\\uDF3C\\uDF3E\\uDF40\\uDF57\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDC38-\\uDC3F\\uDC42-\\uDC44\\uDC46\\uDC5E\\uDCB0\\uDCB3-\\uDCB8\\uDCBA\\uDCBD\\uDCBF\\uDCC0\\uDCC2\\uDCC3\\uDDAF\\uDDB2-\\uDDB5\\uDDBC\\uDDBD\\uDDBF\\uDDC0\\uDDDC\\uDDDD\\uDE33-\\uDE3A\\uDE3D\\uDE3F\\uDE40\\uDEAB\\uDEAD\\uDEB0-\\uDEB5\\uDEB7\\uDF1D-\\uDF1F\\uDF22-\\uDF25\\uDF27-\\uDF2B]|\\uD806[\\uDC2F-\\uDC37\\uDC39\\uDC3A\\uDD30\\uDD3B\\uDD3C\\uDD3E\\uDD43\\uDDD4-\\uDDD7\\uDDDA\\uDDDB\\uDDE0\\uDE01-\\uDE0A\\uDE33-\\uDE38\\uDE3B-\\uDE3E\\uDE47\\uDE51-\\uDE56\\uDE59-\\uDE5B\\uDE8A-\\uDE96\\uDE98\\uDE99]|\\uD807[\\uDC30-\\uDC36\\uDC38-\\uDC3D\\uDC3F\\uDC92-\\uDCA7\\uDCAA-\\uDCB0\\uDCB2\\uDCB3\\uDCB5\\uDCB6\\uDD31-\\uDD36\\uDD3A\\uDD3C\\uDD3D\\uDD3F-\\uDD45\\uDD47\\uDD90\\uDD91\\uDD95\\uDD97\\uDEF3\\uDEF4\\uDF00\\uDF01\\uDF36-\\uDF3A\\uDF40\\uDF42]|\\uD80D[\\uDC40\\uDC47-\\uDC55]|\\uD81A[\\uDEF0-\\uDEF4\\uDF30-\\uDF36]|\\uD81B[\\uDF4F\\uDF8F-\\uDF92\\uDFE4]|\\uD82F[\\uDC9D\\uDC9E]|\\uD833[\\uDF00-\\uDF2D\\uDF30-\\uDF46]|\\uD834[\\uDD65\\uDD67-\\uDD69\\uDD6E-\\uDD72\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD836[\\uDE00-\\uDE36\\uDE3B-\\uDE6C\\uDE75\\uDE84\\uDE9B-\\uDE9F\\uDEA1-\\uDEAF]|\\uD838[\\uDC00-\\uDC06\\uDC08-\\uDC18\\uDC1B-\\uDC21\\uDC23\\uDC24\\uDC26-\\uDC2A\\uDC8F\\uDD30-\\uDD36\\uDEAE\\uDEEC-\\uDEEF]|\\uD839[\\uDCEC-\\uDCEF]|\\uD83A[\\uDCD0-\\uDCD6\\uDD44-\\uDD4A]|\\uD83C[\\uDFFB-\\uDFFF]|\\uDB40[\\uDC20-\\uDC7F\\uDD00-\\uDDEF])$/;\nvar rePrepend = /^(?:[\\u0600-\\u0605\\u06DD\\u070F\\u0890\\u0891\\u08E2\\u0D4E]|\\uD804[\\uDCBD\\uDCCD\\uDDC2\\uDDC3]|\\uD806[\\uDD3F\\uDD41\\uDE3A\\uDE84-\\uDE89]|\\uD807\\uDD46)$/;\nvar reSpacingMark = /^(?:[\\u0903\\u093B\\u093E-\\u0940\\u0949-\\u094C\\u094E\\u094F\\u0982\\u0983\\u09BF\\u09C0\\u09C7\\u09C8\\u09CB\\u09CC\\u0A03\\u0A3E-\\u0A40\\u0A83\\u0ABE-\\u0AC0\\u0AC9\\u0ACB\\u0ACC\\u0B02\\u0B03\\u0B40\\u0B47\\u0B48\\u0B4B\\u0B4C\\u0BBF\\u0BC1\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCC\\u0C01-\\u0C03\\u0C41-\\u0C44\\u0C82\\u0C83\\u0CBE\\u0CC0\\u0CC1\\u0CC3\\u0CC4\\u0CC7\\u0CC8\\u0CCA\\u0CCB\\u0D02\\u0D03\\u0D3F\\u0D40\\u0D46-\\u0D48\\u0D4A-\\u0D4C\\u0D82\\u0D83\\u0DD0\\u0DD1\\u0DD8-\\u0DDE\\u0DF2\\u0DF3\\u0E33\\u0EB3\\u0F3E\\u0F3F\\u0F7F\\u1031\\u103B\\u103C\\u1056\\u1057\\u1084\\u1715\\u1734\\u17B6\\u17BE-\\u17C5\\u17C7\\u17C8\\u1923-\\u1926\\u1929-\\u192B\\u1930\\u1931\\u1933-\\u1938\\u1A19\\u1A1A\\u1A55\\u1A57\\u1A6D-\\u1A72\\u1B04\\u1B3B\\u1B3D-\\u1B41\\u1B43\\u1B44\\u1B82\\u1BA1\\u1BA6\\u1BA7\\u1BAA\\u1BE7\\u1BEA-\\u1BEC\\u1BEE\\u1BF2\\u1BF3\\u1C24-\\u1C2B\\u1C34\\u1C35\\u1CE1\\u1CF7\\uA823\\uA824\\uA827\\uA880\\uA881\\uA8B4-\\uA8C3\\uA952\\uA953\\uA983\\uA9B4\\uA9B5\\uA9BA\\uA9BB\\uA9BE-\\uA9C0\\uAA2F\\uAA30\\uAA33\\uAA34\\uAA4D\\uAAEB\\uAAEE\\uAAEF\\uAAF5\\uABE3\\uABE4\\uABE6\\uABE7\\uABE9\\uABEA\\uABEC]|\\uD804[\\uDC00\\uDC02\\uDC82\\uDCB0-\\uDCB2\\uDCB7\\uDCB8\\uDD2C\\uDD45\\uDD46\\uDD82\\uDDB3-\\uDDB5\\uDDBF\\uDDC0\\uDDCE\\uDE2C-\\uDE2E\\uDE32\\uDE33\\uDE35\\uDEE0-\\uDEE2\\uDF02\\uDF03\\uDF3F\\uDF41-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF62\\uDF63]|\\uD805[\\uDC35-\\uDC37\\uDC40\\uDC41\\uDC45\\uDCB1\\uDCB2\\uDCB9\\uDCBB\\uDCBC\\uDCBE\\uDCC1\\uDDB0\\uDDB1\\uDDB8-\\uDDBB\\uDDBE\\uDE30-\\uDE32\\uDE3B\\uDE3C\\uDE3E\\uDEAC\\uDEAE\\uDEAF\\uDEB6\\uDF26]|\\uD806[\\uDC2C-\\uDC2E\\uDC38\\uDD31-\\uDD35\\uDD37\\uDD38\\uDD3D\\uDD40\\uDD42\\uDDD1-\\uDDD3\\uDDDC-\\uDDDF\\uDDE4\\uDE39\\uDE57\\uDE58\\uDE97]|\\uD807[\\uDC2F\\uDC3E\\uDCA9\\uDCB1\\uDCB4\\uDD8A-\\uDD8E\\uDD93\\uDD94\\uDD96\\uDEF5\\uDEF6]|\\uD81B[\\uDF51-\\uDF87\\uDFF0\\uDFF1]|\\uD834[\\uDD66\\uDD6D])$/;\nvar reL = /^[\\u1100-\\u115F\\uA960-\\uA97C]$/;\nvar reV = /^[\\u1160-\\u11A7\\uD7B0-\\uD7C6]$/;\nvar reT = /^[\\u11A8-\\u11FF\\uD7CB-\\uD7FB]$/;\nvar reLV = /^[\\uAC00\\uAC1C\\uAC38\\uAC54\\uAC70\\uAC8C\\uACA8\\uACC4\\uACE0\\uACFC\\uAD18\\uAD34\\uAD50\\uAD6C\\uAD88\\uADA4\\uADC0\\uADDC\\uADF8\\uAE14\\uAE30\\uAE4C\\uAE68\\uAE84\\uAEA0\\uAEBC\\uAED8\\uAEF4\\uAF10\\uAF2C\\uAF48\\uAF64\\uAF80\\uAF9C\\uAFB8\\uAFD4\\uAFF0\\uB00C\\uB028\\uB044\\uB060\\uB07C\\uB098\\uB0B4\\uB0D0\\uB0EC\\uB108\\uB124\\uB140\\uB15C\\uB178\\uB194\\uB1B0\\uB1CC\\uB1E8\\uB204\\uB220\\uB23C\\uB258\\uB274\\uB290\\uB2AC\\uB2C8\\uB2E4\\uB300\\uB31C\\uB338\\uB354\\uB370\\uB38C\\uB3A8\\uB3C4\\uB3E0\\uB3FC\\uB418\\uB434\\uB450\\uB46C\\uB488\\uB4A4\\uB4C0\\uB4DC\\uB4F8\\uB514\\uB530\\uB54C\\uB568\\uB584\\uB5A0\\uB5BC\\uB5D8\\uB5F4\\uB610\\uB62C\\uB648\\uB664\\uB680\\uB69C\\uB6B8\\uB6D4\\uB6F0\\uB70C\\uB728\\uB744\\uB760\\uB77C\\uB798\\uB7B4\\uB7D0\\uB7EC\\uB808\\uB824\\uB840\\uB85C\\uB878\\uB894\\uB8B0\\uB8CC\\uB8E8\\uB904\\uB920\\uB93C\\uB958\\uB974\\uB990\\uB9AC\\uB9C8\\uB9E4\\uBA00\\uBA1C\\uBA38\\uBA54\\uBA70\\uBA8C\\uBAA8\\uBAC4\\uBAE0\\uBAFC\\uBB18\\uBB34\\uBB50\\uBB6C\\uBB88\\uBBA4\\uBBC0\\uBBDC\\uBBF8\\uBC14\\uBC30\\uBC4C\\uBC68\\uBC84\\uBCA0\\uBCBC\\uBCD8\\uBCF4\\uBD10\\uBD2C\\uBD48\\uBD64\\uBD80\\uBD9C\\uBDB8\\uBDD4\\uBDF0\\uBE0C\\uBE28\\uBE44\\uBE60\\uBE7C\\uBE98\\uBEB4\\uBED0\\uBEEC\\uBF08\\uBF24\\uBF40\\uBF5C\\uBF78\\uBF94\\uBFB0\\uBFCC\\uBFE8\\uC004\\uC020\\uC03C\\uC058\\uC074\\uC090\\uC0AC\\uC0C8\\uC0E4\\uC100\\uC11C\\uC138\\uC154\\uC170\\uC18C\\uC1A8\\uC1C4\\uC1E0\\uC1FC\\uC218\\uC234\\uC250\\uC26C\\uC288\\uC2A4\\uC2C0\\uC2DC\\uC2F8\\uC314\\uC330\\uC34C\\uC368\\uC384\\uC3A0\\uC3BC\\uC3D8\\uC3F4\\uC410\\uC42C\\uC448\\uC464\\uC480\\uC49C\\uC4B8\\uC4D4\\uC4F0\\uC50C\\uC528\\uC544\\uC560\\uC57C\\uC598\\uC5B4\\uC5D0\\uC5EC\\uC608\\uC624\\uC640\\uC65C\\uC678\\uC694\\uC6B0\\uC6CC\\uC6E8\\uC704\\uC720\\uC73C\\uC758\\uC774\\uC790\\uC7AC\\uC7C8\\uC7E4\\uC800\\uC81C\\uC838\\uC854\\uC870\\uC88C\\uC8A8\\uC8C4\\uC8E0\\uC8FC\\uC918\\uC934\\uC950\\uC96C\\uC988\\uC9A4\\uC9C0\\uC9DC\\uC9F8\\uCA14\\uCA30\\uCA4C\\uCA68\\uCA84\\uCAA0\\uCABC\\uCAD8\\uCAF4\\uCB10\\uCB2C\\uCB48\\uCB64\\uCB80\\uCB9C\\uCBB8\\uCBD4\\uCBF0\\uCC0C\\uCC28\\uCC44\\uCC60\\uCC7C\\uCC98\\uCCB4\\uCCD0\\uCCEC\\uCD08\\uCD24\\uCD40\\uCD5C\\uCD78\\uCD94\\uCDB0\\uCDCC\\uCDE8\\uCE04\\uCE20\\uCE3C\\uCE58\\uCE74\\uCE90\\uCEAC\\uCEC8\\uCEE4\\uCF00\\uCF1C\\uCF38\\uCF54\\uCF70\\uCF8C\\uCFA8\\uCFC4\\uCFE0\\uCFFC\\uD018\\uD034\\uD050\\uD06C\\uD088\\uD0A4\\uD0C0\\uD0DC\\uD0F8\\uD114\\uD130\\uD14C\\uD168\\uD184\\uD1A0\\uD1BC\\uD1D8\\uD1F4\\uD210\\uD22C\\uD248\\uD264\\uD280\\uD29C\\uD2B8\\uD2D4\\uD2F0\\uD30C\\uD328\\uD344\\uD360\\uD37C\\uD398\\uD3B4\\uD3D0\\uD3EC\\uD408\\uD424\\uD440\\uD45C\\uD478\\uD494\\uD4B0\\uD4CC\\uD4E8\\uD504\\uD520\\uD53C\\uD558\\uD574\\uD590\\uD5AC\\uD5C8\\uD5E4\\uD600\\uD61C\\uD638\\uD654\\uD670\\uD68C\\uD6A8\\uD6C4\\uD6E0\\uD6FC\\uD718\\uD734\\uD750\\uD76C\\uD788]$/;\nvar reLVT = /^[\\uAC01-\\uAC1B\\uAC1D-\\uAC37\\uAC39-\\uAC53\\uAC55-\\uAC6F\\uAC71-\\uAC8B\\uAC8D-\\uACA7\\uACA9-\\uACC3\\uACC5-\\uACDF\\uACE1-\\uACFB\\uACFD-\\uAD17\\uAD19-\\uAD33\\uAD35-\\uAD4F\\uAD51-\\uAD6B\\uAD6D-\\uAD87\\uAD89-\\uADA3\\uADA5-\\uADBF\\uADC1-\\uADDB\\uADDD-\\uADF7\\uADF9-\\uAE13\\uAE15-\\uAE2F\\uAE31-\\uAE4B\\uAE4D-\\uAE67\\uAE69-\\uAE83\\uAE85-\\uAE9F\\uAEA1-\\uAEBB\\uAEBD-\\uAED7\\uAED9-\\uAEF3\\uAEF5-\\uAF0F\\uAF11-\\uAF2B\\uAF2D-\\uAF47\\uAF49-\\uAF63\\uAF65-\\uAF7F\\uAF81-\\uAF9B\\uAF9D-\\uAFB7\\uAFB9-\\uAFD3\\uAFD5-\\uAFEF\\uAFF1-\\uB00B\\uB00D-\\uB027\\uB029-\\uB043\\uB045-\\uB05F\\uB061-\\uB07B\\uB07D-\\uB097\\uB099-\\uB0B3\\uB0B5-\\uB0CF\\uB0D1-\\uB0EB\\uB0ED-\\uB107\\uB109-\\uB123\\uB125-\\uB13F\\uB141-\\uB15B\\uB15D-\\uB177\\uB179-\\uB193\\uB195-\\uB1AF\\uB1B1-\\uB1CB\\uB1CD-\\uB1E7\\uB1E9-\\uB203\\uB205-\\uB21F\\uB221-\\uB23B\\uB23D-\\uB257\\uB259-\\uB273\\uB275-\\uB28F\\uB291-\\uB2AB\\uB2AD-\\uB2C7\\uB2C9-\\uB2E3\\uB2E5-\\uB2FF\\uB301-\\uB31B\\uB31D-\\uB337\\uB339-\\uB353\\uB355-\\uB36F\\uB371-\\uB38B\\uB38D-\\uB3A7\\uB3A9-\\uB3C3\\uB3C5-\\uB3DF\\uB3E1-\\uB3FB\\uB3FD-\\uB417\\uB419-\\uB433\\uB435-\\uB44F\\uB451-\\uB46B\\uB46D-\\uB487\\uB489-\\uB4A3\\uB4A5-\\uB4BF\\uB4C1-\\uB4DB\\uB4DD-\\uB4F7\\uB4F9-\\uB513\\uB515-\\uB52F\\uB531-\\uB54B\\uB54D-\\uB567\\uB569-\\uB583\\uB585-\\uB59F\\uB5A1-\\uB5BB\\uB5BD-\\uB5D7\\uB5D9-\\uB5F3\\uB5F5-\\uB60F\\uB611-\\uB62B\\uB62D-\\uB647\\uB649-\\uB663\\uB665-\\uB67F\\uB681-\\uB69B\\uB69D-\\uB6B7\\uB6B9-\\uB6D3\\uB6D5-\\uB6EF\\uB6F1-\\uB70B\\uB70D-\\uB727\\uB729-\\uB743\\uB745-\\uB75F\\uB761-\\uB77B\\uB77D-\\uB797\\uB799-\\uB7B3\\uB7B5-\\uB7CF\\uB7D1-\\uB7EB\\uB7ED-\\uB807\\uB809-\\uB823\\uB825-\\uB83F\\uB841-\\uB85B\\uB85D-\\uB877\\uB879-\\uB893\\uB895-\\uB8AF\\uB8B1-\\uB8CB\\uB8CD-\\uB8E7\\uB8E9-\\uB903\\uB905-\\uB91F\\uB921-\\uB93B\\uB93D-\\uB957\\uB959-\\uB973\\uB975-\\uB98F\\uB991-\\uB9AB\\uB9AD-\\uB9C7\\uB9C9-\\uB9E3\\uB9E5-\\uB9FF\\uBA01-\\uBA1B\\uBA1D-\\uBA37\\uBA39-\\uBA53\\uBA55-\\uBA6F\\uBA71-\\uBA8B\\uBA8D-\\uBAA7\\uBAA9-\\uBAC3\\uBAC5-\\uBADF\\uBAE1-\\uBAFB\\uBAFD-\\uBB17\\uBB19-\\uBB33\\uBB35-\\uBB4F\\uBB51-\\uBB6B\\uBB6D-\\uBB87\\uBB89-\\uBBA3\\uBBA5-\\uBBBF\\uBBC1-\\uBBDB\\uBBDD-\\uBBF7\\uBBF9-\\uBC13\\uBC15-\\uBC2F\\uBC31-\\uBC4B\\uBC4D-\\uBC67\\uBC69-\\uBC83\\uBC85-\\uBC9F\\uBCA1-\\uBCBB\\uBCBD-\\uBCD7\\uBCD9-\\uBCF3\\uBCF5-\\uBD0F\\uBD11-\\uBD2B\\uBD2D-\\uBD47\\uBD49-\\uBD63\\uBD65-\\uBD7F\\uBD81-\\uBD9B\\uBD9D-\\uBDB7\\uBDB9-\\uBDD3\\uBDD5-\\uBDEF\\uBDF1-\\uBE0B\\uBE0D-\\uBE27\\uBE29-\\uBE43\\uBE45-\\uBE5F\\uBE61-\\uBE7B\\uBE7D-\\uBE97\\uBE99-\\uBEB3\\uBEB5-\\uBECF\\uBED1-\\uBEEB\\uBEED-\\uBF07\\uBF09-\\uBF23\\uBF25-\\uBF3F\\uBF41-\\uBF5B\\uBF5D-\\uBF77\\uBF79-\\uBF93\\uBF95-\\uBFAF\\uBFB1-\\uBFCB\\uBFCD-\\uBFE7\\uBFE9-\\uC003\\uC005-\\uC01F\\uC021-\\uC03B\\uC03D-\\uC057\\uC059-\\uC073\\uC075-\\uC08F\\uC091-\\uC0AB\\uC0AD-\\uC0C7\\uC0C9-\\uC0E3\\uC0E5-\\uC0FF\\uC101-\\uC11B\\uC11D-\\uC137\\uC139-\\uC153\\uC155-\\uC16F\\uC171-\\uC18B\\uC18D-\\uC1A7\\uC1A9-\\uC1C3\\uC1C5-\\uC1DF\\uC1E1-\\uC1FB\\uC1FD-\\uC217\\uC219-\\uC233\\uC235-\\uC24F\\uC251-\\uC26B\\uC26D-\\uC287\\uC289-\\uC2A3\\uC2A5-\\uC2BF\\uC2C1-\\uC2DB\\uC2DD-\\uC2F7\\uC2F9-\\uC313\\uC315-\\uC32F\\uC331-\\uC34B\\uC34D-\\uC367\\uC369-\\uC383\\uC385-\\uC39F\\uC3A1-\\uC3BB\\uC3BD-\\uC3D7\\uC3D9-\\uC3F3\\uC3F5-\\uC40F\\uC411-\\uC42B\\uC42D-\\uC447\\uC449-\\uC463\\uC465-\\uC47F\\uC481-\\uC49B\\uC49D-\\uC4B7\\uC4B9-\\uC4D3\\uC4D5-\\uC4EF\\uC4F1-\\uC50B\\uC50D-\\uC527\\uC529-\\uC543\\uC545-\\uC55F\\uC561-\\uC57B\\uC57D-\\uC597\\uC599-\\uC5B3\\uC5B5-\\uC5CF\\uC5D1-\\uC5EB\\uC5ED-\\uC607\\uC609-\\uC623\\uC625-\\uC63F\\uC641-\\uC65B\\uC65D-\\uC677\\uC679-\\uC693\\uC695-\\uC6AF\\uC6B1-\\uC6CB\\uC6CD-\\uC6E7\\uC6E9-\\uC703\\uC705-\\uC71F\\uC721-\\uC73B\\uC73D-\\uC757\\uC759-\\uC773\\uC775-\\uC78F\\uC791-\\uC7AB\\uC7AD-\\uC7C7\\uC7C9-\\uC7E3\\uC7E5-\\uC7FF\\uC801-\\uC81B\\uC81D-\\uC837\\uC839-\\uC853\\uC855-\\uC86F\\uC871-\\uC88B\\uC88D-\\uC8A7\\uC8A9-\\uC8C3\\uC8C5-\\uC8DF\\uC8E1-\\uC8FB\\uC8FD-\\uC917\\uC919-\\uC933\\uC935-\\uC94F\\uC951-\\uC96B\\uC96D-\\uC987\\uC989-\\uC9A3\\uC9A5-\\uC9BF\\uC9C1-\\uC9DB\\uC9DD-\\uC9F7\\uC9F9-\\uCA13\\uCA15-\\uCA2F\\uCA31-\\uCA4B\\uCA4D-\\uCA67\\uCA69-\\uCA83\\uCA85-\\uCA9F\\uCAA1-\\uCABB\\uCABD-\\uCAD7\\uCAD9-\\uCAF3\\uCAF5-\\uCB0F\\uCB11-\\uCB2B\\uCB2D-\\uCB47\\uCB49-\\uCB63\\uCB65-\\uCB7F\\uCB81-\\uCB9B\\uCB9D-\\uCBB7\\uCBB9-\\uCBD3\\uCBD5-\\uCBEF\\uCBF1-\\uCC0B\\uCC0D-\\uCC27\\uCC29-\\uCC43\\uCC45-\\uCC5F\\uCC61-\\uCC7B\\uCC7D-\\uCC97\\uCC99-\\uCCB3\\uCCB5-\\uCCCF\\uCCD1-\\uCCEB\\uCCED-\\uCD07\\uCD09-\\uCD23\\uCD25-\\uCD3F\\uCD41-\\uCD5B\\uCD5D-\\uCD77\\uCD79-\\uCD93\\uCD95-\\uCDAF\\uCDB1-\\uCDCB\\uCDCD-\\uCDE7\\uCDE9-\\uCE03\\uCE05-\\uCE1F\\uCE21-\\uCE3B\\uCE3D-\\uCE57\\uCE59-\\uCE73\\uCE75-\\uCE8F\\uCE91-\\uCEAB\\uCEAD-\\uCEC7\\uCEC9-\\uCEE3\\uCEE5-\\uCEFF\\uCF01-\\uCF1B\\uCF1D-\\uCF37\\uCF39-\\uCF53\\uCF55-\\uCF6F\\uCF71-\\uCF8B\\uCF8D-\\uCFA7\\uCFA9-\\uCFC3\\uCFC5-\\uCFDF\\uCFE1-\\uCFFB\\uCFFD-\\uD017\\uD019-\\uD033\\uD035-\\uD04F\\uD051-\\uD06B\\uD06D-\\uD087\\uD089-\\uD0A3\\uD0A5-\\uD0BF\\uD0C1-\\uD0DB\\uD0DD-\\uD0F7\\uD0F9-\\uD113\\uD115-\\uD12F\\uD131-\\uD14B\\uD14D-\\uD167\\uD169-\\uD183\\uD185-\\uD19F\\uD1A1-\\uD1BB\\uD1BD-\\uD1D7\\uD1D9-\\uD1F3\\uD1F5-\\uD20F\\uD211-\\uD22B\\uD22D-\\uD247\\uD249-\\uD263\\uD265-\\uD27F\\uD281-\\uD29B\\uD29D-\\uD2B7\\uD2B9-\\uD2D3\\uD2D5-\\uD2EF\\uD2F1-\\uD30B\\uD30D-\\uD327\\uD329-\\uD343\\uD345-\\uD35F\\uD361-\\uD37B\\uD37D-\\uD397\\uD399-\\uD3B3\\uD3B5-\\uD3CF\\uD3D1-\\uD3EB\\uD3ED-\\uD407\\uD409-\\uD423\\uD425-\\uD43F\\uD441-\\uD45B\\uD45D-\\uD477\\uD479-\\uD493\\uD495-\\uD4AF\\uD4B1-\\uD4CB\\uD4CD-\\uD4E7\\uD4E9-\\uD503\\uD505-\\uD51F\\uD521-\\uD53B\\uD53D-\\uD557\\uD559-\\uD573\\uD575-\\uD58F\\uD591-\\uD5AB\\uD5AD-\\uD5C7\\uD5C9-\\uD5E3\\uD5E5-\\uD5FF\\uD601-\\uD61B\\uD61D-\\uD637\\uD639-\\uD653\\uD655-\\uD66F\\uD671-\\uD68B\\uD68D-\\uD6A7\\uD6A9-\\uD6C3\\uD6C5-\\uD6DF\\uD6E1-\\uD6FB\\uD6FD-\\uD717\\uD719-\\uD733\\uD735-\\uD74F\\uD751-\\uD76B\\uD76D-\\uD787\\uD789-\\uD7A3]$/;\nvar reExtPict = /^(?:[\\xA9\\xAE\\u203C\\u2049\\u2122\\u2139\\u2194-\\u2199\\u21A9\\u21AA\\u231A\\u231B\\u2328\\u2388\\u23CF\\u23E9-\\u23F3\\u23F8-\\u23FA\\u24C2\\u25AA\\u25AB\\u25B6\\u25C0\\u25FB-\\u25FE\\u2600-\\u2605\\u2607-\\u2612\\u2614-\\u2685\\u2690-\\u2705\\u2708-\\u2712\\u2714\\u2716\\u271D\\u2721\\u2728\\u2733\\u2734\\u2744\\u2747\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2763-\\u2767\\u2795-\\u2797\\u27A1\\u27B0\\u27BF\\u2934\\u2935\\u2B05-\\u2B07\\u2B1B\\u2B1C\\u2B50\\u2B55\\u3030\\u303D\\u3297\\u3299]|\\uD83C[\\uDC00-\\uDCFF\\uDD0D-\\uDD0F\\uDD2F\\uDD6C-\\uDD71\\uDD7E\\uDD7F\\uDD8E\\uDD91-\\uDD9A\\uDDAD-\\uDDE5\\uDE01-\\uDE0F\\uDE1A\\uDE2F\\uDE32-\\uDE3A\\uDE3C-\\uDE3F\\uDE49-\\uDFFA]|\\uD83D[\\uDC00-\\uDD3D\\uDD46-\\uDE4F\\uDE80-\\uDEFF\\uDF74-\\uDF7F\\uDFD5-\\uDFFF]|\\uD83E[\\uDC0C-\\uDC0F\\uDC48-\\uDC4F\\uDC5A-\\uDC5F\\uDC88-\\uDC8F\\uDCAE-\\uDCFF\\uDD0C-\\uDD3A\\uDD3C-\\uDD45\\uDD47-\\uDEFF]|\\uD83F[\\uDC00-\\uDFFD])$/;\nvar getCodepointType = (char, code) => {\n  var type = CodepointType.Any;\n  if (char.search(reExtend) !== -1) {\n    type |= CodepointType.Extend;\n  }\n  if (code === 0x200d) {\n    type |= CodepointType.ZWJ;\n  }\n  if (code >= 0x1f1e6 && code <= 0x1f1ff) {\n    type |= CodepointType.RI;\n  }\n  if (char.search(rePrepend) !== -1) {\n    type |= CodepointType.Prepend;\n  }\n  if (char.search(reSpacingMark) !== -1) {\n    type |= CodepointType.SpacingMark;\n  }\n  if (char.search(reL) !== -1) {\n    type |= CodepointType.L;\n  }\n  if (char.search(reV) !== -1) {\n    type |= CodepointType.V;\n  }\n  if (char.search(reT) !== -1) {\n    type |= CodepointType.T;\n  }\n  if (char.search(reLV) !== -1) {\n    type |= CodepointType.LV;\n  }\n  if (char.search(reLVT) !== -1) {\n    type |= CodepointType.LVT;\n  }\n  if (char.search(reExtPict) !== -1) {\n    type |= CodepointType.ExtPict;\n  }\n  return type;\n};\nfunction intersects(x, y) {\n  return (x & y) !== 0;\n}\nvar NonBoundaryPairs = [\n// GB6\n[CodepointType.L, CodepointType.L | CodepointType.V | CodepointType.LV | CodepointType.LVT],\n// GB7\n[CodepointType.LV | CodepointType.V, CodepointType.V | CodepointType.T],\n// GB8\n[CodepointType.LVT | CodepointType.T, CodepointType.T],\n// GB9\n[CodepointType.Any, CodepointType.Extend | CodepointType.ZWJ],\n// GB9a\n[CodepointType.Any, CodepointType.SpacingMark],\n// GB9b\n[CodepointType.Prepend, CodepointType.Any],\n// GB11\n[CodepointType.ZWJ, CodepointType.ExtPict],\n// GB12 and GB13\n[CodepointType.RI, CodepointType.RI]];\nfunction isBoundaryPair(left, right) {\n  return NonBoundaryPairs.findIndex(r => intersects(left, r[0]) && intersects(right, r[1])) === -1;\n}\nvar endingEmojiZWJ = /(?:[\\xA9\\xAE\\u203C\\u2049\\u2122\\u2139\\u2194-\\u2199\\u21A9\\u21AA\\u231A\\u231B\\u2328\\u2388\\u23CF\\u23E9-\\u23F3\\u23F8-\\u23FA\\u24C2\\u25AA\\u25AB\\u25B6\\u25C0\\u25FB-\\u25FE\\u2600-\\u2605\\u2607-\\u2612\\u2614-\\u2685\\u2690-\\u2705\\u2708-\\u2712\\u2714\\u2716\\u271D\\u2721\\u2728\\u2733\\u2734\\u2744\\u2747\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2763-\\u2767\\u2795-\\u2797\\u27A1\\u27B0\\u27BF\\u2934\\u2935\\u2B05-\\u2B07\\u2B1B\\u2B1C\\u2B50\\u2B55\\u3030\\u303D\\u3297\\u3299]|\\uD83C[\\uDC00-\\uDCFF\\uDD0D-\\uDD0F\\uDD2F\\uDD6C-\\uDD71\\uDD7E\\uDD7F\\uDD8E\\uDD91-\\uDD9A\\uDDAD-\\uDDE5\\uDE01-\\uDE0F\\uDE1A\\uDE2F\\uDE32-\\uDE3A\\uDE3C-\\uDE3F\\uDE49-\\uDFFA]|\\uD83D[\\uDC00-\\uDD3D\\uDD46-\\uDE4F\\uDE80-\\uDEFF\\uDF74-\\uDF7F\\uDFD5-\\uDFFF]|\\uD83E[\\uDC0C-\\uDC0F\\uDC48-\\uDC4F\\uDC5A-\\uDC5F\\uDC88-\\uDC8F\\uDCAE-\\uDCFF\\uDD0C-\\uDD3A\\uDD3C-\\uDD45\\uDD47-\\uDEFF]|\\uD83F[\\uDC00-\\uDFFD])(?:[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u07FD\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u0898-\\u089F\\u08CA-\\u08E1\\u08E3-\\u0902\\u093A\\u093C\\u0941-\\u0948\\u094D\\u0951-\\u0957\\u0962\\u0963\\u0981\\u09BC\\u09BE\\u09C1-\\u09C4\\u09CD\\u09D7\\u09E2\\u09E3\\u09FE\\u0A01\\u0A02\\u0A3C\\u0A41\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81\\u0A82\\u0ABC\\u0AC1-\\u0AC5\\u0AC7\\u0AC8\\u0ACD\\u0AE2\\u0AE3\\u0AFA-\\u0AFF\\u0B01\\u0B3C\\u0B3E\\u0B3F\\u0B41-\\u0B44\\u0B4D\\u0B55-\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE\\u0BC0\\u0BCD\\u0BD7\\u0C00\\u0C04\\u0C3C\\u0C3E-\\u0C40\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81\\u0CBC\\u0CBF\\u0CC2\\u0CC6\\u0CCC\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D00\\u0D01\\u0D3B\\u0D3C\\u0D3E\\u0D41-\\u0D44\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D81\\u0DCA\\u0DCF\\u0DD2-\\u0DD4\\u0DD6\\u0DDF\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EBC\\u0EC8-\\u0ECE\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102D-\\u1030\\u1032-\\u1037\\u1039\\u103A\\u103D\\u103E\\u1058\\u1059\\u105E-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108D\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732\\u1733\\u1752\\u1753\\u1772\\u1773\\u17B4\\u17B5\\u17B7-\\u17BD\\u17C6\\u17C9-\\u17D3\\u17DD\\u180B-\\u180D\\u180F\\u1885\\u1886\\u18A9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193B\\u1A17\\u1A18\\u1A1B\\u1A56\\u1A58-\\u1A5E\\u1A60\\u1A62\\u1A65-\\u1A6C\\u1A73-\\u1A7C\\u1A7F\\u1AB0-\\u1ACE\\u1B00-\\u1B03\\u1B34-\\u1B3A\\u1B3C\\u1B42\\u1B6B-\\u1B73\\u1B80\\u1B81\\u1BA2-\\u1BA5\\u1BA8\\u1BA9\\u1BAB-\\u1BAD\\u1BE6\\u1BE8\\u1BE9\\u1BED\\u1BEF-\\u1BF1\\u1C2C-\\u1C33\\u1C36\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DFF\\u200C\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA825\\uA826\\uA82C\\uA8C4\\uA8C5\\uA8E0-\\uA8F1\\uA8FF\\uA926-\\uA92D\\uA947-\\uA951\\uA980-\\uA982\\uA9B3\\uA9B6-\\uA9B9\\uA9BC\\uA9BD\\uA9E5\\uAA29-\\uAA2E\\uAA31\\uAA32\\uAA35\\uAA36\\uAA43\\uAA4C\\uAA7C\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEC\\uAAED\\uAAF6\\uABE5\\uABE8\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F\\uFF9E\\uFF9F]|\\uD800[\\uDDFD\\uDEE0\\uDF76-\\uDF7A]|\\uD802[\\uDE01-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE0F\\uDE38-\\uDE3A\\uDE3F\\uDEE5\\uDEE6]|\\uD803[\\uDD24-\\uDD27\\uDEAB\\uDEAC\\uDEFD-\\uDEFF\\uDF46-\\uDF50\\uDF82-\\uDF85]|\\uD804[\\uDC01\\uDC38-\\uDC46\\uDC70\\uDC73\\uDC74\\uDC7F-\\uDC81\\uDCB3-\\uDCB6\\uDCB9\\uDCBA\\uDCC2\\uDD00-\\uDD02\\uDD27-\\uDD2B\\uDD2D-\\uDD34\\uDD73\\uDD80\\uDD81\\uDDB6-\\uDDBE\\uDDC9-\\uDDCC\\uDDCF\\uDE2F-\\uDE31\\uDE34\\uDE36\\uDE37\\uDE3E\\uDE41\\uDEDF\\uDEE3-\\uDEEA\\uDF00\\uDF01\\uDF3B\\uDF3C\\uDF3E\\uDF40\\uDF57\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDC38-\\uDC3F\\uDC42-\\uDC44\\uDC46\\uDC5E\\uDCB0\\uDCB3-\\uDCB8\\uDCBA\\uDCBD\\uDCBF\\uDCC0\\uDCC2\\uDCC3\\uDDAF\\uDDB2-\\uDDB5\\uDDBC\\uDDBD\\uDDBF\\uDDC0\\uDDDC\\uDDDD\\uDE33-\\uDE3A\\uDE3D\\uDE3F\\uDE40\\uDEAB\\uDEAD\\uDEB0-\\uDEB5\\uDEB7\\uDF1D-\\uDF1F\\uDF22-\\uDF25\\uDF27-\\uDF2B]|\\uD806[\\uDC2F-\\uDC37\\uDC39\\uDC3A\\uDD30\\uDD3B\\uDD3C\\uDD3E\\uDD43\\uDDD4-\\uDDD7\\uDDDA\\uDDDB\\uDDE0\\uDE01-\\uDE0A\\uDE33-\\uDE38\\uDE3B-\\uDE3E\\uDE47\\uDE51-\\uDE56\\uDE59-\\uDE5B\\uDE8A-\\uDE96\\uDE98\\uDE99]|\\uD807[\\uDC30-\\uDC36\\uDC38-\\uDC3D\\uDC3F\\uDC92-\\uDCA7\\uDCAA-\\uDCB0\\uDCB2\\uDCB3\\uDCB5\\uDCB6\\uDD31-\\uDD36\\uDD3A\\uDD3C\\uDD3D\\uDD3F-\\uDD45\\uDD47\\uDD90\\uDD91\\uDD95\\uDD97\\uDEF3\\uDEF4\\uDF00\\uDF01\\uDF36-\\uDF3A\\uDF40\\uDF42]|\\uD80D[\\uDC40\\uDC47-\\uDC55]|\\uD81A[\\uDEF0-\\uDEF4\\uDF30-\\uDF36]|\\uD81B[\\uDF4F\\uDF8F-\\uDF92\\uDFE4]|\\uD82F[\\uDC9D\\uDC9E]|\\uD833[\\uDF00-\\uDF2D\\uDF30-\\uDF46]|\\uD834[\\uDD65\\uDD67-\\uDD69\\uDD6E-\\uDD72\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD836[\\uDE00-\\uDE36\\uDE3B-\\uDE6C\\uDE75\\uDE84\\uDE9B-\\uDE9F\\uDEA1-\\uDEAF]|\\uD838[\\uDC00-\\uDC06\\uDC08-\\uDC18\\uDC1B-\\uDC21\\uDC23\\uDC24\\uDC26-\\uDC2A\\uDC8F\\uDD30-\\uDD36\\uDEAE\\uDEEC-\\uDEEF]|\\uD839[\\uDCEC-\\uDCEF]|\\uD83A[\\uDCD0-\\uDCD6\\uDD44-\\uDD4A]|\\uD83C[\\uDFFB-\\uDFFF]|\\uDB40[\\uDC20-\\uDC7F\\uDD00-\\uDDEF])*\\u200D$/;\nvar endsWithEmojiZWJ = str => {\n  return str.search(endingEmojiZWJ) !== -1;\n};\nvar endingRIs = /(?:\\uD83C[\\uDDE6-\\uDDFF])+$/g;\nvar endsWithOddNumberOfRIs = str => {\n  var match = str.match(endingRIs);\n  if (match === null) {\n    return false;\n  } else {\n    // A RI is represented by a surrogate pair.\n    var numRIs = match[0].length / 2;\n    return numRIs % 2 === 1;\n  }\n};\n\n// eslint-disable-next-line no-redeclare\nvar TextTransforms = {\n  delete(editor, options) {\n    editor.delete(options);\n  },\n  insertFragment(editor, fragment, options) {\n    editor.insertFragment(fragment, options);\n  },\n  insertText(editor, text) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    Editor.withoutNormalizing(editor, () => {\n      var {\n        voids = false\n      } = options;\n      var {\n        at = getDefaultInsertLocation(editor)\n      } = options;\n      if (Path.isPath(at)) {\n        at = Editor.range(editor, at);\n      }\n      if (Range.isRange(at)) {\n        if (Range.isCollapsed(at)) {\n          at = at.anchor;\n        } else {\n          var end = Range.end(at);\n          if (!voids && Editor.void(editor, {\n            at: end\n          })) {\n            return;\n          }\n          var start = Range.start(at);\n          var startRef = Editor.pointRef(editor, start);\n          var endRef = Editor.pointRef(editor, end);\n          Transforms.delete(editor, {\n            at,\n            voids\n          });\n          var startPoint = startRef.unref();\n          var endPoint = endRef.unref();\n          at = startPoint || endPoint;\n          Transforms.setSelection(editor, {\n            anchor: at,\n            focus: at\n          });\n        }\n      }\n      if (!voids && Editor.void(editor, {\n        at\n      }) || Editor.elementReadOnly(editor, {\n        at\n      })) {\n        return;\n      }\n      var {\n        path,\n        offset\n      } = at;\n      if (text.length > 0) editor.apply({\n        type: 'insert_text',\n        path,\n        offset,\n        text\n      });\n    });\n  }\n};\n\nfunction ownKeys$9(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$9(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$9(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$9(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar Transforms = _objectSpread$9(_objectSpread$9(_objectSpread$9(_objectSpread$9({}, GeneralTransforms), NodeTransforms), SelectionTransforms), TextTransforms);\n\n// perf\nvar BATCHING_DIRTY_PATHS = new WeakMap();\nvar isBatchingDirtyPaths = editor => {\n  return BATCHING_DIRTY_PATHS.get(editor) || false;\n};\nvar batchDirtyPaths = (editor, fn, update) => {\n  var value = BATCHING_DIRTY_PATHS.get(editor) || false;\n  BATCHING_DIRTY_PATHS.set(editor, true);\n  try {\n    fn();\n    update();\n  } finally {\n    BATCHING_DIRTY_PATHS.set(editor, value);\n  }\n};\n\n/**\n * update editor dirty paths\n *\n * @param newDirtyPaths: Path[]; new dirty paths\n * @param transform: (p: Path) => Path | null; how to transform existing dirty paths\n */\nfunction updateDirtyPaths(editor, newDirtyPaths, transform) {\n  var oldDirtyPaths = DIRTY_PATHS.get(editor) || [];\n  var oldDirtyPathKeys = DIRTY_PATH_KEYS.get(editor) || new Set();\n  var dirtyPaths;\n  var dirtyPathKeys;\n  var add = path => {\n    if (path) {\n      var key = path.join(',');\n      if (!dirtyPathKeys.has(key)) {\n        dirtyPathKeys.add(key);\n        dirtyPaths.push(path);\n      }\n    }\n  };\n  if (transform) {\n    dirtyPaths = [];\n    dirtyPathKeys = new Set();\n    for (var path of oldDirtyPaths) {\n      var newPath = transform(path);\n      add(newPath);\n    }\n  } else {\n    dirtyPaths = oldDirtyPaths;\n    dirtyPathKeys = oldDirtyPathKeys;\n  }\n  for (var _path of newDirtyPaths) {\n    add(_path);\n  }\n  DIRTY_PATHS.set(editor, dirtyPaths);\n  DIRTY_PATH_KEYS.set(editor, dirtyPathKeys);\n}\n\nvar apply = (editor, op) => {\n  for (var ref of Editor.pathRefs(editor)) {\n    PathRef.transform(ref, op);\n  }\n  for (var _ref of Editor.pointRefs(editor)) {\n    PointRef.transform(_ref, op);\n  }\n  for (var _ref2 of Editor.rangeRefs(editor)) {\n    RangeRef.transform(_ref2, op);\n  }\n  // update dirty paths\n  if (!isBatchingDirtyPaths(editor)) {\n    var transform = Path.operationCanTransformPath(op) ? p => Path.transform(p, op) : undefined;\n    updateDirtyPaths(editor, editor.getDirtyPaths(op), transform);\n  }\n  Transforms.transform(editor, op);\n  editor.operations.push(op);\n  Editor.normalize(editor, {\n    operation: op\n  });\n  // Clear any formats applied to the cursor if the selection changes.\n  if (op.type === 'set_selection') {\n    editor.marks = null;\n  }\n  if (!FLUSHING.get(editor)) {\n    FLUSHING.set(editor, true);\n    Promise.resolve().then(() => {\n      FLUSHING.set(editor, false);\n      editor.onChange({\n        operation: op\n      });\n      editor.operations = [];\n    });\n  }\n};\n\n/**\n * Get the \"dirty\" paths generated from an operation.\n */\nvar getDirtyPaths = (editor, op) => {\n  switch (op.type) {\n    case 'insert_text':\n    case 'remove_text':\n    case 'set_node':\n      {\n        var {\n          path\n        } = op;\n        return Path.levels(path);\n      }\n    case 'insert_node':\n      {\n        var {\n          node,\n          path: _path\n        } = op;\n        var levels = Path.levels(_path);\n        var descendants = Text.isText(node) ? [] : Array.from(Node.nodes(node), _ref => {\n          var [, p] = _ref;\n          return _path.concat(p);\n        });\n        return [...levels, ...descendants];\n      }\n    case 'merge_node':\n      {\n        var {\n          path: _path2\n        } = op;\n        var ancestors = Path.ancestors(_path2);\n        var previousPath = Path.previous(_path2);\n        return [...ancestors, previousPath];\n      }\n    case 'move_node':\n      {\n        var {\n          path: _path3,\n          newPath\n        } = op;\n        if (Path.equals(_path3, newPath)) {\n          return [];\n        }\n        var oldAncestors = [];\n        var newAncestors = [];\n        for (var ancestor of Path.ancestors(_path3)) {\n          var p = Path.transform(ancestor, op);\n          oldAncestors.push(p);\n        }\n        for (var _ancestor of Path.ancestors(newPath)) {\n          var _p = Path.transform(_ancestor, op);\n          newAncestors.push(_p);\n        }\n        var newParent = newAncestors[newAncestors.length - 1];\n        var newIndex = newPath[newPath.length - 1];\n        var resultPath = newParent.concat(newIndex);\n        return [...oldAncestors, ...newAncestors, resultPath];\n      }\n    case 'remove_node':\n      {\n        var {\n          path: _path4\n        } = op;\n        var _ancestors = Path.ancestors(_path4);\n        return [..._ancestors];\n      }\n    case 'split_node':\n      {\n        var {\n          path: _path5\n        } = op;\n        var _levels = Path.levels(_path5);\n        var nextPath = Path.next(_path5);\n        return [..._levels, nextPath];\n      }\n    default:\n      {\n        return [];\n      }\n  }\n};\n\nvar getFragment = editor => {\n  var {\n    selection\n  } = editor;\n  if (selection) {\n    return Node.fragment(editor, selection);\n  }\n  return [];\n};\n\nvar normalizeNode = (editor, entry) => {\n  var [node, path] = entry;\n  // There are no core normalizations for text nodes.\n  if (Text.isText(node)) {\n    return;\n  }\n  // Ensure that block and inline nodes have at least one text child.\n  if (Element.isElement(node) && node.children.length === 0) {\n    var child = {\n      text: ''\n    };\n    Transforms.insertNodes(editor, child, {\n      at: path.concat(0),\n      voids: true\n    });\n    return;\n  }\n  // Determine whether the node should have block or inline children.\n  var shouldHaveInlines = Editor.isEditor(node) ? false : Element.isElement(node) && (editor.isInline(node) || node.children.length === 0 || Text.isText(node.children[0]) || editor.isInline(node.children[0]));\n  // Since we'll be applying operations while iterating, keep track of an\n  // index that accounts for any added/removed nodes.\n  var n = 0;\n  for (var i = 0; i < node.children.length; i++, n++) {\n    var currentNode = Node.get(editor, path);\n    if (Text.isText(currentNode)) continue;\n    var _child = currentNode.children[n];\n    var prev = currentNode.children[n - 1];\n    var isLast = i === node.children.length - 1;\n    var isInlineOrText = Text.isText(_child) || Element.isElement(_child) && editor.isInline(_child);\n    // Only allow block nodes in the top-level children and parent blocks\n    // that only contain block nodes. Similarly, only allow inline nodes in\n    // other inline nodes, or parent blocks that only contain inlines and\n    // text.\n    if (isInlineOrText !== shouldHaveInlines) {\n      Transforms.removeNodes(editor, {\n        at: path.concat(n),\n        voids: true\n      });\n      n--;\n    } else if (Element.isElement(_child)) {\n      // Ensure that inline nodes are surrounded by text nodes.\n      if (editor.isInline(_child)) {\n        if (prev == null || !Text.isText(prev)) {\n          var newChild = {\n            text: ''\n          };\n          Transforms.insertNodes(editor, newChild, {\n            at: path.concat(n),\n            voids: true\n          });\n          n++;\n        } else if (isLast) {\n          var _newChild = {\n            text: ''\n          };\n          Transforms.insertNodes(editor, _newChild, {\n            at: path.concat(n + 1),\n            voids: true\n          });\n          n++;\n        }\n      }\n    } else {\n      // If the child is not a text node, and doesn't have a `children` field,\n      // then we have an invalid node that will upset slate.\n      //\n      // eg: `{ type: 'some_node' }`.\n      //\n      // To prevent slate from breaking, we can add the `children` field,\n      // and now that it is valid, we can to many more operations easily,\n      // such as extend normalizers to fix erronous structure.\n      if (!Text.isText(_child) && !('children' in _child)) {\n        var elementChild = _child;\n        elementChild.children = [];\n      }\n      // Merge adjacent text nodes that are empty or match.\n      if (prev != null && Text.isText(prev)) {\n        if (Text.equals(_child, prev, {\n          loose: true\n        })) {\n          Transforms.mergeNodes(editor, {\n            at: path.concat(n),\n            voids: true\n          });\n          n--;\n        } else if (prev.text === '') {\n          Transforms.removeNodes(editor, {\n            at: path.concat(n - 1),\n            voids: true\n          });\n          n--;\n        } else if (_child.text === '') {\n          Transforms.removeNodes(editor, {\n            at: path.concat(n),\n            voids: true\n          });\n          n--;\n        }\n      }\n    }\n  }\n};\n\nvar shouldNormalize = (editor, _ref) => {\n  var {\n    iteration,\n    initialDirtyPathsLength\n  } = _ref;\n  var maxIterations = initialDirtyPathsLength * 42; // HACK: better way?\n  if (iteration > maxIterations) {\n    throw new Error(\"Could not completely normalize the editor after \".concat(maxIterations, \" iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\"));\n  }\n  return true;\n};\n\nvar above = function above(editor) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var {\n    voids = false,\n    mode = 'lowest',\n    at = editor.selection,\n    match\n  } = options;\n  if (!at) {\n    return;\n  }\n  var path = Editor.path(editor, at);\n  var reverse = mode === 'lowest';\n  for (var [n, p] of Editor.levels(editor, {\n    at: path,\n    voids,\n    match,\n    reverse\n  })) {\n    if (Text.isText(n)) continue;\n    if (Range.isRange(at)) {\n      if (Path.isAncestor(p, at.anchor.path) && Path.isAncestor(p, at.focus.path)) {\n        return [n, p];\n      }\n    } else {\n      if (!Path.equals(path, p)) {\n        return [n, p];\n      }\n    }\n  }\n};\n\nfunction ownKeys$8(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$8(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$8(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$8(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar addMark = (editor, key, value) => {\n  var {\n    selection\n  } = editor;\n  if (selection) {\n    var match = (node, path) => {\n      if (!Text.isText(node)) {\n        return false; // marks can only be applied to text\n      }\n\n      var [parentNode, parentPath] = Editor.parent(editor, path);\n      return !editor.isVoid(parentNode) || editor.markableVoid(parentNode);\n    };\n    var expandedSelection = Range.isExpanded(selection);\n    var markAcceptingVoidSelected = false;\n    if (!expandedSelection) {\n      var [selectedNode, selectedPath] = Editor.node(editor, selection);\n      if (selectedNode && match(selectedNode, selectedPath)) {\n        var [parentNode] = Editor.parent(editor, selectedPath);\n        markAcceptingVoidSelected = parentNode && editor.markableVoid(parentNode);\n      }\n    }\n    if (expandedSelection || markAcceptingVoidSelected) {\n      Transforms.setNodes(editor, {\n        [key]: value\n      }, {\n        match,\n        split: true,\n        voids: true\n      });\n    } else {\n      var marks = _objectSpread$8(_objectSpread$8({}, Editor.marks(editor) || {}), {}, {\n        [key]: value\n      });\n      editor.marks = marks;\n      if (!FLUSHING.get(editor)) {\n        editor.onChange();\n      }\n    }\n  }\n};\n\nfunction ownKeys$7(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$7(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$7(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$7(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar after = function after(editor, at) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var anchor = Editor.point(editor, at, {\n    edge: 'end'\n  });\n  var focus = Editor.end(editor, []);\n  var range = {\n    anchor,\n    focus\n  };\n  var {\n    distance = 1\n  } = options;\n  var d = 0;\n  var target;\n  for (var p of Editor.positions(editor, _objectSpread$7(_objectSpread$7({}, options), {}, {\n    at: range\n  }))) {\n    if (d > distance) {\n      break;\n    }\n    if (d !== 0) {\n      target = p;\n    }\n    d++;\n  }\n  return target;\n};\n\nfunction ownKeys$6(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$6(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$6(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$6(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar before = function before(editor, at) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var anchor = Editor.start(editor, []);\n  var focus = Editor.point(editor, at, {\n    edge: 'start'\n  });\n  var range = {\n    anchor,\n    focus\n  };\n  var {\n    distance = 1\n  } = options;\n  var d = 0;\n  var target;\n  for (var p of Editor.positions(editor, _objectSpread$6(_objectSpread$6({}, options), {}, {\n    at: range,\n    reverse: true\n  }))) {\n    if (d > distance) {\n      break;\n    }\n    if (d !== 0) {\n      target = p;\n    }\n    d++;\n  }\n  return target;\n};\n\nvar deleteBackward = (editor, unit) => {\n  var {\n    selection\n  } = editor;\n  if (selection && Range.isCollapsed(selection)) {\n    Transforms.delete(editor, {\n      unit,\n      reverse: true\n    });\n  }\n};\n\nvar deleteForward = (editor, unit) => {\n  var {\n    selection\n  } = editor;\n  if (selection && Range.isCollapsed(selection)) {\n    Transforms.delete(editor, {\n      unit\n    });\n  }\n};\n\nvar deleteFragment = function deleteFragment(editor) {\n  var {\n    direction = 'forward'\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var {\n    selection\n  } = editor;\n  if (selection && Range.isExpanded(selection)) {\n    Transforms.delete(editor, {\n      reverse: direction === 'backward'\n    });\n  }\n};\n\nvar edges = (editor, at) => {\n  return [Editor.start(editor, at), Editor.end(editor, at)];\n};\n\nfunction ownKeys$5(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$5(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$5(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$5(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar elementReadOnly = function elementReadOnly(editor) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return Editor.above(editor, _objectSpread$5(_objectSpread$5({}, options), {}, {\n    match: n => Element.isElement(n) && Editor.isElementReadOnly(editor, n)\n  }));\n};\n\nvar end = (editor, at) => {\n  return Editor.point(editor, at, {\n    edge: 'end'\n  });\n};\n\nvar first = (editor, at) => {\n  var path = Editor.path(editor, at, {\n    edge: 'start'\n  });\n  return Editor.node(editor, path);\n};\n\nvar fragment = (editor, at) => {\n  var range = Editor.range(editor, at);\n  return Node.fragment(editor, range);\n};\n\nfunction ownKeys$4(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$4(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$4(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$4(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar getVoid = function getVoid(editor) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return Editor.above(editor, _objectSpread$4(_objectSpread$4({}, options), {}, {\n    match: n => Element.isElement(n) && Editor.isVoid(editor, n)\n  }));\n};\n\nvar hasBlocks = (editor, element) => {\n  return element.children.some(n => Element.isElement(n) && Editor.isBlock(editor, n));\n};\n\nvar hasInlines = (editor, element) => {\n  return element.children.some(n => Text.isText(n) || Editor.isInline(editor, n));\n};\n\nvar hasPath = (editor, path) => {\n  return Node.has(editor, path);\n};\n\nvar hasTexts = (editor, element) => {\n  return element.children.every(n => Text.isText(n));\n};\n\nvar insertBreak = editor => {\n  Transforms.splitNodes(editor, {\n    always: true\n  });\n};\n\nvar insertNode = (editor, node, options) => {\n  Transforms.insertNodes(editor, node, options);\n};\n\nvar insertSoftBreak = editor => {\n  Transforms.splitNodes(editor, {\n    always: true\n  });\n};\n\nfunction ownKeys$3(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$3(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$3(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$3(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar insertText = function insertText(editor, text) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var {\n    selection,\n    marks\n  } = editor;\n  if (selection) {\n    if (marks) {\n      var node = _objectSpread$3({\n        text\n      }, marks);\n      Transforms.insertNodes(editor, node, {\n        at: options.at,\n        voids: options.voids\n      });\n    } else {\n      Transforms.insertText(editor, text, options);\n    }\n    editor.marks = null;\n  }\n};\n\nvar isBlock = (editor, value) => {\n  return !editor.isInline(value);\n};\n\nvar isEdge = (editor, point, at) => {\n  return Editor.isStart(editor, point, at) || Editor.isEnd(editor, point, at);\n};\n\nvar isEmpty = (editor, element) => {\n  var {\n    children\n  } = element;\n  var [first] = children;\n  return children.length === 0 || children.length === 1 && Text.isText(first) && first.text === '' && !editor.isVoid(element);\n};\n\nvar isEnd = (editor, point, at) => {\n  var end = Editor.end(editor, at);\n  return Point.equals(point, end);\n};\n\nvar isNormalizing = editor => {\n  var isNormalizing = NORMALIZING.get(editor);\n  return isNormalizing === undefined ? true : isNormalizing;\n};\n\nvar isStart = (editor, point, at) => {\n  // PERF: If the offset isn't `0` we know it's not the start.\n  if (point.offset !== 0) {\n    return false;\n  }\n  var start = Editor.start(editor, at);\n  return Point.equals(point, start);\n};\n\nvar last = (editor, at) => {\n  var path = Editor.path(editor, at, {\n    edge: 'end'\n  });\n  return Editor.node(editor, path);\n};\n\nvar leaf = function leaf(editor, at) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var path = Editor.path(editor, at, options);\n  var node = Node.leaf(editor, path);\n  return [node, path];\n};\n\nfunction levels(editor) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return function* () {\n    var {\n      at = editor.selection,\n      reverse = false,\n      voids = false\n    } = options;\n    var {\n      match\n    } = options;\n    if (match == null) {\n      match = () => true;\n    }\n    if (!at) {\n      return;\n    }\n    var levels = [];\n    var path = Editor.path(editor, at);\n    for (var [n, p] of Node.levels(editor, path)) {\n      if (!match(n, p)) {\n        continue;\n      }\n      levels.push([n, p]);\n      if (!voids && Element.isElement(n) && Editor.isVoid(editor, n)) {\n        break;\n      }\n    }\n    if (reverse) {\n      levels.reverse();\n    }\n    yield* levels;\n  }();\n}\n\nvar _excluded$1 = [\"text\"],\n  _excluded2$1 = [\"text\"];\nvar marks = function marks(editor) {\n  var {\n    marks,\n    selection\n  } = editor;\n  if (!selection) {\n    return null;\n  }\n  var {\n    anchor,\n    focus\n  } = selection;\n  if (marks) {\n    return marks;\n  }\n  if (Range.isExpanded(selection)) {\n    /**\n     * COMPAT: Make sure hanging ranges (caused by double clicking in Firefox)\n     * do not adversely affect the returned marks.\n     */\n    var isEnd = Editor.isEnd(editor, anchor, anchor.path);\n    if (isEnd) {\n      var after = Editor.after(editor, anchor);\n      if (after) {\n        anchor = after;\n      }\n    }\n    var [match] = Editor.nodes(editor, {\n      match: Text.isText,\n      at: {\n        anchor,\n        focus\n      }\n    });\n    if (match) {\n      var [_node] = match;\n      var _rest = _objectWithoutProperties(_node, _excluded$1);\n      return _rest;\n    } else {\n      return {};\n    }\n  }\n  var {\n    path\n  } = anchor;\n  var [node] = Editor.leaf(editor, path);\n  if (anchor.offset === 0) {\n    var prev = Editor.previous(editor, {\n      at: path,\n      match: Text.isText\n    });\n    var markedVoid = Editor.above(editor, {\n      match: n => Element.isElement(n) && Editor.isVoid(editor, n) && editor.markableVoid(n)\n    });\n    if (!markedVoid) {\n      var block = Editor.above(editor, {\n        match: n => Element.isElement(n) && Editor.isBlock(editor, n)\n      });\n      if (prev && block) {\n        var [prevNode, prevPath] = prev;\n        var [, blockPath] = block;\n        if (Path.isAncestor(blockPath, prevPath)) {\n          node = prevNode;\n        }\n      }\n    }\n  }\n  var rest = _objectWithoutProperties(node, _excluded2$1);\n  return rest;\n};\n\nvar next = function next(editor) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var {\n    mode = 'lowest',\n    voids = false\n  } = options;\n  var {\n    match,\n    at = editor.selection\n  } = options;\n  if (!at) {\n    return;\n  }\n  var pointAfterLocation = Editor.after(editor, at, {\n    voids\n  });\n  if (!pointAfterLocation) return;\n  var [, to] = Editor.last(editor, []);\n  var span = [pointAfterLocation.path, to];\n  if (Path.isPath(at) && at.length === 0) {\n    throw new Error(\"Cannot get the next node from the root node!\");\n  }\n  if (match == null) {\n    if (Path.isPath(at)) {\n      var [parent] = Editor.parent(editor, at);\n      match = n => parent.children.includes(n);\n    } else {\n      match = () => true;\n    }\n  }\n  var [next] = Editor.nodes(editor, {\n    at: span,\n    match,\n    mode,\n    voids\n  });\n  return next;\n};\n\nvar node = function node(editor, at) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var path = Editor.path(editor, at, options);\n  var node = Node.get(editor, path);\n  return [node, path];\n};\n\nfunction nodes(editor) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return function* () {\n    var {\n      at = editor.selection,\n      mode = 'all',\n      universal = false,\n      reverse = false,\n      voids = false,\n      ignoreNonSelectable = false\n    } = options;\n    var {\n      match\n    } = options;\n    if (!match) {\n      match = () => true;\n    }\n    if (!at) {\n      return;\n    }\n    var from;\n    var to;\n    if (Span.isSpan(at)) {\n      from = at[0];\n      to = at[1];\n    } else {\n      var first = Editor.path(editor, at, {\n        edge: 'start'\n      });\n      var last = Editor.path(editor, at, {\n        edge: 'end'\n      });\n      from = reverse ? last : first;\n      to = reverse ? first : last;\n    }\n    var nodeEntries = Node.nodes(editor, {\n      reverse,\n      from,\n      to,\n      pass: _ref => {\n        var [node] = _ref;\n        if (!Element.isElement(node)) return false;\n        if (!voids && (Editor.isVoid(editor, node) || Editor.isElementReadOnly(editor, node))) return true;\n        if (ignoreNonSelectable && !Editor.isSelectable(editor, node)) return true;\n        return false;\n      }\n    });\n    var matches = [];\n    var hit;\n    for (var [node, path] of nodeEntries) {\n      if (ignoreNonSelectable && Element.isElement(node) && !Editor.isSelectable(editor, node)) {\n        continue;\n      }\n      var isLower = hit && Path.compare(path, hit[1]) === 0;\n      // In highest mode any node lower than the last hit is not a match.\n      if (mode === 'highest' && isLower) {\n        continue;\n      }\n      if (!match(node, path)) {\n        // If we've arrived at a leaf text node that is not lower than the last\n        // hit, then we've found a branch that doesn't include a match, which\n        // means the match is not universal.\n        if (universal && !isLower && Text.isText(node)) {\n          return;\n        } else {\n          continue;\n        }\n      }\n      // If there's a match and it's lower than the last, update the hit.\n      if (mode === 'lowest' && isLower) {\n        hit = [node, path];\n        continue;\n      }\n      // In lowest mode we emit the last hit, once it's guaranteed lowest.\n      var emit = mode === 'lowest' ? hit : [node, path];\n      if (emit) {\n        if (universal) {\n          matches.push(emit);\n        } else {\n          yield emit;\n        }\n      }\n      hit = [node, path];\n    }\n    // Since lowest is always emitting one behind, catch up at the end.\n    if (mode === 'lowest' && hit) {\n      if (universal) {\n        matches.push(hit);\n      } else {\n        yield hit;\n      }\n    }\n    // Universal defers to ensure that the match occurs in every branch, so we\n    // yield all of the matches after iterating.\n    if (universal) {\n      yield* matches;\n    }\n  }();\n}\n\nvar normalize = function normalize(editor) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var {\n    force = false,\n    operation\n  } = options;\n  var getDirtyPaths = editor => {\n    return DIRTY_PATHS.get(editor) || [];\n  };\n  var getDirtyPathKeys = editor => {\n    return DIRTY_PATH_KEYS.get(editor) || new Set();\n  };\n  var popDirtyPath = editor => {\n    var path = getDirtyPaths(editor).pop();\n    var key = path.join(',');\n    getDirtyPathKeys(editor).delete(key);\n    return path;\n  };\n  if (!Editor.isNormalizing(editor)) {\n    return;\n  }\n  if (force) {\n    var allPaths = Array.from(Node.nodes(editor), _ref => {\n      var [, p] = _ref;\n      return p;\n    });\n    var allPathKeys = new Set(allPaths.map(p => p.join(',')));\n    DIRTY_PATHS.set(editor, allPaths);\n    DIRTY_PATH_KEYS.set(editor, allPathKeys);\n  }\n  if (getDirtyPaths(editor).length === 0) {\n    return;\n  }\n  Editor.withoutNormalizing(editor, () => {\n    /*\n      Fix dirty elements with no children.\n      editor.normalizeNode() does fix this, but some normalization fixes also require it to work.\n      Running an initial pass avoids the catch-22 race condition.\n    */\n    for (var dirtyPath of getDirtyPaths(editor)) {\n      if (Node.has(editor, dirtyPath)) {\n        var entry = Editor.node(editor, dirtyPath);\n        var [node, _] = entry;\n        /*\n          The default normalizer inserts an empty text node in this scenario, but it can be customised.\n          So there is some risk here.\n                   As long as the normalizer only inserts child nodes for this case it is safe to do in any order;\n          by definition adding children to an empty node can't cause other paths to change.\n        */\n        if (Element.isElement(node) && node.children.length === 0) {\n          editor.normalizeNode(entry, {\n            operation\n          });\n        }\n      }\n    }\n    var dirtyPaths = getDirtyPaths(editor);\n    var initialDirtyPathsLength = dirtyPaths.length;\n    var iteration = 0;\n    while (dirtyPaths.length !== 0) {\n      if (!editor.shouldNormalize({\n        dirtyPaths,\n        iteration,\n        initialDirtyPathsLength,\n        operation\n      })) {\n        return;\n      }\n      var _dirtyPath = popDirtyPath(editor);\n      // If the node doesn't exist in the tree, it does not need to be normalized.\n      if (Node.has(editor, _dirtyPath)) {\n        var _entry = Editor.node(editor, _dirtyPath);\n        editor.normalizeNode(_entry, {\n          operation\n        });\n      }\n      iteration++;\n      dirtyPaths = getDirtyPaths(editor);\n    }\n  });\n};\n\nvar parent = function parent(editor, at) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var path = Editor.path(editor, at, options);\n  var parentPath = Path.parent(path);\n  var entry = Editor.node(editor, parentPath);\n  return entry;\n};\n\nvar pathRef = function pathRef(editor, path) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var {\n    affinity = 'forward'\n  } = options;\n  var ref = {\n    current: path,\n    affinity,\n    unref() {\n      var {\n        current\n      } = ref;\n      var pathRefs = Editor.pathRefs(editor);\n      pathRefs.delete(ref);\n      ref.current = null;\n      return current;\n    }\n  };\n  var refs = Editor.pathRefs(editor);\n  refs.add(ref);\n  return ref;\n};\n\nvar pathRefs = editor => {\n  var refs = PATH_REFS.get(editor);\n  if (!refs) {\n    refs = new Set();\n    PATH_REFS.set(editor, refs);\n  }\n  return refs;\n};\n\nvar path = function path(editor, at) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var {\n    depth,\n    edge\n  } = options;\n  if (Path.isPath(at)) {\n    if (edge === 'start') {\n      var [, firstPath] = Node.first(editor, at);\n      at = firstPath;\n    } else if (edge === 'end') {\n      var [, lastPath] = Node.last(editor, at);\n      at = lastPath;\n    }\n  }\n  if (Range.isRange(at)) {\n    if (edge === 'start') {\n      at = Range.start(at);\n    } else if (edge === 'end') {\n      at = Range.end(at);\n    } else {\n      at = Path.common(at.anchor.path, at.focus.path);\n    }\n  }\n  if (Point.isPoint(at)) {\n    at = at.path;\n  }\n  if (depth != null) {\n    at = at.slice(0, depth);\n  }\n  return at;\n};\n\nvar pointRef = function pointRef(editor, point) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var {\n    affinity = 'forward'\n  } = options;\n  var ref = {\n    current: point,\n    affinity,\n    unref() {\n      var {\n        current\n      } = ref;\n      var pointRefs = Editor.pointRefs(editor);\n      pointRefs.delete(ref);\n      ref.current = null;\n      return current;\n    }\n  };\n  var refs = Editor.pointRefs(editor);\n  refs.add(ref);\n  return ref;\n};\n\nvar pointRefs = editor => {\n  var refs = POINT_REFS.get(editor);\n  if (!refs) {\n    refs = new Set();\n    POINT_REFS.set(editor, refs);\n  }\n  return refs;\n};\n\nvar point = function point(editor, at) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var {\n    edge = 'start'\n  } = options;\n  if (Path.isPath(at)) {\n    var path;\n    if (edge === 'end') {\n      var [, lastPath] = Node.last(editor, at);\n      path = lastPath;\n    } else {\n      var [, firstPath] = Node.first(editor, at);\n      path = firstPath;\n    }\n    var node = Node.get(editor, path);\n    if (!Text.isText(node)) {\n      throw new Error(\"Cannot get the \".concat(edge, \" point in the node at path [\").concat(at, \"] because it has no \").concat(edge, \" text node.\"));\n    }\n    return {\n      path,\n      offset: edge === 'end' ? node.text.length : 0\n    };\n  }\n  if (Range.isRange(at)) {\n    var [start, end] = Range.edges(at);\n    return edge === 'start' ? start : end;\n  }\n  return at;\n};\n\nfunction positions(editor) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return function* () {\n    var {\n      at = editor.selection,\n      unit = 'offset',\n      reverse = false,\n      voids = false,\n      ignoreNonSelectable = false\n    } = options;\n    if (!at) {\n      return;\n    }\n    /**\n     * Algorithm notes:\n     *\n     * Each step `distance` is dynamic depending on the underlying text\n     * and the `unit` specified.  Each step, e.g., a line or word, may\n     * span multiple text nodes, so we iterate through the text both on\n     * two levels in step-sync:\n     *\n     * `leafText` stores the text on a text leaf level, and is advanced\n     * through using the counters `leafTextOffset` and `leafTextRemaining`.\n     *\n     * `blockText` stores the text on a block level, and is shortened\n     * by `distance` every time it is advanced.\n     *\n     * We only maintain a window of one blockText and one leafText because\n     * a block node always appears before all of its leaf nodes.\n     */\n    var range = Editor.range(editor, at);\n    var [start, end] = Range.edges(range);\n    var first = reverse ? end : start;\n    var isNewBlock = false;\n    var blockText = '';\n    var distance = 0; // Distance for leafText to catch up to blockText.\n    var leafTextRemaining = 0;\n    var leafTextOffset = 0;\n    // Iterate through all nodes in range, grabbing entire textual content\n    // of block nodes in blockText, and text nodes in leafText.\n    // Exploits the fact that nodes are sequenced in such a way that we first\n    // encounter the block node, then all of its text nodes, so when iterating\n    // through the blockText and leafText we just need to remember a window of\n    // one block node and leaf node, respectively.\n    for (var [node, path] of Editor.nodes(editor, {\n      at,\n      reverse,\n      voids,\n      ignoreNonSelectable\n    })) {\n      /*\n       * ELEMENT NODE - Yield position(s) for voids, collect blockText for blocks\n       */\n      if (Element.isElement(node)) {\n        // Void nodes are a special case, so by default we will always\n        // yield their first point. If the `voids` option is set to true,\n        // then we will iterate over their content.\n        if (!voids && (editor.isVoid(node) || editor.isElementReadOnly(node))) {\n          yield Editor.start(editor, path);\n          continue;\n        }\n        // Inline element nodes are ignored as they don't themselves\n        // contribute to `blockText` or `leafText` - their parent and\n        // children do.\n        if (editor.isInline(node)) continue;\n        // Block element node - set `blockText` to its text content.\n        if (Editor.hasInlines(editor, node)) {\n          // We always exhaust block nodes before encountering a new one:\n          //   console.assert(blockText === '',\n          //     `blockText='${blockText}' - `+\n          //     `not exhausted before new block node`, path)\n          // Ensure range considered is capped to `range`, in the\n          // start/end edge cases where block extends beyond range.\n          // Equivalent to this, but presumably more performant:\n          //   blockRange = Editor.range(editor, ...Editor.edges(editor, path))\n          //   blockRange = Range.intersection(range, blockRange) // intersect\n          //   blockText = Editor.string(editor, blockRange, { voids })\n          var e = Path.isAncestor(path, end.path) ? end : Editor.end(editor, path);\n          var s = Path.isAncestor(path, start.path) ? start : Editor.start(editor, path);\n          blockText = Editor.string(editor, {\n            anchor: s,\n            focus: e\n          }, {\n            voids\n          });\n          isNewBlock = true;\n        }\n      }\n      /*\n       * TEXT LEAF NODE - Iterate through text content, yielding\n       * positions every `distance` offset according to `unit`.\n       */\n      if (Text.isText(node)) {\n        var isFirst = Path.equals(path, first.path);\n        // Proof that we always exhaust text nodes before encountering a new one:\n        //   console.assert(leafTextRemaining <= 0,\n        //     `leafTextRemaining=${leafTextRemaining} - `+\n        //     `not exhausted before new leaf text node`, path)\n        // Reset `leafText` counters for new text node.\n        if (isFirst) {\n          leafTextRemaining = reverse ? first.offset : node.text.length - first.offset;\n          leafTextOffset = first.offset; // Works for reverse too.\n        } else {\n          leafTextRemaining = node.text.length;\n          leafTextOffset = reverse ? leafTextRemaining : 0;\n        }\n        // Yield position at the start of node (potentially).\n        if (isFirst || isNewBlock || unit === 'offset') {\n          yield {\n            path,\n            offset: leafTextOffset\n          };\n          isNewBlock = false;\n        }\n        // Yield positions every (dynamically calculated) `distance` offset.\n        while (true) {\n          // If `leafText` has caught up with `blockText` (distance=0),\n          // and if blockText is exhausted, break to get another block node,\n          // otherwise advance blockText forward by the new `distance`.\n          if (distance === 0) {\n            if (blockText === '') break;\n            distance = calcDistance(blockText, unit, reverse);\n            // Split the string at the previously found distance and use the\n            // remaining string for the next iteration.\n            blockText = splitByCharacterDistance(blockText, distance, reverse)[1];\n          }\n          // Advance `leafText` by the current `distance`.\n          leafTextOffset = reverse ? leafTextOffset - distance : leafTextOffset + distance;\n          leafTextRemaining = leafTextRemaining - distance;\n          // If `leafText` is exhausted, break to get a new leaf node\n          // and set distance to the overflow amount, so we'll (maybe)\n          // catch up to blockText in the next leaf text node.\n          if (leafTextRemaining < 0) {\n            distance = -leafTextRemaining;\n            break;\n          }\n          // Successfully walked `distance` offsets through `leafText`\n          // to catch up with `blockText`, so we can reset `distance`\n          // and yield this position in this node.\n          distance = 0;\n          yield {\n            path,\n            offset: leafTextOffset\n          };\n        }\n      }\n    }\n    // Proof that upon completion, we've exahusted both leaf and block text:\n    //   console.assert(leafTextRemaining <= 0, \"leafText wasn't exhausted\")\n    //   console.assert(blockText === '', \"blockText wasn't exhausted\")\n    // Helper:\n    // Return the distance in offsets for a step of size `unit` on given string.\n    function calcDistance(text, unit, reverse) {\n      if (unit === 'character') {\n        return getCharacterDistance(text, reverse);\n      } else if (unit === 'word') {\n        return getWordDistance(text, reverse);\n      } else if (unit === 'line' || unit === 'block') {\n        return text.length;\n      }\n      return 1;\n    }\n  }();\n}\n\nvar previous = function previous(editor) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var {\n    mode = 'lowest',\n    voids = false\n  } = options;\n  var {\n    match,\n    at = editor.selection\n  } = options;\n  if (!at) {\n    return;\n  }\n  var pointBeforeLocation = Editor.before(editor, at, {\n    voids\n  });\n  if (!pointBeforeLocation) {\n    return;\n  }\n  var [, to] = Editor.first(editor, []);\n  // The search location is from the start of the document to the path of\n  // the point before the location passed in\n  var span = [pointBeforeLocation.path, to];\n  if (Path.isPath(at) && at.length === 0) {\n    throw new Error(\"Cannot get the previous node from the root node!\");\n  }\n  if (match == null) {\n    if (Path.isPath(at)) {\n      var [parent] = Editor.parent(editor, at);\n      match = n => parent.children.includes(n);\n    } else {\n      match = () => true;\n    }\n  }\n  var [previous] = Editor.nodes(editor, {\n    reverse: true,\n    at: span,\n    match,\n    mode,\n    voids\n  });\n  return previous;\n};\n\nvar rangeRef = function rangeRef(editor, range) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var {\n    affinity = 'forward'\n  } = options;\n  var ref = {\n    current: range,\n    affinity,\n    unref() {\n      var {\n        current\n      } = ref;\n      var rangeRefs = Editor.rangeRefs(editor);\n      rangeRefs.delete(ref);\n      ref.current = null;\n      return current;\n    }\n  };\n  var refs = Editor.rangeRefs(editor);\n  refs.add(ref);\n  return ref;\n};\n\nvar rangeRefs = editor => {\n  var refs = RANGE_REFS.get(editor);\n  if (!refs) {\n    refs = new Set();\n    RANGE_REFS.set(editor, refs);\n  }\n  return refs;\n};\n\nvar range = (editor, at, to) => {\n  if (Range.isRange(at) && !to) {\n    return at;\n  }\n  var start = Editor.start(editor, at);\n  var end = Editor.end(editor, to || at);\n  return {\n    anchor: start,\n    focus: end\n  };\n};\n\nfunction ownKeys$2(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$2(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$2(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$2(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar removeMark = (editor, key) => {\n  var {\n    selection\n  } = editor;\n  if (selection) {\n    var match = (node, path) => {\n      if (!Text.isText(node)) {\n        return false; // marks can only be applied to text\n      }\n\n      var [parentNode, parentPath] = Editor.parent(editor, path);\n      return !editor.isVoid(parentNode) || editor.markableVoid(parentNode);\n    };\n    var expandedSelection = Range.isExpanded(selection);\n    var markAcceptingVoidSelected = false;\n    if (!expandedSelection) {\n      var [selectedNode, selectedPath] = Editor.node(editor, selection);\n      if (selectedNode && match(selectedNode, selectedPath)) {\n        var [parentNode] = Editor.parent(editor, selectedPath);\n        markAcceptingVoidSelected = parentNode && editor.markableVoid(parentNode);\n      }\n    }\n    if (expandedSelection || markAcceptingVoidSelected) {\n      Transforms.unsetNodes(editor, key, {\n        match,\n        split: true,\n        voids: true\n      });\n    } else {\n      var marks = _objectSpread$2({}, Editor.marks(editor) || {});\n      delete marks[key];\n      editor.marks = marks;\n      if (!FLUSHING.get(editor)) {\n        editor.onChange();\n      }\n    }\n  }\n};\n\nvar setNormalizing = (editor, isNormalizing) => {\n  NORMALIZING.set(editor, isNormalizing);\n};\n\nvar start = (editor, at) => {\n  return Editor.point(editor, at, {\n    edge: 'start'\n  });\n};\n\nvar string = function string(editor, at) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var {\n    voids = false\n  } = options;\n  var range = Editor.range(editor, at);\n  var [start, end] = Range.edges(range);\n  var text = '';\n  for (var [node, path] of Editor.nodes(editor, {\n    at: range,\n    match: Text.isText,\n    voids\n  })) {\n    var t = node.text;\n    if (Path.equals(path, end.path)) {\n      t = t.slice(0, end.offset);\n    }\n    if (Path.equals(path, start.path)) {\n      t = t.slice(start.offset);\n    }\n    text += t;\n  }\n  return text;\n};\n\nvar unhangRange = function unhangRange(editor, range) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var {\n    voids = false\n  } = options;\n  var [start, end] = Range.edges(range);\n  // PERF: exit early if we can guarantee that the range isn't hanging.\n  if (start.offset !== 0 || end.offset !== 0 || Range.isCollapsed(range) || Path.hasPrevious(end.path)) {\n    return range;\n  }\n  var endBlock = Editor.above(editor, {\n    at: end,\n    match: n => Element.isElement(n) && Editor.isBlock(editor, n),\n    voids\n  });\n  var blockPath = endBlock ? endBlock[1] : [];\n  var first = Editor.start(editor, start);\n  var before = {\n    anchor: first,\n    focus: end\n  };\n  var skip = true;\n  for (var [node, path] of Editor.nodes(editor, {\n    at: before,\n    match: Text.isText,\n    reverse: true,\n    voids\n  })) {\n    if (skip) {\n      skip = false;\n      continue;\n    }\n    if (node.text !== '' || Path.isBefore(path, blockPath)) {\n      end = {\n        path,\n        offset: node.text.length\n      };\n      break;\n    }\n  }\n  return {\n    anchor: start,\n    focus: end\n  };\n};\n\nvar withoutNormalizing = (editor, fn) => {\n  var value = Editor.isNormalizing(editor);\n  Editor.setNormalizing(editor, false);\n  try {\n    fn();\n  } finally {\n    Editor.setNormalizing(editor, value);\n  }\n  Editor.normalize(editor);\n};\n\nvar shouldMergeNodesRemovePrevNode = (editor, _ref, _ref2) => {\n  var [prevNode, prevPath] = _ref;\n  // If the target node that we're merging with is empty, remove it instead\n  // of merging the two. This is a common rich text editor behavior to\n  // prevent losing formatting when deleting entire nodes when you have a\n  // hanging selection.\n  // if prevNode is first child in parent,don't remove it.\n  return Element.isElement(prevNode) && Editor.isEmpty(editor, prevNode) || Text.isText(prevNode) && prevNode.text === '' && prevPath[prevPath.length - 1] !== 0;\n};\n\nvar deleteText = function deleteText(editor) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  Editor.withoutNormalizing(editor, () => {\n    var _Editor$void, _Editor$void2;\n    var {\n      reverse = false,\n      unit = 'character',\n      distance = 1,\n      voids = false\n    } = options;\n    var {\n      at = editor.selection,\n      hanging = false\n    } = options;\n    if (!at) {\n      return;\n    }\n    var isCollapsed = false;\n    if (Range.isRange(at) && Range.isCollapsed(at)) {\n      isCollapsed = true;\n      at = at.anchor;\n    }\n    if (Point.isPoint(at)) {\n      var furthestVoid = Editor.void(editor, {\n        at,\n        mode: 'highest'\n      });\n      if (!voids && furthestVoid) {\n        var [, voidPath] = furthestVoid;\n        at = voidPath;\n      } else {\n        var opts = {\n          unit,\n          distance\n        };\n        var target = reverse ? Editor.before(editor, at, opts) || Editor.start(editor, []) : Editor.after(editor, at, opts) || Editor.end(editor, []);\n        at = {\n          anchor: at,\n          focus: target\n        };\n        hanging = true;\n      }\n    }\n    if (Path.isPath(at)) {\n      Transforms.removeNodes(editor, {\n        at,\n        voids\n      });\n      return;\n    }\n    if (Range.isCollapsed(at)) {\n      return;\n    }\n    if (!hanging) {\n      var [, _end] = Range.edges(at);\n      var endOfDoc = Editor.end(editor, []);\n      if (!Point.equals(_end, endOfDoc)) {\n        at = Editor.unhangRange(editor, at, {\n          voids\n        });\n      }\n    }\n    var [start, end] = Range.edges(at);\n    var startBlock = Editor.above(editor, {\n      match: n => Element.isElement(n) && Editor.isBlock(editor, n),\n      at: start,\n      voids\n    });\n    var endBlock = Editor.above(editor, {\n      match: n => Element.isElement(n) && Editor.isBlock(editor, n),\n      at: end,\n      voids\n    });\n    var isAcrossBlocks = startBlock && endBlock && !Path.equals(startBlock[1], endBlock[1]);\n    var isSingleText = Path.equals(start.path, end.path);\n    var startNonEditable = voids ? null : (_Editor$void = Editor.void(editor, {\n      at: start,\n      mode: 'highest'\n    })) !== null && _Editor$void !== void 0 ? _Editor$void : Editor.elementReadOnly(editor, {\n      at: start,\n      mode: 'highest'\n    });\n    var endNonEditable = voids ? null : (_Editor$void2 = Editor.void(editor, {\n      at: end,\n      mode: 'highest'\n    })) !== null && _Editor$void2 !== void 0 ? _Editor$void2 : Editor.elementReadOnly(editor, {\n      at: end,\n      mode: 'highest'\n    });\n    // If the start or end points are inside an inline void, nudge them out.\n    if (startNonEditable) {\n      var before = Editor.before(editor, start);\n      if (before && startBlock && Path.isAncestor(startBlock[1], before.path)) {\n        start = before;\n      }\n    }\n    if (endNonEditable) {\n      var after = Editor.after(editor, end);\n      if (after && endBlock && Path.isAncestor(endBlock[1], after.path)) {\n        end = after;\n      }\n    }\n    // Get the highest nodes that are completely inside the range, as well as\n    // the start and end nodes.\n    var matches = [];\n    var lastPath;\n    for (var entry of Editor.nodes(editor, {\n      at,\n      voids\n    })) {\n      var [node, path] = entry;\n      if (lastPath && Path.compare(path, lastPath) === 0) {\n        continue;\n      }\n      if (!voids && Element.isElement(node) && (Editor.isVoid(editor, node) || Editor.isElementReadOnly(editor, node)) || !Path.isCommon(path, start.path) && !Path.isCommon(path, end.path)) {\n        matches.push(entry);\n        lastPath = path;\n      }\n    }\n    var pathRefs = Array.from(matches, _ref => {\n      var [, p] = _ref;\n      return Editor.pathRef(editor, p);\n    });\n    var startRef = Editor.pointRef(editor, start);\n    var endRef = Editor.pointRef(editor, end);\n    var removedText = '';\n    if (!isSingleText && !startNonEditable) {\n      var _point = startRef.current;\n      var [_node] = Editor.leaf(editor, _point);\n      var {\n        path: _path\n      } = _point;\n      var {\n        offset\n      } = start;\n      var text = _node.text.slice(offset);\n      if (text.length > 0) {\n        editor.apply({\n          type: 'remove_text',\n          path: _path,\n          offset,\n          text\n        });\n        removedText = text;\n      }\n    }\n    pathRefs.reverse().map(r => r.unref()).filter(r => r !== null).forEach(p => Transforms.removeNodes(editor, {\n      at: p,\n      voids\n    }));\n    if (!endNonEditable) {\n      var _point2 = endRef.current;\n      var [_node2] = Editor.leaf(editor, _point2);\n      var {\n        path: _path2\n      } = _point2;\n      var _offset = isSingleText ? start.offset : 0;\n      var _text = _node2.text.slice(_offset, end.offset);\n      if (_text.length > 0) {\n        editor.apply({\n          type: 'remove_text',\n          path: _path2,\n          offset: _offset,\n          text: _text\n        });\n        removedText = _text;\n      }\n    }\n    if (!isSingleText && isAcrossBlocks && endRef.current && startRef.current) {\n      Transforms.mergeNodes(editor, {\n        at: endRef.current,\n        hanging: true,\n        voids\n      });\n    }\n    // For Thai script, deleting N character(s) backward should delete\n    // N code point(s) instead of an entire grapheme cluster.\n    // Therefore, the remaining code points should be inserted back.\n    if (isCollapsed && reverse && unit === 'character' && removedText.length > 1 && removedText.match(/[\\u0E00-\\u0E7F]+/)) {\n      Transforms.insertText(editor, removedText.slice(0, removedText.length - distance));\n    }\n    var startUnref = startRef.unref();\n    var endUnref = endRef.unref();\n    var point = reverse ? startUnref || endUnref : endUnref || startUnref;\n    if (options.at == null && point) {\n      Transforms.select(editor, point);\n    }\n  });\n};\n\nvar insertFragment = function insertFragment(editor, fragment) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Editor.withoutNormalizing(editor, () => {\n    var {\n      hanging = false,\n      voids = false\n    } = options;\n    var {\n      at = getDefaultInsertLocation(editor),\n      batchDirty = true\n    } = options;\n    if (!fragment.length) {\n      return;\n    }\n    if (Range.isRange(at)) {\n      if (!hanging) {\n        at = Editor.unhangRange(editor, at, {\n          voids\n        });\n      }\n      if (Range.isCollapsed(at)) {\n        at = at.anchor;\n      } else {\n        var [, end] = Range.edges(at);\n        if (!voids && Editor.void(editor, {\n          at: end\n        })) {\n          return;\n        }\n        var pointRef = Editor.pointRef(editor, end);\n        Transforms.delete(editor, {\n          at\n        });\n        at = pointRef.unref();\n      }\n    } else if (Path.isPath(at)) {\n      at = Editor.start(editor, at);\n    }\n    if (!voids && Editor.void(editor, {\n      at\n    })) {\n      return;\n    }\n    // If the insert point is at the edge of an inline node, move it outside\n    // instead since it will need to be split otherwise.\n    var inlineElementMatch = Editor.above(editor, {\n      at,\n      match: n => Element.isElement(n) && Editor.isInline(editor, n),\n      mode: 'highest',\n      voids\n    });\n    if (inlineElementMatch) {\n      var [, _inlinePath] = inlineElementMatch;\n      if (Editor.isEnd(editor, at, _inlinePath)) {\n        var after = Editor.after(editor, _inlinePath);\n        at = after;\n      } else if (Editor.isStart(editor, at, _inlinePath)) {\n        var before = Editor.before(editor, _inlinePath);\n        at = before;\n      }\n    }\n    var blockMatch = Editor.above(editor, {\n      match: n => Element.isElement(n) && Editor.isBlock(editor, n),\n      at,\n      voids\n    });\n    var [, blockPath] = blockMatch;\n    var isBlockStart = Editor.isStart(editor, at, blockPath);\n    var isBlockEnd = Editor.isEnd(editor, at, blockPath);\n    var isBlockEmpty = isBlockStart && isBlockEnd;\n    var mergeStart = !isBlockStart || isBlockStart && isBlockEnd;\n    var mergeEnd = !isBlockEnd;\n    var [, firstPath] = Node.first({\n      children: fragment\n    }, []);\n    var [, lastPath] = Node.last({\n      children: fragment\n    }, []);\n    var matches = [];\n    var matcher = _ref => {\n      var [n, p] = _ref;\n      var isRoot = p.length === 0;\n      if (isRoot) {\n        return false;\n      }\n      if (isBlockEmpty) {\n        return true;\n      }\n      if (mergeStart && Path.isAncestor(p, firstPath) && Element.isElement(n) && !editor.isVoid(n) && !editor.isInline(n)) {\n        return false;\n      }\n      if (mergeEnd && Path.isAncestor(p, lastPath) && Element.isElement(n) && !editor.isVoid(n) && !editor.isInline(n)) {\n        return false;\n      }\n      return true;\n    };\n    for (var entry of Node.nodes({\n      children: fragment\n    }, {\n      pass: matcher\n    })) {\n      if (matcher(entry)) {\n        matches.push(entry);\n      }\n    }\n    var starts = [];\n    var middles = [];\n    var ends = [];\n    var starting = true;\n    var hasBlocks = false;\n    for (var [node] of matches) {\n      if (Element.isElement(node) && !editor.isInline(node)) {\n        starting = false;\n        hasBlocks = true;\n        middles.push(node);\n      } else if (starting) {\n        starts.push(node);\n      } else {\n        ends.push(node);\n      }\n    }\n    var [inlineMatch] = Editor.nodes(editor, {\n      at,\n      match: n => Text.isText(n) || Editor.isInline(editor, n),\n      mode: 'highest',\n      voids\n    });\n    var [, inlinePath] = inlineMatch;\n    var isInlineStart = Editor.isStart(editor, at, inlinePath);\n    var isInlineEnd = Editor.isEnd(editor, at, inlinePath);\n    var middleRef = Editor.pathRef(editor, isBlockEnd && !ends.length ? Path.next(blockPath) : blockPath);\n    var endRef = Editor.pathRef(editor, isInlineEnd ? Path.next(inlinePath) : inlinePath);\n    Transforms.splitNodes(editor, {\n      at,\n      match: n => hasBlocks ? Element.isElement(n) && Editor.isBlock(editor, n) : Text.isText(n) || Editor.isInline(editor, n),\n      mode: hasBlocks ? 'lowest' : 'highest',\n      always: hasBlocks && (!isBlockStart || starts.length > 0) && (!isBlockEnd || ends.length > 0),\n      voids\n    });\n    var startRef = Editor.pathRef(editor, !isInlineStart || isInlineStart && isInlineEnd ? Path.next(inlinePath) : inlinePath);\n    Transforms.insertNodes(editor, starts, {\n      at: startRef.current,\n      match: n => Text.isText(n) || Editor.isInline(editor, n),\n      mode: 'highest',\n      voids,\n      batchDirty\n    });\n    if (isBlockEmpty && !starts.length && middles.length && !ends.length) {\n      Transforms.delete(editor, {\n        at: blockPath,\n        voids\n      });\n    }\n    Transforms.insertNodes(editor, middles, {\n      at: middleRef.current,\n      match: n => Element.isElement(n) && Editor.isBlock(editor, n),\n      mode: 'lowest',\n      voids,\n      batchDirty\n    });\n    Transforms.insertNodes(editor, ends, {\n      at: endRef.current,\n      match: n => Text.isText(n) || Editor.isInline(editor, n),\n      mode: 'highest',\n      voids,\n      batchDirty\n    });\n    if (!options.at) {\n      var path;\n      if (ends.length > 0 && endRef.current) {\n        path = Path.previous(endRef.current);\n      } else if (middles.length > 0 && middleRef.current) {\n        path = Path.previous(middleRef.current);\n      } else if (startRef.current) {\n        path = Path.previous(startRef.current);\n      }\n      if (path) {\n        var _end = Editor.end(editor, path);\n        Transforms.select(editor, _end);\n      }\n    }\n    startRef.unref();\n    middleRef.unref();\n    endRef.unref();\n  });\n};\n\nvar collapse = function collapse(editor) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var {\n    edge = 'anchor'\n  } = options;\n  var {\n    selection\n  } = editor;\n  if (!selection) {\n    return;\n  } else if (edge === 'anchor') {\n    Transforms.select(editor, selection.anchor);\n  } else if (edge === 'focus') {\n    Transforms.select(editor, selection.focus);\n  } else if (edge === 'start') {\n    var [start] = Range.edges(selection);\n    Transforms.select(editor, start);\n  } else if (edge === 'end') {\n    var [, end] = Range.edges(selection);\n    Transforms.select(editor, end);\n  }\n};\n\nvar deselect = editor => {\n  var {\n    selection\n  } = editor;\n  if (selection) {\n    editor.apply({\n      type: 'set_selection',\n      properties: selection,\n      newProperties: null\n    });\n  }\n};\n\nvar move = function move(editor) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var {\n    selection\n  } = editor;\n  var {\n    distance = 1,\n    unit = 'character',\n    reverse = false\n  } = options;\n  var {\n    edge = null\n  } = options;\n  if (!selection) {\n    return;\n  }\n  if (edge === 'start') {\n    edge = Range.isBackward(selection) ? 'focus' : 'anchor';\n  }\n  if (edge === 'end') {\n    edge = Range.isBackward(selection) ? 'anchor' : 'focus';\n  }\n  var {\n    anchor,\n    focus\n  } = selection;\n  var opts = {\n    distance,\n    unit,\n    ignoreNonSelectable: true\n  };\n  var props = {};\n  if (edge == null || edge === 'anchor') {\n    var point = reverse ? Editor.before(editor, anchor, opts) : Editor.after(editor, anchor, opts);\n    if (point) {\n      props.anchor = point;\n    }\n  }\n  if (edge == null || edge === 'focus') {\n    var _point = reverse ? Editor.before(editor, focus, opts) : Editor.after(editor, focus, opts);\n    if (_point) {\n      props.focus = _point;\n    }\n  }\n  Transforms.setSelection(editor, props);\n};\n\nvar select = (editor, target) => {\n  var {\n    selection\n  } = editor;\n  target = Editor.range(editor, target);\n  if (selection) {\n    Transforms.setSelection(editor, target);\n    return;\n  }\n  if (!Range.isRange(target)) {\n    throw new Error(\"When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: \".concat(Scrubber.stringify(target)));\n  }\n  editor.apply({\n    type: 'set_selection',\n    properties: selection,\n    newProperties: target\n  });\n};\n\nfunction ownKeys$1(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$1(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$1(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$1(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar setPoint = function setPoint(editor, props) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var {\n    selection\n  } = editor;\n  var {\n    edge = 'both'\n  } = options;\n  if (!selection) {\n    return;\n  }\n  if (edge === 'start') {\n    edge = Range.isBackward(selection) ? 'focus' : 'anchor';\n  }\n  if (edge === 'end') {\n    edge = Range.isBackward(selection) ? 'anchor' : 'focus';\n  }\n  var {\n    anchor,\n    focus\n  } = selection;\n  var point = edge === 'anchor' ? anchor : focus;\n  Transforms.setSelection(editor, {\n    [edge === 'anchor' ? 'anchor' : 'focus']: _objectSpread$1(_objectSpread$1({}, point), props)\n  });\n};\n\nvar setSelection = (editor, props) => {\n  var {\n    selection\n  } = editor;\n  var oldProps = {};\n  var newProps = {};\n  if (!selection) {\n    return;\n  }\n  for (var k in props) {\n    if (k === 'anchor' && props.anchor != null && !Point.equals(props.anchor, selection.anchor) || k === 'focus' && props.focus != null && !Point.equals(props.focus, selection.focus) || k !== 'anchor' && k !== 'focus' && props[k] !== selection[k]) {\n      oldProps[k] = selection[k];\n      newProps[k] = props[k];\n    }\n  }\n  if (Object.keys(oldProps).length > 0) {\n    editor.apply({\n      type: 'set_selection',\n      properties: oldProps,\n      newProperties: newProps\n    });\n  }\n};\n\nvar insertNodes = function insertNodes(editor, nodes) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Editor.withoutNormalizing(editor, () => {\n    var {\n      hanging = false,\n      voids = false,\n      mode = 'lowest',\n      batchDirty = true\n    } = options;\n    var {\n      at,\n      match,\n      select\n    } = options;\n    if (Node.isNode(nodes)) {\n      nodes = [nodes];\n    }\n    if (nodes.length === 0) {\n      return;\n    }\n    var [node] = nodes;\n    if (!at) {\n      at = getDefaultInsertLocation(editor);\n      if (select !== false) {\n        select = true;\n      }\n    }\n    if (select == null) {\n      select = false;\n    }\n    if (Range.isRange(at)) {\n      if (!hanging) {\n        at = Editor.unhangRange(editor, at, {\n          voids\n        });\n      }\n      if (Range.isCollapsed(at)) {\n        at = at.anchor;\n      } else {\n        var [, end] = Range.edges(at);\n        var pointRef = Editor.pointRef(editor, end);\n        Transforms.delete(editor, {\n          at\n        });\n        at = pointRef.unref();\n      }\n    }\n    if (Point.isPoint(at)) {\n      if (match == null) {\n        if (Text.isText(node)) {\n          match = n => Text.isText(n);\n        } else if (editor.isInline(node)) {\n          match = n => Text.isText(n) || Editor.isInline(editor, n);\n        } else {\n          match = n => Element.isElement(n) && Editor.isBlock(editor, n);\n        }\n      }\n      var [entry] = Editor.nodes(editor, {\n        at: at.path,\n        match,\n        mode,\n        voids\n      });\n      if (entry) {\n        var [, matchPath] = entry;\n        var pathRef = Editor.pathRef(editor, matchPath);\n        var isAtEnd = Editor.isEnd(editor, at, matchPath);\n        Transforms.splitNodes(editor, {\n          at,\n          match,\n          mode,\n          voids\n        });\n        var path = pathRef.unref();\n        at = isAtEnd ? Path.next(path) : path;\n      } else {\n        return;\n      }\n    }\n    var parentPath = Path.parent(at);\n    var index = at[at.length - 1];\n    if (!voids && Editor.void(editor, {\n      at: parentPath\n    })) {\n      return;\n    }\n    if (batchDirty) {\n      // PERF: batch update dirty paths\n      // batched ops used to transform existing dirty paths\n      var batchedOps = [];\n      var newDirtyPaths = Path.levels(parentPath);\n      batchDirtyPaths(editor, () => {\n        var _loop = function _loop() {\n          var path = parentPath.concat(index);\n          index++;\n          var op = {\n            type: 'insert_node',\n            path,\n            node: _node\n          };\n          editor.apply(op);\n          at = Path.next(at);\n          batchedOps.push(op);\n          if (!Text.isText) {\n            newDirtyPaths.push(path);\n          } else {\n            newDirtyPaths.push(...Array.from(Node.nodes(_node), _ref => {\n              var [, p] = _ref;\n              return path.concat(p);\n            }));\n          }\n        };\n        for (var _node of nodes) {\n          _loop();\n        }\n      }, () => {\n        updateDirtyPaths(editor, newDirtyPaths, p => {\n          var newPath = p;\n          for (var op of batchedOps) {\n            if (Path.operationCanTransformPath(op)) {\n              newPath = Path.transform(newPath, op);\n              if (!newPath) {\n                return null;\n              }\n            }\n          }\n          return newPath;\n        });\n      });\n    } else {\n      for (var _node2 of nodes) {\n        var _path = parentPath.concat(index);\n        index++;\n        editor.apply({\n          type: 'insert_node',\n          path: _path,\n          node: _node2\n        });\n        at = Path.next(at);\n      }\n    }\n    at = Path.previous(at);\n    if (select) {\n      var point = Editor.end(editor, at);\n      if (point) {\n        Transforms.select(editor, point);\n      }\n    }\n  });\n};\n\nvar liftNodes = function liftNodes(editor) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  Editor.withoutNormalizing(editor, () => {\n    var {\n      at = editor.selection,\n      mode = 'lowest',\n      voids = false\n    } = options;\n    var {\n      match\n    } = options;\n    if (match == null) {\n      match = Path.isPath(at) ? matchPath(editor, at) : n => Element.isElement(n) && Editor.isBlock(editor, n);\n    }\n    if (!at) {\n      return;\n    }\n    var matches = Editor.nodes(editor, {\n      at,\n      match,\n      mode,\n      voids\n    });\n    var pathRefs = Array.from(matches, _ref => {\n      var [, p] = _ref;\n      return Editor.pathRef(editor, p);\n    });\n    for (var pathRef of pathRefs) {\n      var path = pathRef.unref();\n      if (path.length < 2) {\n        throw new Error(\"Cannot lift node at a path [\".concat(path, \"] because it has a depth of less than `2`.\"));\n      }\n      var parentNodeEntry = Editor.node(editor, Path.parent(path));\n      var [parent, parentPath] = parentNodeEntry;\n      var index = path[path.length - 1];\n      var {\n        length\n      } = parent.children;\n      if (length === 1) {\n        var toPath = Path.next(parentPath);\n        Transforms.moveNodes(editor, {\n          at: path,\n          to: toPath,\n          voids\n        });\n        Transforms.removeNodes(editor, {\n          at: parentPath,\n          voids\n        });\n      } else if (index === 0) {\n        Transforms.moveNodes(editor, {\n          at: path,\n          to: parentPath,\n          voids\n        });\n      } else if (index === length - 1) {\n        var _toPath = Path.next(parentPath);\n        Transforms.moveNodes(editor, {\n          at: path,\n          to: _toPath,\n          voids\n        });\n      } else {\n        var splitPath = Path.next(path);\n        var _toPath2 = Path.next(parentPath);\n        Transforms.splitNodes(editor, {\n          at: splitPath,\n          voids\n        });\n        Transforms.moveNodes(editor, {\n          at: path,\n          to: _toPath2,\n          voids\n        });\n      }\n    }\n  });\n};\n\nvar _excluded = [\"text\"],\n  _excluded2 = [\"children\"];\nvar hasSingleChildNest = (editor, node) => {\n  if (Element.isElement(node)) {\n    var element = node;\n    if (Editor.isVoid(editor, node)) {\n      return true;\n    } else if (element.children.length === 1) {\n      return hasSingleChildNest(editor, element.children[0]);\n    } else {\n      return false;\n    }\n  } else if (Editor.isEditor(node)) {\n    return false;\n  } else {\n    return true;\n  }\n};\nvar mergeNodes = function mergeNodes(editor) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  Editor.withoutNormalizing(editor, () => {\n    var {\n      match,\n      at = editor.selection\n    } = options;\n    var {\n      hanging = false,\n      voids = false,\n      mode = 'lowest'\n    } = options;\n    if (!at) {\n      return;\n    }\n    if (match == null) {\n      if (Path.isPath(at)) {\n        var [parent] = Editor.parent(editor, at);\n        match = n => parent.children.includes(n);\n      } else {\n        match = n => Element.isElement(n) && Editor.isBlock(editor, n);\n      }\n    }\n    if (!hanging && Range.isRange(at)) {\n      at = Editor.unhangRange(editor, at, {\n        voids\n      });\n    }\n    if (Range.isRange(at)) {\n      if (Range.isCollapsed(at)) {\n        at = at.anchor;\n      } else {\n        var [, end] = Range.edges(at);\n        var pointRef = Editor.pointRef(editor, end);\n        Transforms.delete(editor, {\n          at\n        });\n        at = pointRef.unref();\n        if (options.at == null) {\n          Transforms.select(editor, at);\n        }\n      }\n    }\n    var [current] = Editor.nodes(editor, {\n      at,\n      match,\n      voids,\n      mode\n    });\n    var prev = Editor.previous(editor, {\n      at,\n      match,\n      voids,\n      mode\n    });\n    if (!current || !prev) {\n      return;\n    }\n    var [node, path] = current;\n    var [prevNode, prevPath] = prev;\n    if (path.length === 0 || prevPath.length === 0) {\n      return;\n    }\n    var newPath = Path.next(prevPath);\n    var commonPath = Path.common(path, prevPath);\n    var isPreviousSibling = Path.isSibling(path, prevPath);\n    var levels = Array.from(Editor.levels(editor, {\n      at: path\n    }), _ref => {\n      var [n] = _ref;\n      return n;\n    }).slice(commonPath.length).slice(0, -1);\n    // Determine if the merge will leave an ancestor of the path empty as a\n    // result, in which case we'll want to remove it after merging.\n    var emptyAncestor = Editor.above(editor, {\n      at: path,\n      mode: 'highest',\n      match: n => levels.includes(n) && hasSingleChildNest(editor, n)\n    });\n    var emptyRef = emptyAncestor && Editor.pathRef(editor, emptyAncestor[1]);\n    var properties;\n    var position;\n    // Ensure that the nodes are equivalent, and figure out what the position\n    // and extra properties of the merge will be.\n    if (Text.isText(node) && Text.isText(prevNode)) {\n      var rest = _objectWithoutProperties(node, _excluded);\n      position = prevNode.text.length;\n      properties = rest;\n    } else if (Element.isElement(node) && Element.isElement(prevNode)) {\n      var rest = _objectWithoutProperties(node, _excluded2);\n      position = prevNode.children.length;\n      properties = rest;\n    } else {\n      throw new Error(\"Cannot merge the node at path [\".concat(path, \"] with the previous sibling because it is not the same kind: \").concat(Scrubber.stringify(node), \" \").concat(Scrubber.stringify(prevNode)));\n    }\n    // If the node isn't already the next sibling of the previous node, move\n    // it so that it is before merging.\n    if (!isPreviousSibling) {\n      Transforms.moveNodes(editor, {\n        at: path,\n        to: newPath,\n        voids\n      });\n    }\n    // If there was going to be an empty ancestor of the node that was merged,\n    // we remove it from the tree.\n    if (emptyRef) {\n      Transforms.removeNodes(editor, {\n        at: emptyRef.current,\n        voids\n      });\n    }\n    if (Editor.shouldMergeNodesRemovePrevNode(editor, prev, current)) {\n      Transforms.removeNodes(editor, {\n        at: prevPath,\n        voids\n      });\n    } else {\n      editor.apply({\n        type: 'merge_node',\n        path: newPath,\n        position,\n        properties\n      });\n    }\n    if (emptyRef) {\n      emptyRef.unref();\n    }\n  });\n};\n\nvar moveNodes = (editor, options) => {\n  Editor.withoutNormalizing(editor, () => {\n    var {\n      to,\n      at = editor.selection,\n      mode = 'lowest',\n      voids = false\n    } = options;\n    var {\n      match\n    } = options;\n    if (!at) {\n      return;\n    }\n    if (match == null) {\n      match = Path.isPath(at) ? matchPath(editor, at) : n => Element.isElement(n) && Editor.isBlock(editor, n);\n    }\n    var toRef = Editor.pathRef(editor, to);\n    var targets = Editor.nodes(editor, {\n      at,\n      match,\n      mode,\n      voids\n    });\n    var pathRefs = Array.from(targets, _ref => {\n      var [, p] = _ref;\n      return Editor.pathRef(editor, p);\n    });\n    for (var pathRef of pathRefs) {\n      var path = pathRef.unref();\n      var newPath = toRef.current;\n      if (path.length !== 0) {\n        editor.apply({\n          type: 'move_node',\n          path,\n          newPath\n        });\n      }\n      if (toRef.current && Path.isSibling(newPath, path) && Path.isAfter(newPath, path)) {\n        // When performing a sibling move to a later index, the path at the destination is shifted\n        // to before the insertion point instead of after. To ensure our group of nodes are inserted\n        // in the correct order we increment toRef to account for that\n        toRef.current = Path.next(toRef.current);\n      }\n    }\n    toRef.unref();\n  });\n};\n\nvar removeNodes = function removeNodes(editor) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  Editor.withoutNormalizing(editor, () => {\n    var {\n      hanging = false,\n      voids = false,\n      mode = 'lowest'\n    } = options;\n    var {\n      at = editor.selection,\n      match\n    } = options;\n    if (!at) {\n      return;\n    }\n    if (match == null) {\n      match = Path.isPath(at) ? matchPath(editor, at) : n => Element.isElement(n) && Editor.isBlock(editor, n);\n    }\n    if (!hanging && Range.isRange(at)) {\n      at = Editor.unhangRange(editor, at, {\n        voids\n      });\n    }\n    var depths = Editor.nodes(editor, {\n      at,\n      match,\n      mode,\n      voids\n    });\n    var pathRefs = Array.from(depths, _ref => {\n      var [, p] = _ref;\n      return Editor.pathRef(editor, p);\n    });\n    for (var pathRef of pathRefs) {\n      var path = pathRef.unref();\n      if (path) {\n        var [node] = Editor.node(editor, path);\n        editor.apply({\n          type: 'remove_node',\n          path,\n          node\n        });\n      }\n    }\n  });\n};\n\nvar setNodes = function setNodes(editor, props) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Editor.withoutNormalizing(editor, () => {\n    var {\n      match,\n      at = editor.selection,\n      compare,\n      merge\n    } = options;\n    var {\n      hanging = false,\n      mode = 'lowest',\n      split = false,\n      voids = false\n    } = options;\n    if (!at) {\n      return;\n    }\n    if (match == null) {\n      match = Path.isPath(at) ? matchPath(editor, at) : n => Element.isElement(n) && Editor.isBlock(editor, n);\n    }\n    if (!hanging && Range.isRange(at)) {\n      at = Editor.unhangRange(editor, at, {\n        voids\n      });\n    }\n    if (split && Range.isRange(at)) {\n      if (Range.isCollapsed(at) && Editor.leaf(editor, at.anchor)[0].text.length > 0) {\n        // If the range is collapsed in a non-empty node and 'split' is true, there's nothing to\n        // set that won't get normalized away\n        return;\n      }\n      var rangeRef = Editor.rangeRef(editor, at, {\n        affinity: 'inward'\n      });\n      var [start, end] = Range.edges(at);\n      var splitMode = mode === 'lowest' ? 'lowest' : 'highest';\n      var endAtEndOfNode = Editor.isEnd(editor, end, end.path);\n      Transforms.splitNodes(editor, {\n        at: end,\n        match,\n        mode: splitMode,\n        voids,\n        always: !endAtEndOfNode\n      });\n      var startAtStartOfNode = Editor.isStart(editor, start, start.path);\n      Transforms.splitNodes(editor, {\n        at: start,\n        match,\n        mode: splitMode,\n        voids,\n        always: !startAtStartOfNode\n      });\n      at = rangeRef.unref();\n      if (options.at == null) {\n        Transforms.select(editor, at);\n      }\n    }\n    if (!compare) {\n      compare = (prop, nodeProp) => prop !== nodeProp;\n    }\n    for (var [node, path] of Editor.nodes(editor, {\n      at,\n      match,\n      mode,\n      voids\n    })) {\n      var properties = {};\n      // FIXME: is this correct?\n      var newProperties = {};\n      // You can't set properties on the editor node.\n      if (path.length === 0) {\n        continue;\n      }\n      var hasChanges = false;\n      for (var k in props) {\n        if (k === 'children' || k === 'text') {\n          continue;\n        }\n        if (compare(props[k], node[k])) {\n          hasChanges = true;\n          // Omit new properties from the old properties list\n          if (node.hasOwnProperty(k)) properties[k] = node[k];\n          // Omit properties that have been removed from the new properties list\n          if (merge) {\n            if (props[k] != null) newProperties[k] = merge(node[k], props[k]);\n          } else {\n            if (props[k] != null) newProperties[k] = props[k];\n          }\n        }\n      }\n      if (hasChanges) {\n        editor.apply({\n          type: 'set_node',\n          path,\n          properties,\n          newProperties\n        });\n      }\n    }\n  });\n};\n\n/**\n * Convert a range into a point by deleting it's content.\n */\nvar deleteRange = (editor, range) => {\n  if (Range.isCollapsed(range)) {\n    return range.anchor;\n  } else {\n    var [, end] = Range.edges(range);\n    var pointRef = Editor.pointRef(editor, end);\n    Transforms.delete(editor, {\n      at: range\n    });\n    return pointRef.unref();\n  }\n};\nvar splitNodes = function splitNodes(editor) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  Editor.withoutNormalizing(editor, () => {\n    var {\n      mode = 'lowest',\n      voids = false\n    } = options;\n    var {\n      match,\n      at = editor.selection,\n      height = 0,\n      always = false\n    } = options;\n    if (match == null) {\n      match = n => Element.isElement(n) && Editor.isBlock(editor, n);\n    }\n    if (Range.isRange(at)) {\n      at = deleteRange(editor, at);\n    }\n    // If the target is a path, the default height-skipping and position\n    // counters need to account for us potentially splitting at a non-leaf.\n    if (Path.isPath(at)) {\n      var path = at;\n      var point = Editor.point(editor, path);\n      var [parent] = Editor.parent(editor, path);\n      match = n => n === parent;\n      height = point.path.length - path.length + 1;\n      at = point;\n      always = true;\n    }\n    if (!at) {\n      return;\n    }\n    var beforeRef = Editor.pointRef(editor, at, {\n      affinity: 'backward'\n    });\n    var afterRef;\n    try {\n      var [highest] = Editor.nodes(editor, {\n        at,\n        match,\n        mode,\n        voids\n      });\n      if (!highest) {\n        return;\n      }\n      var voidMatch = Editor.void(editor, {\n        at,\n        mode: 'highest'\n      });\n      var nudge = 0;\n      if (!voids && voidMatch) {\n        var [voidNode, voidPath] = voidMatch;\n        if (Element.isElement(voidNode) && editor.isInline(voidNode)) {\n          var after = Editor.after(editor, voidPath);\n          if (!after) {\n            var text = {\n              text: ''\n            };\n            var afterPath = Path.next(voidPath);\n            Transforms.insertNodes(editor, text, {\n              at: afterPath,\n              voids\n            });\n            after = Editor.point(editor, afterPath);\n          }\n          at = after;\n          always = true;\n        }\n        var siblingHeight = at.path.length - voidPath.length;\n        height = siblingHeight + 1;\n        always = true;\n      }\n      afterRef = Editor.pointRef(editor, at);\n      var depth = at.path.length - height;\n      var [, highestPath] = highest;\n      var lowestPath = at.path.slice(0, depth);\n      var position = height === 0 ? at.offset : at.path[depth] + nudge;\n      for (var [node, _path] of Editor.levels(editor, {\n        at: lowestPath,\n        reverse: true,\n        voids\n      })) {\n        var split = false;\n        if (_path.length < highestPath.length || _path.length === 0 || !voids && Element.isElement(node) && Editor.isVoid(editor, node)) {\n          break;\n        }\n        var _point = beforeRef.current;\n        var isEnd = Editor.isEnd(editor, _point, _path);\n        if (always || !beforeRef || !Editor.isEdge(editor, _point, _path)) {\n          split = true;\n          var properties = Node.extractProps(node);\n          editor.apply({\n            type: 'split_node',\n            path: _path,\n            position,\n            properties\n          });\n        }\n        position = _path[_path.length - 1] + (split || isEnd ? 1 : 0);\n      }\n      if (options.at == null) {\n        var _point2 = afterRef.current || Editor.end(editor, []);\n        Transforms.select(editor, _point2);\n      }\n    } finally {\n      var _afterRef;\n      beforeRef.unref();\n      (_afterRef = afterRef) === null || _afterRef === void 0 || _afterRef.unref();\n    }\n  });\n};\n\nvar unsetNodes = function unsetNodes(editor, props) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  if (!Array.isArray(props)) {\n    props = [props];\n  }\n  var obj = {};\n  for (var key of props) {\n    obj[key] = null;\n  }\n  Transforms.setNodes(editor, obj, options);\n};\n\nvar unwrapNodes = function unwrapNodes(editor) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  Editor.withoutNormalizing(editor, () => {\n    var {\n      mode = 'lowest',\n      split = false,\n      voids = false\n    } = options;\n    var {\n      at = editor.selection,\n      match\n    } = options;\n    if (!at) {\n      return;\n    }\n    if (match == null) {\n      match = Path.isPath(at) ? matchPath(editor, at) : n => Element.isElement(n) && Editor.isBlock(editor, n);\n    }\n    if (Path.isPath(at)) {\n      at = Editor.range(editor, at);\n    }\n    var rangeRef = Range.isRange(at) ? Editor.rangeRef(editor, at) : null;\n    var matches = Editor.nodes(editor, {\n      at,\n      match,\n      mode,\n      voids\n    });\n    var pathRefs = Array.from(matches, _ref => {\n      var [, p] = _ref;\n      return Editor.pathRef(editor, p);\n    }\n    // unwrapNode will call liftNode which does not support splitting the node when nested.\n    // If we do not reverse the order and call it from top to the bottom, it will remove all blocks\n    // that wrap target node. So we reverse the order.\n    ).reverse();\n    var _loop = function _loop() {\n      var path = pathRef.unref();\n      var [node] = Editor.node(editor, path);\n      var range = Editor.range(editor, path);\n      if (split && rangeRef) {\n        range = Range.intersection(rangeRef.current, range);\n      }\n      Transforms.liftNodes(editor, {\n        at: range,\n        match: n => Element.isAncestor(node) && node.children.includes(n),\n        voids\n      });\n    };\n    for (var pathRef of pathRefs) {\n      _loop();\n    }\n    if (rangeRef) {\n      rangeRef.unref();\n    }\n  });\n};\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar wrapNodes = function wrapNodes(editor, element) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Editor.withoutNormalizing(editor, () => {\n    var {\n      mode = 'lowest',\n      split = false,\n      voids = false\n    } = options;\n    var {\n      match,\n      at = editor.selection\n    } = options;\n    if (!at) {\n      return;\n    }\n    if (match == null) {\n      if (Path.isPath(at)) {\n        match = matchPath(editor, at);\n      } else if (editor.isInline(element)) {\n        match = n => Element.isElement(n) && Editor.isInline(editor, n) || Text.isText(n);\n      } else {\n        match = n => Element.isElement(n) && Editor.isBlock(editor, n);\n      }\n    }\n    if (split && Range.isRange(at)) {\n      var [start, end] = Range.edges(at);\n      var rangeRef = Editor.rangeRef(editor, at, {\n        affinity: 'inward'\n      });\n      Transforms.splitNodes(editor, {\n        at: end,\n        match,\n        voids\n      });\n      Transforms.splitNodes(editor, {\n        at: start,\n        match,\n        voids\n      });\n      at = rangeRef.unref();\n      if (options.at == null) {\n        Transforms.select(editor, at);\n      }\n    }\n    var roots = Array.from(Editor.nodes(editor, {\n      at,\n      match: editor.isInline(element) ? n => Element.isElement(n) && Editor.isBlock(editor, n) : n => Editor.isEditor(n),\n      mode: 'lowest',\n      voids\n    }));\n    var _loop = function _loop() {\n        var a = Range.isRange(at) ? Range.intersection(at, Editor.range(editor, rootPath)) : at;\n        if (!a) {\n          return 0; // continue\n        }\n        var matches = Array.from(Editor.nodes(editor, {\n          at: a,\n          match,\n          mode,\n          voids\n        }));\n        if (matches.length > 0) {\n          var [first] = matches;\n          var last = matches[matches.length - 1];\n          var [, firstPath] = first;\n          var [, lastPath] = last;\n          if (firstPath.length === 0 && lastPath.length === 0) {\n            // if there's no matching parent - usually means the node is an editor - don't do anything\n            return 0; // continue\n          }\n          var commonPath = Path.equals(firstPath, lastPath) ? Path.parent(firstPath) : Path.common(firstPath, lastPath);\n          var range = Editor.range(editor, firstPath, lastPath);\n          var commonNodeEntry = Editor.node(editor, commonPath);\n          var [commonNode] = commonNodeEntry;\n          var depth = commonPath.length + 1;\n          var wrapperPath = Path.next(lastPath.slice(0, depth));\n          var wrapper = _objectSpread(_objectSpread({}, element), {}, {\n            children: []\n          });\n          Transforms.insertNodes(editor, wrapper, {\n            at: wrapperPath,\n            voids\n          });\n          Transforms.moveNodes(editor, {\n            at: range,\n            match: n => Element.isAncestor(commonNode) && commonNode.children.includes(n),\n            to: wrapperPath.concat(0),\n            voids\n          });\n        }\n      },\n      _ret;\n    for (var [, rootPath] of roots) {\n      _ret = _loop();\n      if (_ret === 0) continue;\n    }\n  });\n};\n\n/**\n * Create a new Slate `Editor` object.\n */\nvar createEditor = () => {\n  var editor = {\n    children: [],\n    operations: [],\n    selection: null,\n    marks: null,\n    isElementReadOnly: () => false,\n    isInline: () => false,\n    isSelectable: () => true,\n    isVoid: () => false,\n    markableVoid: () => false,\n    onChange: () => {},\n    // Core\n    apply: function apply$1() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      return apply(editor, ...args);\n    },\n    // Editor\n    addMark: function addMark$1() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      return addMark(editor, ...args);\n    },\n    deleteBackward: function deleteBackward$1() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n      return deleteBackward(editor, ...args);\n    },\n    deleteForward: function deleteForward$1() {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n      return deleteForward(editor, ...args);\n    },\n    deleteFragment: function deleteFragment$1() {\n      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        args[_key5] = arguments[_key5];\n      }\n      return deleteFragment(editor, ...args);\n    },\n    getFragment: function getFragment$1() {\n      for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n        args[_key6] = arguments[_key6];\n      }\n      return getFragment(editor, ...args);\n    },\n    insertBreak: function insertBreak$1() {\n      for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n        args[_key7] = arguments[_key7];\n      }\n      return insertBreak(editor, ...args);\n    },\n    insertSoftBreak: function insertSoftBreak$1() {\n      for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n        args[_key8] = arguments[_key8];\n      }\n      return insertSoftBreak(editor, ...args);\n    },\n    insertFragment: function insertFragment$1() {\n      for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {\n        args[_key9] = arguments[_key9];\n      }\n      return insertFragment(editor, ...args);\n    },\n    insertNode: function insertNode$1() {\n      for (var _len10 = arguments.length, args = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {\n        args[_key10] = arguments[_key10];\n      }\n      return insertNode(editor, ...args);\n    },\n    insertText: function insertText$1() {\n      for (var _len11 = arguments.length, args = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {\n        args[_key11] = arguments[_key11];\n      }\n      return insertText(editor, ...args);\n    },\n    normalizeNode: function normalizeNode$1() {\n      for (var _len12 = arguments.length, args = new Array(_len12), _key12 = 0; _key12 < _len12; _key12++) {\n        args[_key12] = arguments[_key12];\n      }\n      return normalizeNode(editor, ...args);\n    },\n    removeMark: function removeMark$1() {\n      for (var _len13 = arguments.length, args = new Array(_len13), _key13 = 0; _key13 < _len13; _key13++) {\n        args[_key13] = arguments[_key13];\n      }\n      return removeMark(editor, ...args);\n    },\n    getDirtyPaths: function getDirtyPaths$1() {\n      for (var _len14 = arguments.length, args = new Array(_len14), _key14 = 0; _key14 < _len14; _key14++) {\n        args[_key14] = arguments[_key14];\n      }\n      return getDirtyPaths(editor, ...args);\n    },\n    shouldNormalize: function shouldNormalize$1() {\n      for (var _len15 = arguments.length, args = new Array(_len15), _key15 = 0; _key15 < _len15; _key15++) {\n        args[_key15] = arguments[_key15];\n      }\n      return shouldNormalize(editor, ...args);\n    },\n    // Editor interface\n    above: function above$1() {\n      for (var _len16 = arguments.length, args = new Array(_len16), _key16 = 0; _key16 < _len16; _key16++) {\n        args[_key16] = arguments[_key16];\n      }\n      return above(editor, ...args);\n    },\n    after: function after$1() {\n      for (var _len17 = arguments.length, args = new Array(_len17), _key17 = 0; _key17 < _len17; _key17++) {\n        args[_key17] = arguments[_key17];\n      }\n      return after(editor, ...args);\n    },\n    before: function before$1() {\n      for (var _len18 = arguments.length, args = new Array(_len18), _key18 = 0; _key18 < _len18; _key18++) {\n        args[_key18] = arguments[_key18];\n      }\n      return before(editor, ...args);\n    },\n    collapse: function collapse$1() {\n      for (var _len19 = arguments.length, args = new Array(_len19), _key19 = 0; _key19 < _len19; _key19++) {\n        args[_key19] = arguments[_key19];\n      }\n      return collapse(editor, ...args);\n    },\n    delete: function _delete() {\n      for (var _len20 = arguments.length, args = new Array(_len20), _key20 = 0; _key20 < _len20; _key20++) {\n        args[_key20] = arguments[_key20];\n      }\n      return deleteText(editor, ...args);\n    },\n    deselect: function deselect$1() {\n      for (var _len21 = arguments.length, args = new Array(_len21), _key21 = 0; _key21 < _len21; _key21++) {\n        args[_key21] = arguments[_key21];\n      }\n      return deselect(editor, ...args);\n    },\n    edges: function edges$1() {\n      for (var _len22 = arguments.length, args = new Array(_len22), _key22 = 0; _key22 < _len22; _key22++) {\n        args[_key22] = arguments[_key22];\n      }\n      return edges(editor, ...args);\n    },\n    elementReadOnly: function elementReadOnly$1() {\n      for (var _len23 = arguments.length, args = new Array(_len23), _key23 = 0; _key23 < _len23; _key23++) {\n        args[_key23] = arguments[_key23];\n      }\n      return elementReadOnly(editor, ...args);\n    },\n    end: function end$1() {\n      for (var _len24 = arguments.length, args = new Array(_len24), _key24 = 0; _key24 < _len24; _key24++) {\n        args[_key24] = arguments[_key24];\n      }\n      return end(editor, ...args);\n    },\n    first: function first$1() {\n      for (var _len25 = arguments.length, args = new Array(_len25), _key25 = 0; _key25 < _len25; _key25++) {\n        args[_key25] = arguments[_key25];\n      }\n      return first(editor, ...args);\n    },\n    fragment: function fragment$1() {\n      for (var _len26 = arguments.length, args = new Array(_len26), _key26 = 0; _key26 < _len26; _key26++) {\n        args[_key26] = arguments[_key26];\n      }\n      return fragment(editor, ...args);\n    },\n    getMarks: function getMarks() {\n      for (var _len27 = arguments.length, args = new Array(_len27), _key27 = 0; _key27 < _len27; _key27++) {\n        args[_key27] = arguments[_key27];\n      }\n      return marks(editor, ...args);\n    },\n    hasBlocks: function hasBlocks$1() {\n      for (var _len28 = arguments.length, args = new Array(_len28), _key28 = 0; _key28 < _len28; _key28++) {\n        args[_key28] = arguments[_key28];\n      }\n      return hasBlocks(editor, ...args);\n    },\n    hasInlines: function hasInlines$1() {\n      for (var _len29 = arguments.length, args = new Array(_len29), _key29 = 0; _key29 < _len29; _key29++) {\n        args[_key29] = arguments[_key29];\n      }\n      return hasInlines(editor, ...args);\n    },\n    hasPath: function hasPath$1() {\n      for (var _len30 = arguments.length, args = new Array(_len30), _key30 = 0; _key30 < _len30; _key30++) {\n        args[_key30] = arguments[_key30];\n      }\n      return hasPath(editor, ...args);\n    },\n    hasTexts: function hasTexts$1() {\n      for (var _len31 = arguments.length, args = new Array(_len31), _key31 = 0; _key31 < _len31; _key31++) {\n        args[_key31] = arguments[_key31];\n      }\n      return hasTexts(editor, ...args);\n    },\n    insertNodes: function insertNodes$1() {\n      for (var _len32 = arguments.length, args = new Array(_len32), _key32 = 0; _key32 < _len32; _key32++) {\n        args[_key32] = arguments[_key32];\n      }\n      return insertNodes(editor, ...args);\n    },\n    isBlock: function isBlock$1() {\n      for (var _len33 = arguments.length, args = new Array(_len33), _key33 = 0; _key33 < _len33; _key33++) {\n        args[_key33] = arguments[_key33];\n      }\n      return isBlock(editor, ...args);\n    },\n    isEdge: function isEdge$1() {\n      for (var _len34 = arguments.length, args = new Array(_len34), _key34 = 0; _key34 < _len34; _key34++) {\n        args[_key34] = arguments[_key34];\n      }\n      return isEdge(editor, ...args);\n    },\n    isEmpty: function isEmpty$1() {\n      for (var _len35 = arguments.length, args = new Array(_len35), _key35 = 0; _key35 < _len35; _key35++) {\n        args[_key35] = arguments[_key35];\n      }\n      return isEmpty(editor, ...args);\n    },\n    isEnd: function isEnd$1() {\n      for (var _len36 = arguments.length, args = new Array(_len36), _key36 = 0; _key36 < _len36; _key36++) {\n        args[_key36] = arguments[_key36];\n      }\n      return isEnd(editor, ...args);\n    },\n    isNormalizing: function isNormalizing$1() {\n      for (var _len37 = arguments.length, args = new Array(_len37), _key37 = 0; _key37 < _len37; _key37++) {\n        args[_key37] = arguments[_key37];\n      }\n      return isNormalizing(editor, ...args);\n    },\n    isStart: function isStart$1() {\n      for (var _len38 = arguments.length, args = new Array(_len38), _key38 = 0; _key38 < _len38; _key38++) {\n        args[_key38] = arguments[_key38];\n      }\n      return isStart(editor, ...args);\n    },\n    last: function last$1() {\n      for (var _len39 = arguments.length, args = new Array(_len39), _key39 = 0; _key39 < _len39; _key39++) {\n        args[_key39] = arguments[_key39];\n      }\n      return last(editor, ...args);\n    },\n    leaf: function leaf$1() {\n      for (var _len40 = arguments.length, args = new Array(_len40), _key40 = 0; _key40 < _len40; _key40++) {\n        args[_key40] = arguments[_key40];\n      }\n      return leaf(editor, ...args);\n    },\n    levels: function levels$1() {\n      for (var _len41 = arguments.length, args = new Array(_len41), _key41 = 0; _key41 < _len41; _key41++) {\n        args[_key41] = arguments[_key41];\n      }\n      return levels(editor, ...args);\n    },\n    liftNodes: function liftNodes$1() {\n      for (var _len42 = arguments.length, args = new Array(_len42), _key42 = 0; _key42 < _len42; _key42++) {\n        args[_key42] = arguments[_key42];\n      }\n      return liftNodes(editor, ...args);\n    },\n    mergeNodes: function mergeNodes$1() {\n      for (var _len43 = arguments.length, args = new Array(_len43), _key43 = 0; _key43 < _len43; _key43++) {\n        args[_key43] = arguments[_key43];\n      }\n      return mergeNodes(editor, ...args);\n    },\n    move: function move$1() {\n      for (var _len44 = arguments.length, args = new Array(_len44), _key44 = 0; _key44 < _len44; _key44++) {\n        args[_key44] = arguments[_key44];\n      }\n      return move(editor, ...args);\n    },\n    moveNodes: function moveNodes$1() {\n      for (var _len45 = arguments.length, args = new Array(_len45), _key45 = 0; _key45 < _len45; _key45++) {\n        args[_key45] = arguments[_key45];\n      }\n      return moveNodes(editor, ...args);\n    },\n    next: function next$1() {\n      for (var _len46 = arguments.length, args = new Array(_len46), _key46 = 0; _key46 < _len46; _key46++) {\n        args[_key46] = arguments[_key46];\n      }\n      return next(editor, ...args);\n    },\n    node: function node$1() {\n      for (var _len47 = arguments.length, args = new Array(_len47), _key47 = 0; _key47 < _len47; _key47++) {\n        args[_key47] = arguments[_key47];\n      }\n      return node(editor, ...args);\n    },\n    nodes: function nodes$1() {\n      for (var _len48 = arguments.length, args = new Array(_len48), _key48 = 0; _key48 < _len48; _key48++) {\n        args[_key48] = arguments[_key48];\n      }\n      return nodes(editor, ...args);\n    },\n    normalize: function normalize$1() {\n      for (var _len49 = arguments.length, args = new Array(_len49), _key49 = 0; _key49 < _len49; _key49++) {\n        args[_key49] = arguments[_key49];\n      }\n      return normalize(editor, ...args);\n    },\n    parent: function parent$1() {\n      for (var _len50 = arguments.length, args = new Array(_len50), _key50 = 0; _key50 < _len50; _key50++) {\n        args[_key50] = arguments[_key50];\n      }\n      return parent(editor, ...args);\n    },\n    path: function path$1() {\n      for (var _len51 = arguments.length, args = new Array(_len51), _key51 = 0; _key51 < _len51; _key51++) {\n        args[_key51] = arguments[_key51];\n      }\n      return path(editor, ...args);\n    },\n    pathRef: function pathRef$1() {\n      for (var _len52 = arguments.length, args = new Array(_len52), _key52 = 0; _key52 < _len52; _key52++) {\n        args[_key52] = arguments[_key52];\n      }\n      return pathRef(editor, ...args);\n    },\n    pathRefs: function pathRefs$1() {\n      for (var _len53 = arguments.length, args = new Array(_len53), _key53 = 0; _key53 < _len53; _key53++) {\n        args[_key53] = arguments[_key53];\n      }\n      return pathRefs(editor, ...args);\n    },\n    point: function point$1() {\n      for (var _len54 = arguments.length, args = new Array(_len54), _key54 = 0; _key54 < _len54; _key54++) {\n        args[_key54] = arguments[_key54];\n      }\n      return point(editor, ...args);\n    },\n    pointRef: function pointRef$1() {\n      for (var _len55 = arguments.length, args = new Array(_len55), _key55 = 0; _key55 < _len55; _key55++) {\n        args[_key55] = arguments[_key55];\n      }\n      return pointRef(editor, ...args);\n    },\n    pointRefs: function pointRefs$1() {\n      for (var _len56 = arguments.length, args = new Array(_len56), _key56 = 0; _key56 < _len56; _key56++) {\n        args[_key56] = arguments[_key56];\n      }\n      return pointRefs(editor, ...args);\n    },\n    positions: function positions$1() {\n      for (var _len57 = arguments.length, args = new Array(_len57), _key57 = 0; _key57 < _len57; _key57++) {\n        args[_key57] = arguments[_key57];\n      }\n      return positions(editor, ...args);\n    },\n    previous: function previous$1() {\n      for (var _len58 = arguments.length, args = new Array(_len58), _key58 = 0; _key58 < _len58; _key58++) {\n        args[_key58] = arguments[_key58];\n      }\n      return previous(editor, ...args);\n    },\n    range: function range$1() {\n      for (var _len59 = arguments.length, args = new Array(_len59), _key59 = 0; _key59 < _len59; _key59++) {\n        args[_key59] = arguments[_key59];\n      }\n      return range(editor, ...args);\n    },\n    rangeRef: function rangeRef$1() {\n      for (var _len60 = arguments.length, args = new Array(_len60), _key60 = 0; _key60 < _len60; _key60++) {\n        args[_key60] = arguments[_key60];\n      }\n      return rangeRef(editor, ...args);\n    },\n    rangeRefs: function rangeRefs$1() {\n      for (var _len61 = arguments.length, args = new Array(_len61), _key61 = 0; _key61 < _len61; _key61++) {\n        args[_key61] = arguments[_key61];\n      }\n      return rangeRefs(editor, ...args);\n    },\n    removeNodes: function removeNodes$1() {\n      for (var _len62 = arguments.length, args = new Array(_len62), _key62 = 0; _key62 < _len62; _key62++) {\n        args[_key62] = arguments[_key62];\n      }\n      return removeNodes(editor, ...args);\n    },\n    select: function select$1() {\n      for (var _len63 = arguments.length, args = new Array(_len63), _key63 = 0; _key63 < _len63; _key63++) {\n        args[_key63] = arguments[_key63];\n      }\n      return select(editor, ...args);\n    },\n    setNodes: function setNodes$1() {\n      for (var _len64 = arguments.length, args = new Array(_len64), _key64 = 0; _key64 < _len64; _key64++) {\n        args[_key64] = arguments[_key64];\n      }\n      return setNodes(editor, ...args);\n    },\n    setNormalizing: function setNormalizing$1() {\n      for (var _len65 = arguments.length, args = new Array(_len65), _key65 = 0; _key65 < _len65; _key65++) {\n        args[_key65] = arguments[_key65];\n      }\n      return setNormalizing(editor, ...args);\n    },\n    setPoint: function setPoint$1() {\n      for (var _len66 = arguments.length, args = new Array(_len66), _key66 = 0; _key66 < _len66; _key66++) {\n        args[_key66] = arguments[_key66];\n      }\n      return setPoint(editor, ...args);\n    },\n    setSelection: function setSelection$1() {\n      for (var _len67 = arguments.length, args = new Array(_len67), _key67 = 0; _key67 < _len67; _key67++) {\n        args[_key67] = arguments[_key67];\n      }\n      return setSelection(editor, ...args);\n    },\n    splitNodes: function splitNodes$1() {\n      for (var _len68 = arguments.length, args = new Array(_len68), _key68 = 0; _key68 < _len68; _key68++) {\n        args[_key68] = arguments[_key68];\n      }\n      return splitNodes(editor, ...args);\n    },\n    start: function start$1() {\n      for (var _len69 = arguments.length, args = new Array(_len69), _key69 = 0; _key69 < _len69; _key69++) {\n        args[_key69] = arguments[_key69];\n      }\n      return start(editor, ...args);\n    },\n    string: function string$1() {\n      for (var _len70 = arguments.length, args = new Array(_len70), _key70 = 0; _key70 < _len70; _key70++) {\n        args[_key70] = arguments[_key70];\n      }\n      return string(editor, ...args);\n    },\n    unhangRange: function unhangRange$1() {\n      for (var _len71 = arguments.length, args = new Array(_len71), _key71 = 0; _key71 < _len71; _key71++) {\n        args[_key71] = arguments[_key71];\n      }\n      return unhangRange(editor, ...args);\n    },\n    unsetNodes: function unsetNodes$1() {\n      for (var _len72 = arguments.length, args = new Array(_len72), _key72 = 0; _key72 < _len72; _key72++) {\n        args[_key72] = arguments[_key72];\n      }\n      return unsetNodes(editor, ...args);\n    },\n    unwrapNodes: function unwrapNodes$1() {\n      for (var _len73 = arguments.length, args = new Array(_len73), _key73 = 0; _key73 < _len73; _key73++) {\n        args[_key73] = arguments[_key73];\n      }\n      return unwrapNodes(editor, ...args);\n    },\n    void: function _void() {\n      for (var _len74 = arguments.length, args = new Array(_len74), _key74 = 0; _key74 < _len74; _key74++) {\n        args[_key74] = arguments[_key74];\n      }\n      return getVoid(editor, ...args);\n    },\n    withoutNormalizing: function withoutNormalizing$1() {\n      for (var _len75 = arguments.length, args = new Array(_len75), _key75 = 0; _key75 < _len75; _key75++) {\n        args[_key75] = arguments[_key75];\n      }\n      return withoutNormalizing(editor, ...args);\n    },\n    wrapNodes: function wrapNodes$1() {\n      for (var _len76 = arguments.length, args = new Array(_len76), _key76 = 0; _key76 < _len76; _key76++) {\n        args[_key76] = arguments[_key76];\n      }\n      return wrapNodes(editor, ...args);\n    },\n    shouldMergeNodesRemovePrevNode: function shouldMergeNodesRemovePrevNode$1() {\n      for (var _len77 = arguments.length, args = new Array(_len77), _key77 = 0; _key77 < _len77; _key77++) {\n        args[_key77] = arguments[_key77];\n      }\n      return shouldMergeNodesRemovePrevNode(editor, ...args);\n    }\n  };\n  return editor;\n};\n\nexport { Editor, Element, Location, Node, Operation, Path, PathRef, Point, PointRef, Range, RangeRef, Scrubber, Span, Text, Transforms, above, addMark, after, apply, before, collapse, createEditor, deleteBackward, deleteForward, deleteFragment, deleteText, deselect, edges, elementReadOnly, end, first, fragment, getDirtyPaths, getFragment, getVoid, hasBlocks, hasInlines, hasPath, hasTexts, insertBreak, insertFragment, insertNode, insertNodes, insertSoftBreak, insertText, isBlock, isEdge, isEditor, isEmpty, isEnd, isNormalizing, isStart, last, leaf, levels, liftNodes, marks, mergeNodes, move, moveNodes, next, node, nodes, normalize, normalizeNode, parent, path, pathRef, pathRefs, point, pointRef, pointRefs, positions, previous, range, rangeRef, rangeRefs, removeMark, removeNodes, select, setNodes, setNormalizing, setPoint, setSelection, shouldMergeNodesRemovePrevNode, shouldNormalize, splitNodes, start, string, unhangRange, unsetNodes, unwrapNodes, withoutNormalizing, wrapNodes };\n//# sourceMappingURL=index.es.js.map\n","var resizeObservers = [];\nexport { resizeObservers };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasActiveObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.activeTargets.length > 0; });\n};\nexport { hasActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasSkippedObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.skippedTargets.length > 0; });\n};\nexport { hasSkippedObservations };\n","var msg = 'ResizeObserver loop completed with undelivered notifications.';\nvar deliverResizeLoopError = function () {\n    var event;\n    if (typeof ErrorEvent === 'function') {\n        event = new ErrorEvent('error', {\n            message: msg\n        });\n    }\n    else {\n        event = document.createEvent('Event');\n        event.initEvent('error', false, false);\n        event.message = msg;\n    }\n    window.dispatchEvent(event);\n};\nexport { deliverResizeLoopError };\n","var ResizeObserverBoxOptions;\n(function (ResizeObserverBoxOptions) {\n    ResizeObserverBoxOptions[\"BORDER_BOX\"] = \"border-box\";\n    ResizeObserverBoxOptions[\"CONTENT_BOX\"] = \"content-box\";\n    ResizeObserverBoxOptions[\"DEVICE_PIXEL_CONTENT_BOX\"] = \"device-pixel-content-box\";\n})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));\nexport { ResizeObserverBoxOptions };\n","export var freeze = function (obj) { return Object.freeze(obj); };\n","import { freeze } from './utils/freeze';\nvar ResizeObserverSize = (function () {\n    function ResizeObserverSize(inlineSize, blockSize) {\n        this.inlineSize = inlineSize;\n        this.blockSize = blockSize;\n        freeze(this);\n    }\n    return ResizeObserverSize;\n}());\nexport { ResizeObserverSize };\n","import { freeze } from './utils/freeze';\nvar DOMRectReadOnly = (function () {\n    function DOMRectReadOnly(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.top = this.y;\n        this.left = this.x;\n        this.bottom = this.top + this.height;\n        this.right = this.left + this.width;\n        return freeze(this);\n    }\n    DOMRectReadOnly.prototype.toJSON = function () {\n        var _a = this, x = _a.x, y = _a.y, top = _a.top, right = _a.right, bottom = _a.bottom, left = _a.left, width = _a.width, height = _a.height;\n        return { x: x, y: y, top: top, right: right, bottom: bottom, left: left, width: width, height: height };\n    };\n    DOMRectReadOnly.fromRect = function (rectangle) {\n        return new DOMRectReadOnly(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n    };\n    return DOMRectReadOnly;\n}());\nexport { DOMRectReadOnly };\n","var isSVG = function (target) { return target instanceof SVGElement && 'getBBox' in target; };\nvar isHidden = function (target) {\n    if (isSVG(target)) {\n        var _a = target.getBBox(), width = _a.width, height = _a.height;\n        return !width && !height;\n    }\n    var _b = target, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;\n    return !(offsetWidth || offsetHeight || target.getClientRects().length);\n};\nvar isElement = function (obj) {\n    var _a;\n    if (obj instanceof Element) {\n        return true;\n    }\n    var scope = (_a = obj === null || obj === void 0 ? void 0 : obj.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView;\n    return !!(scope && obj instanceof scope.Element);\n};\nvar isReplacedElement = function (target) {\n    switch (target.tagName) {\n        case 'INPUT':\n            if (target.type !== 'image') {\n                break;\n            }\n        case 'VIDEO':\n        case 'AUDIO':\n        case 'EMBED':\n        case 'OBJECT':\n        case 'CANVAS':\n        case 'IFRAME':\n        case 'IMG':\n            return true;\n    }\n    return false;\n};\nexport { isSVG, isHidden, isElement, isReplacedElement };\n","export var global = typeof window !== 'undefined' ? window : {};\n","import { ResizeObserverBoxOptions } from '../ResizeObserverBoxOptions';\nimport { ResizeObserverSize } from '../ResizeObserverSize';\nimport { DOMRectReadOnly } from '../DOMRectReadOnly';\nimport { isSVG, isHidden } from '../utils/element';\nimport { freeze } from '../utils/freeze';\nimport { global } from '../utils/global';\nvar cache = new WeakMap();\nvar scrollRegexp = /auto|scroll/;\nvar verticalRegexp = /^tb|vertical/;\nvar IE = (/msie|trident/i).test(global.navigator && global.navigator.userAgent);\nvar parseDimension = function (pixel) { return parseFloat(pixel || '0'); };\nvar size = function (inlineSize, blockSize, switchSizes) {\n    if (inlineSize === void 0) { inlineSize = 0; }\n    if (blockSize === void 0) { blockSize = 0; }\n    if (switchSizes === void 0) { switchSizes = false; }\n    return new ResizeObserverSize((switchSizes ? blockSize : inlineSize) || 0, (switchSizes ? inlineSize : blockSize) || 0);\n};\nvar zeroBoxes = freeze({\n    devicePixelContentBoxSize: size(),\n    borderBoxSize: size(),\n    contentBoxSize: size(),\n    contentRect: new DOMRectReadOnly(0, 0, 0, 0)\n});\nvar calculateBoxSizes = function (target, forceRecalculation) {\n    if (forceRecalculation === void 0) { forceRecalculation = false; }\n    if (cache.has(target) && !forceRecalculation) {\n        return cache.get(target);\n    }\n    if (isHidden(target)) {\n        cache.set(target, zeroBoxes);\n        return zeroBoxes;\n    }\n    var cs = getComputedStyle(target);\n    var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();\n    var removePadding = !IE && cs.boxSizing === 'border-box';\n    var switchSizes = verticalRegexp.test(cs.writingMode || '');\n    var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || '');\n    var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || '');\n    var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);\n    var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);\n    var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);\n    var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);\n    var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);\n    var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);\n    var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);\n    var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);\n    var horizontalPadding = paddingLeft + paddingRight;\n    var verticalPadding = paddingTop + paddingBottom;\n    var horizontalBorderArea = borderLeft + borderRight;\n    var verticalBorderArea = borderTop + borderBottom;\n    var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;\n    var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;\n    var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;\n    var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;\n    var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;\n    var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;\n    var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;\n    var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;\n    var boxes = freeze({\n        devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),\n        borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),\n        contentBoxSize: size(contentWidth, contentHeight, switchSizes),\n        contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)\n    });\n    cache.set(target, boxes);\n    return boxes;\n};\nvar calculateBoxSize = function (target, observedBox, forceRecalculation) {\n    var _a = calculateBoxSizes(target, forceRecalculation), borderBoxSize = _a.borderBoxSize, contentBoxSize = _a.contentBoxSize, devicePixelContentBoxSize = _a.devicePixelContentBoxSize;\n    switch (observedBox) {\n        case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:\n            return devicePixelContentBoxSize;\n        case ResizeObserverBoxOptions.BORDER_BOX:\n            return borderBoxSize;\n        default:\n            return contentBoxSize;\n    }\n};\nexport { calculateBoxSize, calculateBoxSizes };\n","import { calculateBoxSizes } from './algorithms/calculateBoxSize';\nimport { freeze } from './utils/freeze';\nvar ResizeObserverEntry = (function () {\n    function ResizeObserverEntry(target) {\n        var boxes = calculateBoxSizes(target);\n        this.target = target;\n        this.contentRect = boxes.contentRect;\n        this.borderBoxSize = freeze([boxes.borderBoxSize]);\n        this.contentBoxSize = freeze([boxes.contentBoxSize]);\n        this.devicePixelContentBoxSize = freeze([boxes.devicePixelContentBoxSize]);\n    }\n    return ResizeObserverEntry;\n}());\nexport { ResizeObserverEntry };\n","import { isHidden } from '../utils/element';\nvar calculateDepthForNode = function (node) {\n    if (isHidden(node)) {\n        return Infinity;\n    }\n    var depth = 0;\n    var parent = node.parentNode;\n    while (parent) {\n        depth += 1;\n        parent = parent.parentNode;\n    }\n    return depth;\n};\nexport { calculateDepthForNode };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { ResizeObserverEntry } from '../ResizeObserverEntry';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nimport { calculateBoxSize } from './calculateBoxSize';\nvar broadcastActiveObservations = function () {\n    var shallowestDepth = Infinity;\n    var callbacks = [];\n    resizeObservers.forEach(function processObserver(ro) {\n        if (ro.activeTargets.length === 0) {\n            return;\n        }\n        var entries = [];\n        ro.activeTargets.forEach(function processTarget(ot) {\n            var entry = new ResizeObserverEntry(ot.target);\n            var targetDepth = calculateDepthForNode(ot.target);\n            entries.push(entry);\n            ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);\n            if (targetDepth < shallowestDepth) {\n                shallowestDepth = targetDepth;\n            }\n        });\n        callbacks.push(function resizeObserverCallback() {\n            ro.callback.call(ro.observer, entries, ro.observer);\n        });\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n    });\n    for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {\n        var callback = callbacks_1[_i];\n        callback();\n    }\n    return shallowestDepth;\n};\nexport { broadcastActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nvar gatherActiveObservationsAtDepth = function (depth) {\n    resizeObservers.forEach(function processObserver(ro) {\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n        ro.skippedTargets.splice(0, ro.skippedTargets.length);\n        ro.observationTargets.forEach(function processTarget(ot) {\n            if (ot.isActive()) {\n                if (calculateDepthForNode(ot.target) > depth) {\n                    ro.activeTargets.push(ot);\n                }\n                else {\n                    ro.skippedTargets.push(ot);\n                }\n            }\n        });\n    });\n};\nexport { gatherActiveObservationsAtDepth };\n","import { hasActiveObservations } from '../algorithms/hasActiveObservations';\nimport { hasSkippedObservations } from '../algorithms/hasSkippedObservations';\nimport { deliverResizeLoopError } from '../algorithms/deliverResizeLoopError';\nimport { broadcastActiveObservations } from '../algorithms/broadcastActiveObservations';\nimport { gatherActiveObservationsAtDepth } from '../algorithms/gatherActiveObservationsAtDepth';\nvar process = function () {\n    var depth = 0;\n    gatherActiveObservationsAtDepth(depth);\n    while (hasActiveObservations()) {\n        depth = broadcastActiveObservations();\n        gatherActiveObservationsAtDepth(depth);\n    }\n    if (hasSkippedObservations()) {\n        deliverResizeLoopError();\n    }\n    return depth > 0;\n};\nexport { process };\n","var trigger;\nvar callbacks = [];\nvar notify = function () { return callbacks.splice(0).forEach(function (cb) { return cb(); }); };\nvar queueMicroTask = function (callback) {\n    if (!trigger) {\n        var toggle_1 = 0;\n        var el_1 = document.createTextNode('');\n        var config = { characterData: true };\n        new MutationObserver(function () { return notify(); }).observe(el_1, config);\n        trigger = function () { el_1.textContent = \"\".concat(toggle_1 ? toggle_1-- : toggle_1++); };\n    }\n    callbacks.push(callback);\n    trigger();\n};\nexport { queueMicroTask };\n","import { queueMicroTask } from './queueMicroTask';\nvar queueResizeObserver = function (cb) {\n    queueMicroTask(function ResizeObserver() {\n        requestAnimationFrame(cb);\n    });\n};\nexport { queueResizeObserver };\n","import { process } from './process';\nimport { global } from './global';\nimport { queueResizeObserver } from './queueResizeObserver';\nvar watching = 0;\nvar isWatching = function () { return !!watching; };\nvar CATCH_PERIOD = 250;\nvar observerConfig = { attributes: true, characterData: true, childList: true, subtree: true };\nvar events = [\n    'resize',\n    'load',\n    'transitionend',\n    'animationend',\n    'animationstart',\n    'animationiteration',\n    'keyup',\n    'keydown',\n    'mouseup',\n    'mousedown',\n    'mouseover',\n    'mouseout',\n    'blur',\n    'focus'\n];\nvar time = function (timeout) {\n    if (timeout === void 0) { timeout = 0; }\n    return Date.now() + timeout;\n};\nvar scheduled = false;\nvar Scheduler = (function () {\n    function Scheduler() {\n        var _this = this;\n        this.stopped = true;\n        this.listener = function () { return _this.schedule(); };\n    }\n    Scheduler.prototype.run = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = CATCH_PERIOD; }\n        if (scheduled) {\n            return;\n        }\n        scheduled = true;\n        var until = time(timeout);\n        queueResizeObserver(function () {\n            var elementsHaveResized = false;\n            try {\n                elementsHaveResized = process();\n            }\n            finally {\n                scheduled = false;\n                timeout = until - time();\n                if (!isWatching()) {\n                    return;\n                }\n                if (elementsHaveResized) {\n                    _this.run(1000);\n                }\n                else if (timeout > 0) {\n                    _this.run(timeout);\n                }\n                else {\n                    _this.start();\n                }\n            }\n        });\n    };\n    Scheduler.prototype.schedule = function () {\n        this.stop();\n        this.run();\n    };\n    Scheduler.prototype.observe = function () {\n        var _this = this;\n        var cb = function () { return _this.observer && _this.observer.observe(document.body, observerConfig); };\n        document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n    };\n    Scheduler.prototype.start = function () {\n        var _this = this;\n        if (this.stopped) {\n            this.stopped = false;\n            this.observer = new MutationObserver(this.listener);\n            this.observe();\n            events.forEach(function (name) { return global.addEventListener(name, _this.listener, true); });\n        }\n    };\n    Scheduler.prototype.stop = function () {\n        var _this = this;\n        if (!this.stopped) {\n            this.observer && this.observer.disconnect();\n            events.forEach(function (name) { return global.removeEventListener(name, _this.listener, true); });\n            this.stopped = true;\n        }\n    };\n    return Scheduler;\n}());\nvar scheduler = new Scheduler();\nvar updateCount = function (n) {\n    !watching && n > 0 && scheduler.start();\n    watching += n;\n    !watching && scheduler.stop();\n};\nexport { scheduler, updateCount };\n","import { ResizeObserverBoxOptions } from './ResizeObserverBoxOptions';\nimport { calculateBoxSize } from './algorithms/calculateBoxSize';\nimport { isSVG, isReplacedElement } from './utils/element';\nvar skipNotifyOnElement = function (target) {\n    return !isSVG(target)\n        && !isReplacedElement(target)\n        && getComputedStyle(target).display === 'inline';\n};\nvar ResizeObservation = (function () {\n    function ResizeObservation(target, observedBox) {\n        this.target = target;\n        this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;\n        this.lastReportedSize = {\n            inlineSize: 0,\n            blockSize: 0\n        };\n    }\n    ResizeObservation.prototype.isActive = function () {\n        var size = calculateBoxSize(this.target, this.observedBox, true);\n        if (skipNotifyOnElement(this.target)) {\n            this.lastReportedSize = size;\n        }\n        if (this.lastReportedSize.inlineSize !== size.inlineSize\n            || this.lastReportedSize.blockSize !== size.blockSize) {\n            return true;\n        }\n        return false;\n    };\n    return ResizeObservation;\n}());\nexport { ResizeObservation };\n","var ResizeObserverDetail = (function () {\n    function ResizeObserverDetail(resizeObserver, callback) {\n        this.activeTargets = [];\n        this.skippedTargets = [];\n        this.observationTargets = [];\n        this.observer = resizeObserver;\n        this.callback = callback;\n    }\n    return ResizeObserverDetail;\n}());\nexport { ResizeObserverDetail };\n","import { scheduler, updateCount } from './utils/scheduler';\nimport { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverDetail } from './ResizeObserverDetail';\nimport { resizeObservers } from './utils/resizeObservers';\nvar observerMap = new WeakMap();\nvar getObservationIndex = function (observationTargets, target) {\n    for (var i = 0; i < observationTargets.length; i += 1) {\n        if (observationTargets[i].target === target) {\n            return i;\n        }\n    }\n    return -1;\n};\nvar ResizeObserverController = (function () {\n    function ResizeObserverController() {\n    }\n    ResizeObserverController.connect = function (resizeObserver, callback) {\n        var detail = new ResizeObserverDetail(resizeObserver, callback);\n        observerMap.set(resizeObserver, detail);\n    };\n    ResizeObserverController.observe = function (resizeObserver, target, options) {\n        var detail = observerMap.get(resizeObserver);\n        var firstObservation = detail.observationTargets.length === 0;\n        if (getObservationIndex(detail.observationTargets, target) < 0) {\n            firstObservation && resizeObservers.push(detail);\n            detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n            updateCount(1);\n            scheduler.schedule();\n        }\n    };\n    ResizeObserverController.unobserve = function (resizeObserver, target) {\n        var detail = observerMap.get(resizeObserver);\n        var index = getObservationIndex(detail.observationTargets, target);\n        var lastObservation = detail.observationTargets.length === 1;\n        if (index >= 0) {\n            lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n            detail.observationTargets.splice(index, 1);\n            updateCount(-1);\n        }\n    };\n    ResizeObserverController.disconnect = function (resizeObserver) {\n        var _this = this;\n        var detail = observerMap.get(resizeObserver);\n        detail.observationTargets.slice().forEach(function (ot) { return _this.unobserve(resizeObserver, ot.target); });\n        detail.activeTargets.splice(0, detail.activeTargets.length);\n    };\n    return ResizeObserverController;\n}());\nexport { ResizeObserverController };\n","import { ResizeObserverController } from './ResizeObserverController';\nimport { isElement } from './utils/element';\nvar ResizeObserver = (function () {\n    function ResizeObserver(callback) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (typeof callback !== 'function') {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");\n        }\n        ResizeObserverController.connect(this, callback);\n    }\n    ResizeObserver.prototype.observe = function (target, options) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.observe(this, target, options);\n    };\n    ResizeObserver.prototype.unobserve = function (target) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.unobserve(this, target);\n    };\n    ResizeObserver.prototype.disconnect = function () {\n        ResizeObserverController.disconnect(this);\n    };\n    ResizeObserver.toString = function () {\n        return 'function ResizeObserver () { [polyfill code] }';\n    };\n    return ResizeObserver;\n}());\nexport { ResizeObserver };\n","import getDirection from 'direction';\nimport debounce from 'lodash/debounce';\nimport throttle from 'lodash/throttle';\nimport React, { createContext, useContext, useRef, useEffect, useLayoutEffect, useState, memo, forwardRef, useCallback, Component, useReducer, useMemo } from 'react';\nimport scrollIntoView from 'scroll-into-view-if-needed';\nimport { Transforms, Element as Element$1, Editor, Scrubber, Range, Path, Point, Node, Text as Text$1 } from 'slate';\nimport { ResizeObserver } from '@juggle/resize-observer';\nimport { isHotkey } from 'is-hotkey';\nimport ReactDOM from 'react-dom';\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\n\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\n\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\n\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\n\n/**\n * A React context for sharing the editor object.\n */\nvar EditorContext = /*#__PURE__*/createContext(null);\n/**\n * Get the current editor object from the React context.\n */\nvar useSlateStatic = () => {\n  var editor = useContext(EditorContext);\n  if (!editor) {\n    throw new Error(\"The `useSlateStatic` hook must be used inside the <Slate> component's context.\");\n  }\n  return editor;\n};\n\nvar REACT_MAJOR_VERSION = parseInt(React.version.split('.')[0], 10);\nvar IS_IOS = typeof navigator !== 'undefined' && typeof window !== 'undefined' && /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\nvar IS_APPLE = typeof navigator !== 'undefined' && /Mac OS X/.test(navigator.userAgent);\nvar IS_ANDROID = typeof navigator !== 'undefined' && /Android/.test(navigator.userAgent);\nvar IS_FIREFOX = typeof navigator !== 'undefined' && /^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);\nvar IS_WEBKIT = typeof navigator !== 'undefined' && /AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent);\n// \"modern\" Edge was released at 79.x\nvar IS_EDGE_LEGACY = typeof navigator !== 'undefined' && /Edge?\\/(?:[0-6][0-9]|[0-7][0-8])(?:\\.)/i.test(navigator.userAgent);\nvar IS_CHROME = typeof navigator !== 'undefined' && /Chrome/i.test(navigator.userAgent);\n// Native `beforeInput` events don't work well with react on Chrome 75\n// and older, Chrome 76+ can use `beforeInput` though.\nvar IS_CHROME_LEGACY = typeof navigator !== 'undefined' && /Chrome?\\/(?:[0-7][0-5]|[0-6][0-9])(?:\\.)/i.test(navigator.userAgent);\nvar IS_ANDROID_CHROME_LEGACY = IS_ANDROID && typeof navigator !== 'undefined' && /Chrome?\\/(?:[0-5]?\\d)(?:\\.)/i.test(navigator.userAgent);\n// Firefox did not support `beforeInput` until `v87`.\nvar IS_FIREFOX_LEGACY = typeof navigator !== 'undefined' && /^(?!.*Seamonkey)(?=.*Firefox\\/(?:[0-7][0-9]|[0-8][0-6])(?:\\.)).*/i.test(navigator.userAgent);\n// UC mobile browser\nvar IS_UC_MOBILE = typeof navigator !== 'undefined' && /.*UCBrowser/.test(navigator.userAgent);\n// Wechat browser (not including mac wechat)\nvar IS_WECHATBROWSER = typeof navigator !== 'undefined' && /.*Wechat/.test(navigator.userAgent) && !/.*MacWechat/.test(navigator.userAgent); // avoid lookbehind (buggy in safari < 16.4)\n// Check if DOM is available as React does internally.\n// https://github.com/facebook/react/blob/master/packages/shared/ExecutionEnvironment.js\nvar CAN_USE_DOM = !!(typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined');\n// COMPAT: Firefox/Edge Legacy don't support the `beforeinput` event\n// Chrome Legacy doesn't support `beforeinput` correctly\nvar HAS_BEFORE_INPUT_SUPPORT = (!IS_CHROME_LEGACY || !IS_ANDROID_CHROME_LEGACY) && !IS_EDGE_LEGACY &&\n// globalThis is undefined in older browsers\ntypeof globalThis !== 'undefined' && globalThis.InputEvent &&\n// @ts-ignore The `getTargetRanges` property isn't recognized.\ntypeof globalThis.InputEvent.prototype.getTargetRanges === 'function';\n\n/**\n * Two weak maps that allow us rebuild a path given a node. They are populated\n * at render time such that after a render occurs we can always backtrack.\n */\nvar NODE_TO_INDEX = new WeakMap();\nvar NODE_TO_PARENT = new WeakMap();\n/**\n * Weak maps that allow us to go between Slate nodes and DOM nodes. These\n * are used to resolve DOM event-related logic into Slate actions.\n */\nvar EDITOR_TO_WINDOW = new WeakMap();\nvar EDITOR_TO_ELEMENT = new WeakMap();\nvar EDITOR_TO_PLACEHOLDER_ELEMENT = new WeakMap();\nvar ELEMENT_TO_NODE = new WeakMap();\nvar NODE_TO_ELEMENT = new WeakMap();\nvar NODE_TO_KEY = new WeakMap();\nvar EDITOR_TO_KEY_TO_ELEMENT = new WeakMap();\n/**\n * Weak maps for storing editor-related state.\n */\nvar IS_READ_ONLY = new WeakMap();\nvar IS_FOCUSED = new WeakMap();\nvar IS_COMPOSING = new WeakMap();\nvar EDITOR_TO_USER_SELECTION = new WeakMap();\n/**\n * Weak map for associating the context `onChange` context with the plugin.\n */\nvar EDITOR_TO_ON_CHANGE = new WeakMap();\n/**\n * Weak maps for saving pending state on composition stage.\n */\nvar EDITOR_TO_SCHEDULE_FLUSH = new WeakMap();\nvar EDITOR_TO_PENDING_INSERTION_MARKS = new WeakMap();\nvar EDITOR_TO_USER_MARKS = new WeakMap();\n/**\n * Android input handling specific weak-maps\n */\nvar EDITOR_TO_PENDING_DIFFS = new WeakMap();\nvar EDITOR_TO_PENDING_ACTION = new WeakMap();\nvar EDITOR_TO_PENDING_SELECTION = new WeakMap();\nvar EDITOR_TO_FORCE_RENDER = new WeakMap();\n/**\n * Symbols.\n */\nvar PLACEHOLDER_SYMBOL = Symbol('placeholder');\nvar MARK_PLACEHOLDER_SYMBOL = Symbol('mark-placeholder');\n\n/**\n * Types.\n */\n// COMPAT: This is required to prevent TypeScript aliases from doing some very\n// weird things for Slate's types with the same name as globals. (2019/11/27)\n// https://github.com/microsoft/TypeScript/issues/35002\nvar DOMText = globalThis.Text;\n/**\n * Returns the host window of a DOM node\n */\nvar getDefaultView = value => {\n  return value && value.ownerDocument && value.ownerDocument.defaultView || null;\n};\n/**\n * Check if a DOM node is a comment node.\n */\nvar isDOMComment = value => {\n  return isDOMNode(value) && value.nodeType === 8;\n};\n/**\n * Check if a DOM node is an element node.\n */\nvar isDOMElement = value => {\n  return isDOMNode(value) && value.nodeType === 1;\n};\n/**\n * Check if a value is a DOM node.\n */\nvar isDOMNode = value => {\n  var window = getDefaultView(value);\n  return !!window && value instanceof window.Node;\n};\n/**\n * Check if a value is a DOM selection.\n */\nvar isDOMSelection = value => {\n  var window = value && value.anchorNode && getDefaultView(value.anchorNode);\n  return !!window && value instanceof window.Selection;\n};\n/**\n * Check if a DOM node is an element node.\n */\nvar isDOMText = value => {\n  return isDOMNode(value) && value.nodeType === 3;\n};\n/**\n * Checks whether a paste event is a plaintext-only event.\n */\nvar isPlainTextOnlyPaste = event => {\n  return event.clipboardData && event.clipboardData.getData('text/plain') !== '' && event.clipboardData.types.length === 1;\n};\n/**\n * Normalize a DOM point so that it always refers to a text node.\n */\nvar normalizeDOMPoint = domPoint => {\n  var [node, offset] = domPoint;\n  // If it's an element node, its offset refers to the index of its children\n  // including comment nodes, so try to find the right text child node.\n  if (isDOMElement(node) && node.childNodes.length) {\n    var isLast = offset === node.childNodes.length;\n    var index = isLast ? offset - 1 : offset;\n    [node, index] = getEditableChildAndIndex(node, index, isLast ? 'backward' : 'forward');\n    // If the editable child found is in front of input offset, we instead seek to its end\n    isLast = index < offset;\n    // If the node has children, traverse until we have a leaf node. Leaf nodes\n    // can be either text nodes, or other void DOM nodes.\n    while (isDOMElement(node) && node.childNodes.length) {\n      var i = isLast ? node.childNodes.length - 1 : 0;\n      node = getEditableChild(node, i, isLast ? 'backward' : 'forward');\n    }\n    // Determine the new offset inside the text node.\n    offset = isLast && node.textContent != null ? node.textContent.length : 0;\n  }\n  // Return the node and offset.\n  return [node, offset];\n};\n/**\n * Determines whether the active element is nested within a shadowRoot\n */\nvar hasShadowRoot = node => {\n  var parent = node && node.parentNode;\n  while (parent) {\n    if (parent.toString() === '[object ShadowRoot]') {\n      return true;\n    }\n    parent = parent.parentNode;\n  }\n  return false;\n};\n/**\n * Get the nearest editable child and index at `index` in a `parent`, preferring\n * `direction`.\n */\nvar getEditableChildAndIndex = (parent, index, direction) => {\n  var {\n    childNodes\n  } = parent;\n  var child = childNodes[index];\n  var i = index;\n  var triedForward = false;\n  var triedBackward = false;\n  // While the child is a comment node, or an element node with no children,\n  // keep iterating to find a sibling non-void, non-comment node.\n  while (isDOMComment(child) || isDOMElement(child) && child.childNodes.length === 0 || isDOMElement(child) && child.getAttribute('contenteditable') === 'false') {\n    if (triedForward && triedBackward) {\n      break;\n    }\n    if (i >= childNodes.length) {\n      triedForward = true;\n      i = index - 1;\n      direction = 'backward';\n      continue;\n    }\n    if (i < 0) {\n      triedBackward = true;\n      i = index + 1;\n      direction = 'forward';\n      continue;\n    }\n    child = childNodes[i];\n    index = i;\n    i += direction === 'forward' ? 1 : -1;\n  }\n  return [child, index];\n};\n/**\n * Get the nearest editable child at `index` in a `parent`, preferring\n * `direction`.\n */\nvar getEditableChild = (parent, index, direction) => {\n  var [child] = getEditableChildAndIndex(parent, index, direction);\n  return child;\n};\n/**\n * Get a plaintext representation of the content of a node, accounting for block\n * elements which get a newline appended.\n *\n * The domNode must be attached to the DOM.\n */\nvar getPlainText = domNode => {\n  var text = '';\n  if (isDOMText(domNode) && domNode.nodeValue) {\n    return domNode.nodeValue;\n  }\n  if (isDOMElement(domNode)) {\n    for (var childNode of Array.from(domNode.childNodes)) {\n      text += getPlainText(childNode);\n    }\n    var display = getComputedStyle(domNode).getPropertyValue('display');\n    if (display === 'block' || display === 'list' || domNode.tagName === 'BR') {\n      text += '\\n';\n    }\n  }\n  return text;\n};\n/**\n * Get x-slate-fragment attribute from data-slate-fragment\n */\nvar catchSlateFragment = /data-slate-fragment=\"(.+?)\"/m;\nvar getSlateFragmentAttribute = dataTransfer => {\n  var htmlData = dataTransfer.getData('text/html');\n  var [, fragment] = htmlData.match(catchSlateFragment) || [];\n  return fragment;\n};\n/**\n * Check whether a mutation originates from a editable element inside the editor.\n */\nvar isTrackedMutation = (editor, mutation, batch) => {\n  var {\n    target\n  } = mutation;\n  if (isDOMElement(target) && target.matches('[contentEditable=\"false\"]')) {\n    return false;\n  }\n  var {\n    document\n  } = ReactEditor.getWindow(editor);\n  if (document.contains(target)) {\n    return ReactEditor.hasDOMNode(editor, target, {\n      editable: true\n    });\n  }\n  var parentMutation = batch.find(_ref => {\n    var {\n      addedNodes,\n      removedNodes\n    } = _ref;\n    for (var node of addedNodes) {\n      if (node === target || node.contains(target)) {\n        return true;\n      }\n    }\n    for (var _node of removedNodes) {\n      if (_node === target || _node.contains(target)) {\n        return true;\n      }\n    }\n  });\n  if (!parentMutation || parentMutation === mutation) {\n    return false;\n  }\n  // Target add/remove is tracked. Track the mutation if we track the parent mutation.\n  return isTrackedMutation(editor, parentMutation, batch);\n};\n\n/**\n * An auto-incrementing identifier for keys.\n */\nvar n = 0;\n/**\n * A class that keeps track of a key string. We use a full class here because we\n * want to be able to use them as keys in `WeakMap` objects.\n */\nclass Key {\n  constructor() {\n    _defineProperty(this, \"id\", void 0);\n    this.id = \"\".concat(n++);\n  }\n}\n\n// eslint-disable-next-line no-redeclare\nvar ReactEditor = {\n  androidPendingDiffs: editor => EDITOR_TO_PENDING_DIFFS.get(editor),\n  androidScheduleFlush: editor => {\n    var _EDITOR_TO_SCHEDULE_F;\n    (_EDITOR_TO_SCHEDULE_F = EDITOR_TO_SCHEDULE_FLUSH.get(editor)) === null || _EDITOR_TO_SCHEDULE_F === void 0 || _EDITOR_TO_SCHEDULE_F();\n  },\n  blur: editor => {\n    var el = ReactEditor.toDOMNode(editor, editor);\n    var root = ReactEditor.findDocumentOrShadowRoot(editor);\n    IS_FOCUSED.set(editor, false);\n    if (root.activeElement === el) {\n      el.blur();\n    }\n  },\n  deselect: editor => {\n    var {\n      selection\n    } = editor;\n    var root = ReactEditor.findDocumentOrShadowRoot(editor);\n    var domSelection = root.getSelection();\n    if (domSelection && domSelection.rangeCount > 0) {\n      domSelection.removeAllRanges();\n    }\n    if (selection) {\n      Transforms.deselect(editor);\n    }\n  },\n  findDocumentOrShadowRoot: editor => {\n    var el = ReactEditor.toDOMNode(editor, editor);\n    var root = el.getRootNode();\n    if ((root instanceof Document || root instanceof ShadowRoot) && root.getSelection != null) {\n      return root;\n    }\n    return el.ownerDocument;\n  },\n  findEventRange: (editor, event) => {\n    if ('nativeEvent' in event) {\n      event = event.nativeEvent;\n    }\n    var {\n      clientX: x,\n      clientY: y,\n      target\n    } = event;\n    if (x == null || y == null) {\n      throw new Error(\"Cannot resolve a Slate range from a DOM event: \".concat(event));\n    }\n    var node = ReactEditor.toSlateNode(editor, event.target);\n    var path = ReactEditor.findPath(editor, node);\n    // If the drop target is inside a void node, move it into either the\n    // next or previous node, depending on which side the `x` and `y`\n    // coordinates are closest to.\n    if (Element$1.isElement(node) && Editor.isVoid(editor, node)) {\n      var rect = target.getBoundingClientRect();\n      var isPrev = editor.isInline(node) ? x - rect.left < rect.left + rect.width - x : y - rect.top < rect.top + rect.height - y;\n      var edge = Editor.point(editor, path, {\n        edge: isPrev ? 'start' : 'end'\n      });\n      var point = isPrev ? Editor.before(editor, edge) : Editor.after(editor, edge);\n      if (point) {\n        var _range = Editor.range(editor, point);\n        return _range;\n      }\n    }\n    // Else resolve a range from the caret position where the drop occured.\n    var domRange;\n    var {\n      document\n    } = ReactEditor.getWindow(editor);\n    // COMPAT: In Firefox, `caretRangeFromPoint` doesn't exist. (2016/07/25)\n    if (document.caretRangeFromPoint) {\n      domRange = document.caretRangeFromPoint(x, y);\n    } else {\n      var position = document.caretPositionFromPoint(x, y);\n      if (position) {\n        domRange = document.createRange();\n        domRange.setStart(position.offsetNode, position.offset);\n        domRange.setEnd(position.offsetNode, position.offset);\n      }\n    }\n    if (!domRange) {\n      throw new Error(\"Cannot resolve a Slate range from a DOM event: \".concat(event));\n    }\n    // Resolve a Slate range from the DOM range.\n    var range = ReactEditor.toSlateRange(editor, domRange, {\n      exactMatch: false,\n      suppressThrow: false\n    });\n    return range;\n  },\n  findKey: (editor, node) => {\n    var key = NODE_TO_KEY.get(node);\n    if (!key) {\n      key = new Key();\n      NODE_TO_KEY.set(node, key);\n    }\n    return key;\n  },\n  findPath: (editor, node) => {\n    var path = [];\n    var child = node;\n    while (true) {\n      var parent = NODE_TO_PARENT.get(child);\n      if (parent == null) {\n        if (Editor.isEditor(child)) {\n          return path;\n        } else {\n          break;\n        }\n      }\n      var i = NODE_TO_INDEX.get(child);\n      if (i == null) {\n        break;\n      }\n      path.unshift(i);\n      child = parent;\n    }\n    throw new Error(\"Unable to find the path for Slate node: \".concat(Scrubber.stringify(node)));\n  },\n  focus: function focus(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      retries: 5\n    };\n    // Return if already focused\n    if (IS_FOCUSED.get(editor)) {\n      return;\n    }\n    // Retry setting focus if the editor has pending operations.\n    // The DOM (selection) is unstable while changes are applied.\n    // Retry until retries are exhausted or editor is focused.\n    if (options.retries <= 0) {\n      throw new Error('Could not set focus, editor seems stuck with pending operations');\n    }\n    if (editor.operations.length > 0) {\n      setTimeout(() => {\n        ReactEditor.focus(editor, {\n          retries: options.retries - 1\n        });\n      }, 10);\n      return;\n    }\n    var el = ReactEditor.toDOMNode(editor, editor);\n    var root = ReactEditor.findDocumentOrShadowRoot(editor);\n    if (root.activeElement !== el) {\n      // Ensure that the DOM selection state is set to the editor's selection\n      if (editor.selection && root instanceof Document) {\n        var domSelection = root.getSelection();\n        var domRange = ReactEditor.toDOMRange(editor, editor.selection);\n        domSelection === null || domSelection === void 0 || domSelection.removeAllRanges();\n        domSelection === null || domSelection === void 0 || domSelection.addRange(domRange);\n      }\n      // Create a new selection in the top of the document if missing\n      if (!editor.selection) {\n        Transforms.select(editor, Editor.start(editor, []));\n        editor.onChange();\n      }\n      // IS_FOCUSED should be set before calling el.focus() to ensure that\n      // FocusedContext is updated to the correct value\n      IS_FOCUSED.set(editor, true);\n      el.focus({\n        preventScroll: true\n      });\n    }\n  },\n  getWindow: editor => {\n    var window = EDITOR_TO_WINDOW.get(editor);\n    if (!window) {\n      throw new Error('Unable to find a host window element for this editor');\n    }\n    return window;\n  },\n  hasDOMNode: function hasDOMNode(editor, target) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var {\n      editable = false\n    } = options;\n    var editorEl = ReactEditor.toDOMNode(editor, editor);\n    var targetEl;\n    // COMPAT: In Firefox, reading `target.nodeType` will throw an error if\n    // target is originating from an internal \"restricted\" element (e.g. a\n    // stepper arrow on a number input). (2018/05/04)\n    // https://github.com/ianstormtaylor/slate/issues/1819\n    try {\n      targetEl = isDOMElement(target) ? target : target.parentElement;\n    } catch (err) {\n      if (err instanceof Error && !err.message.includes('Permission denied to access property \"nodeType\"')) {\n        throw err;\n      }\n    }\n    if (!targetEl) {\n      return false;\n    }\n    return targetEl.closest(\"[data-slate-editor]\") === editorEl && (!editable || targetEl.isContentEditable ? true : typeof targetEl.isContentEditable === 'boolean' &&\n    // isContentEditable exists only on HTMLElement, and on other nodes it will be undefined\n    // this is the core logic that lets you know you got the right editor.selection instead of null when editor is contenteditable=\"false\"(readOnly)\n    targetEl.closest('[contenteditable=\"false\"]') === editorEl || !!targetEl.getAttribute('data-slate-zero-width'));\n  },\n  hasEditableTarget: (editor, target) => isDOMNode(target) && ReactEditor.hasDOMNode(editor, target, {\n    editable: true\n  }),\n  hasRange: (editor, range) => {\n    var {\n      anchor,\n      focus\n    } = range;\n    return Editor.hasPath(editor, anchor.path) && Editor.hasPath(editor, focus.path);\n  },\n  hasSelectableTarget: (editor, target) => ReactEditor.hasEditableTarget(editor, target) || ReactEditor.isTargetInsideNonReadonlyVoid(editor, target),\n  hasTarget: (editor, target) => isDOMNode(target) && ReactEditor.hasDOMNode(editor, target),\n  insertData: (editor, data) => {\n    editor.insertData(data);\n  },\n  insertFragmentData: (editor, data) => editor.insertFragmentData(data),\n  insertTextData: (editor, data) => editor.insertTextData(data),\n  isComposing: editor => {\n    return !!IS_COMPOSING.get(editor);\n  },\n  isFocused: editor => !!IS_FOCUSED.get(editor),\n  isReadOnly: editor => !!IS_READ_ONLY.get(editor),\n  isTargetInsideNonReadonlyVoid: (editor, target) => {\n    if (IS_READ_ONLY.get(editor)) return false;\n    var slateNode = ReactEditor.hasTarget(editor, target) && ReactEditor.toSlateNode(editor, target);\n    return Element$1.isElement(slateNode) && Editor.isVoid(editor, slateNode);\n  },\n  setFragmentData: (editor, data, originEvent) => editor.setFragmentData(data, originEvent),\n  toDOMNode: (editor, node) => {\n    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);\n    var domNode = Editor.isEditor(node) ? EDITOR_TO_ELEMENT.get(editor) : KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.get(ReactEditor.findKey(editor, node));\n    if (!domNode) {\n      throw new Error(\"Cannot resolve a DOM node from Slate node: \".concat(Scrubber.stringify(node)));\n    }\n    return domNode;\n  },\n  toDOMPoint: (editor, point) => {\n    var [node] = Editor.node(editor, point.path);\n    var el = ReactEditor.toDOMNode(editor, node);\n    var domPoint;\n    // If we're inside a void node, force the offset to 0, otherwise the zero\n    // width spacing character will result in an incorrect offset of 1\n    if (Editor.void(editor, {\n      at: point\n    })) {\n      point = {\n        path: point.path,\n        offset: 0\n      };\n    }\n    // For each leaf, we need to isolate its content, which means filtering\n    // to its direct text and zero-width spans. (We have to filter out any\n    // other siblings that may have been rendered alongside them.)\n    var selector = \"[data-slate-string], [data-slate-zero-width]\";\n    var texts = Array.from(el.querySelectorAll(selector));\n    var start = 0;\n    for (var i = 0; i < texts.length; i++) {\n      var text = texts[i];\n      var domNode = text.childNodes[0];\n      if (domNode == null || domNode.textContent == null) {\n        continue;\n      }\n      var {\n        length\n      } = domNode.textContent;\n      var attr = text.getAttribute('data-slate-length');\n      var trueLength = attr == null ? length : parseInt(attr, 10);\n      var end = start + trueLength;\n      // Prefer putting the selection inside the mark placeholder to ensure\n      // composed text is displayed with the correct marks.\n      var nextText = texts[i + 1];\n      if (point.offset === end && nextText !== null && nextText !== void 0 && nextText.hasAttribute('data-slate-mark-placeholder')) {\n        var _nextText$textContent;\n        var domText = nextText.childNodes[0];\n        domPoint = [\n        // COMPAT: If we don't explicity set the dom point to be on the actual\n        // dom text element, chrome will put the selection behind the actual dom\n        // text element, causing domRange.getBoundingClientRect() calls on a collapsed\n        // selection to return incorrect zero values (https://bugs.chromium.org/p/chromium/issues/detail?id=435438)\n        // which will cause issues when scrolling to it.\n        domText instanceof DOMText ? domText : nextText, (_nextText$textContent = nextText.textContent) !== null && _nextText$textContent !== void 0 && _nextText$textContent.startsWith('\\uFEFF') ? 1 : 0];\n        break;\n      }\n      if (point.offset <= end) {\n        var offset = Math.min(length, Math.max(0, point.offset - start));\n        domPoint = [domNode, offset];\n        break;\n      }\n      start = end;\n    }\n    if (!domPoint) {\n      throw new Error(\"Cannot resolve a DOM point from Slate point: \".concat(Scrubber.stringify(point)));\n    }\n    return domPoint;\n  },\n  toDOMRange: (editor, range) => {\n    var {\n      anchor,\n      focus\n    } = range;\n    var isBackward = Range.isBackward(range);\n    var domAnchor = ReactEditor.toDOMPoint(editor, anchor);\n    var domFocus = Range.isCollapsed(range) ? domAnchor : ReactEditor.toDOMPoint(editor, focus);\n    var window = ReactEditor.getWindow(editor);\n    var domRange = window.document.createRange();\n    var [startNode, startOffset] = isBackward ? domFocus : domAnchor;\n    var [endNode, endOffset] = isBackward ? domAnchor : domFocus;\n    // A slate Point at zero-width Leaf always has an offset of 0 but a native DOM selection at\n    // zero-width node has an offset of 1 so we have to check if we are in a zero-width node and\n    // adjust the offset accordingly.\n    var startEl = isDOMElement(startNode) ? startNode : startNode.parentElement;\n    var isStartAtZeroWidth = !!startEl.getAttribute('data-slate-zero-width');\n    var endEl = isDOMElement(endNode) ? endNode : endNode.parentElement;\n    var isEndAtZeroWidth = !!endEl.getAttribute('data-slate-zero-width');\n    domRange.setStart(startNode, isStartAtZeroWidth ? 1 : startOffset);\n    domRange.setEnd(endNode, isEndAtZeroWidth ? 1 : endOffset);\n    return domRange;\n  },\n  toSlateNode: (editor, domNode) => {\n    var domEl = isDOMElement(domNode) ? domNode : domNode.parentElement;\n    if (domEl && !domEl.hasAttribute('data-slate-node')) {\n      domEl = domEl.closest(\"[data-slate-node]\");\n    }\n    var node = domEl ? ELEMENT_TO_NODE.get(domEl) : null;\n    if (!node) {\n      throw new Error(\"Cannot resolve a Slate node from DOM node: \".concat(domEl));\n    }\n    return node;\n  },\n  toSlatePoint: (editor, domPoint, options) => {\n    var {\n      exactMatch,\n      suppressThrow\n    } = options;\n    var [nearestNode, nearestOffset] = exactMatch ? domPoint : normalizeDOMPoint(domPoint);\n    var parentNode = nearestNode.parentNode;\n    var textNode = null;\n    var offset = 0;\n    if (parentNode) {\n      var _domNode$textContent, _domNode$textContent2;\n      var editorEl = ReactEditor.toDOMNode(editor, editor);\n      var potentialVoidNode = parentNode.closest('[data-slate-void=\"true\"]');\n      // Need to ensure that the closest void node is actually a void node\n      // within this editor, and not a void node within some parent editor. This can happen\n      // if this editor is within a void node of another editor (\"nested editors\", like in\n      // the \"Editable Voids\" example on the docs site).\n      var voidNode = potentialVoidNode && editorEl.contains(potentialVoidNode) ? potentialVoidNode : null;\n      var leafNode = parentNode.closest('[data-slate-leaf]');\n      var domNode = null;\n      // Calculate how far into the text node the `nearestNode` is, so that we\n      // can determine what the offset relative to the text node is.\n      if (leafNode) {\n        textNode = leafNode.closest('[data-slate-node=\"text\"]');\n        if (textNode) {\n          var window = ReactEditor.getWindow(editor);\n          var range = window.document.createRange();\n          range.setStart(textNode, 0);\n          range.setEnd(nearestNode, nearestOffset);\n          var contents = range.cloneContents();\n          var removals = [...Array.prototype.slice.call(contents.querySelectorAll('[data-slate-zero-width]')), ...Array.prototype.slice.call(contents.querySelectorAll('[contenteditable=false]'))];\n          removals.forEach(el => {\n            // COMPAT: While composing at the start of a text node, some keyboards put\n            // the text content inside the zero width space.\n            if (IS_ANDROID && !exactMatch && el.hasAttribute('data-slate-zero-width') && el.textContent.length > 0 && el.textContext !== '\\uFEFF') {\n              if (el.textContent.startsWith('\\uFEFF')) {\n                el.textContent = el.textContent.slice(1);\n              }\n              return;\n            }\n            el.parentNode.removeChild(el);\n          });\n          // COMPAT: Edge has a bug where Range.prototype.toString() will\n          // convert \\n into \\r\\n. The bug causes a loop when slate-react\n          // attempts to reposition its cursor to match the native position. Use\n          // textContent.length instead.\n          // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10291116/\n          offset = contents.textContent.length;\n          domNode = textNode;\n        }\n      } else if (voidNode) {\n        // For void nodes, the element with the offset key will be a cousin, not an\n        // ancestor, so find it by going down from the nearest void parent and taking the\n        // first one that isn't inside a nested editor.\n        var leafNodes = voidNode.querySelectorAll('[data-slate-leaf]');\n        for (var index = 0; index < leafNodes.length; index++) {\n          var current = leafNodes[index];\n          if (ReactEditor.hasDOMNode(editor, current)) {\n            leafNode = current;\n            break;\n          }\n        }\n        // COMPAT: In read-only editors the leaf is not rendered.\n        if (!leafNode) {\n          offset = 1;\n        } else {\n          textNode = leafNode.closest('[data-slate-node=\"text\"]');\n          domNode = leafNode;\n          offset = domNode.textContent.length;\n          domNode.querySelectorAll('[data-slate-zero-width]').forEach(el => {\n            offset -= el.textContent.length;\n          });\n        }\n      }\n      if (domNode && offset === domNode.textContent.length &&\n      // COMPAT: Android IMEs might remove the zero width space while composing,\n      // and we don't add it for line-breaks.\n      IS_ANDROID && domNode.getAttribute('data-slate-zero-width') === 'z' && (_domNode$textContent = domNode.textContent) !== null && _domNode$textContent !== void 0 && _domNode$textContent.startsWith('\\uFEFF') && (\n      // COMPAT: If the parent node is a Slate zero-width space, editor is\n      // because the text node should have no characters. However, during IME\n      // composition the ASCII characters will be prepended to the zero-width\n      // space, so subtract 1 from the offset to account for the zero-width\n      // space character.\n      parentNode.hasAttribute('data-slate-zero-width') ||\n      // COMPAT: In Firefox, `range.cloneContents()` returns an extra trailing '\\n'\n      // when the document ends with a new-line character. This results in the offset\n      // length being off by one, so we need to subtract one to account for this.\n      IS_FIREFOX && (_domNode$textContent2 = domNode.textContent) !== null && _domNode$textContent2 !== void 0 && _domNode$textContent2.endsWith('\\n\\n'))) {\n        offset--;\n      }\n    }\n    if (IS_ANDROID && !textNode && !exactMatch) {\n      var node = parentNode.hasAttribute('data-slate-node') ? parentNode : parentNode.closest('[data-slate-node]');\n      if (node && ReactEditor.hasDOMNode(editor, node, {\n        editable: true\n      })) {\n        var _slateNode = ReactEditor.toSlateNode(editor, node);\n        var {\n          path: _path,\n          offset: _offset\n        } = Editor.start(editor, ReactEditor.findPath(editor, _slateNode));\n        if (!node.querySelector('[data-slate-leaf]')) {\n          _offset = nearestOffset;\n        }\n        return {\n          path: _path,\n          offset: _offset\n        };\n      }\n    }\n    if (!textNode) {\n      if (suppressThrow) {\n        return null;\n      }\n      throw new Error(\"Cannot resolve a Slate point from DOM point: \".concat(domPoint));\n    }\n    // COMPAT: If someone is clicking from one Slate editor into another,\n    // the select event fires twice, once for the old editor's `element`\n    // first, and then afterwards for the correct `element`. (2017/03/03)\n    var slateNode = ReactEditor.toSlateNode(editor, textNode);\n    var path = ReactEditor.findPath(editor, slateNode);\n    return {\n      path,\n      offset\n    };\n  },\n  toSlateRange: (editor, domRange, options) => {\n    var _focusNode$textConten;\n    var {\n      exactMatch,\n      suppressThrow\n    } = options;\n    var el = isDOMSelection(domRange) ? domRange.anchorNode : domRange.startContainer;\n    var anchorNode;\n    var anchorOffset;\n    var focusNode;\n    var focusOffset;\n    var isCollapsed;\n    if (el) {\n      if (isDOMSelection(domRange)) {\n        // COMPAT: In firefox the normal seletion way does not work\n        // (https://github.com/ianstormtaylor/slate/pull/5486#issue-1820720223)\n        if (IS_FIREFOX && domRange.rangeCount > 1) {\n          focusNode = domRange.focusNode; // Focus node works fine\n          var firstRange = domRange.getRangeAt(0);\n          var lastRange = domRange.getRangeAt(domRange.rangeCount - 1);\n          // Here we are in the contenteditable mode of a table in firefox\n          if (focusNode instanceof HTMLTableRowElement && firstRange.startContainer instanceof HTMLTableRowElement && lastRange.startContainer instanceof HTMLTableRowElement) {\n            // HTMLElement, becouse Element is a slate element\n            function getLastChildren(element) {\n              if (element.childElementCount > 0) {\n                return getLastChildren(element.children[0]);\n              } else {\n                return element;\n              }\n            }\n            var firstNodeRow = firstRange.startContainer;\n            var lastNodeRow = lastRange.startContainer;\n            // This should never fail as \"The HTMLElement interface represents any HTML element.\"\n            var firstNode = getLastChildren(firstNodeRow.children[firstRange.startOffset]);\n            var lastNode = getLastChildren(lastNodeRow.children[lastRange.startOffset]);\n            // Zero, as we allways take the right one as the anchor point\n            focusOffset = 0;\n            if (lastNode.childNodes.length > 0) {\n              anchorNode = lastNode.childNodes[0];\n            } else {\n              anchorNode = lastNode;\n            }\n            if (firstNode.childNodes.length > 0) {\n              focusNode = firstNode.childNodes[0];\n            } else {\n              focusNode = firstNode;\n            }\n            if (lastNode instanceof HTMLElement) {\n              anchorOffset = lastNode.innerHTML.length;\n            } else {\n              // Fallback option\n              anchorOffset = 0;\n            }\n          } else {\n            // This is the read only mode of a firefox table\n            // Right to left\n            if (firstRange.startContainer === focusNode) {\n              anchorNode = lastRange.endContainer;\n              anchorOffset = lastRange.endOffset;\n              focusOffset = firstRange.startOffset;\n            } else {\n              // Left to right\n              anchorNode = firstRange.startContainer;\n              anchorOffset = firstRange.endOffset;\n              focusOffset = lastRange.startOffset;\n            }\n          }\n        } else {\n          anchorNode = domRange.anchorNode;\n          anchorOffset = domRange.anchorOffset;\n          focusNode = domRange.focusNode;\n          focusOffset = domRange.focusOffset;\n        }\n        // COMPAT: There's a bug in chrome that always returns `true` for\n        // `isCollapsed` for a Selection that comes from a ShadowRoot.\n        // (2020/08/08)\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=447523\n        // IsCollapsed might not work in firefox, but this will\n        if (IS_CHROME && hasShadowRoot(anchorNode) || IS_FIREFOX) {\n          isCollapsed = domRange.anchorNode === domRange.focusNode && domRange.anchorOffset === domRange.focusOffset;\n        } else {\n          isCollapsed = domRange.isCollapsed;\n        }\n      } else {\n        anchorNode = domRange.startContainer;\n        anchorOffset = domRange.startOffset;\n        focusNode = domRange.endContainer;\n        focusOffset = domRange.endOffset;\n        isCollapsed = domRange.collapsed;\n      }\n    }\n    if (anchorNode == null || focusNode == null || anchorOffset == null || focusOffset == null) {\n      throw new Error(\"Cannot resolve a Slate range from DOM range: \".concat(domRange));\n    }\n    // COMPAT: Firefox sometimes includes an extra \\n (rendered by TextString\n    // when isTrailing is true) in the focusOffset, resulting in an invalid\n    // Slate point. (2023/11/01)\n    if (IS_FIREFOX && (_focusNode$textConten = focusNode.textContent) !== null && _focusNode$textConten !== void 0 && _focusNode$textConten.endsWith('\\n\\n') && focusOffset === focusNode.textContent.length) {\n      focusOffset--;\n    }\n    // COMPAT: Triple-clicking a word in chrome will sometimes place the focus\n    // inside a `contenteditable=\"false\"` DOM node following the word, which\n    // will cause `toSlatePoint` to throw an error. (2023/03/07)\n    if ('getAttribute' in focusNode && focusNode.getAttribute('contenteditable') === 'false' && focusNode.getAttribute('data-slate-void') !== 'true') {\n      var _anchorNode$textConte;\n      focusNode = anchorNode;\n      focusOffset = ((_anchorNode$textConte = anchorNode.textContent) === null || _anchorNode$textConte === void 0 ? void 0 : _anchorNode$textConte.length) || 0;\n    }\n    var anchor = ReactEditor.toSlatePoint(editor, [anchorNode, anchorOffset], {\n      exactMatch,\n      suppressThrow\n    });\n    if (!anchor) {\n      return null;\n    }\n    var focus = isCollapsed ? anchor : ReactEditor.toSlatePoint(editor, [focusNode, focusOffset], {\n      exactMatch,\n      suppressThrow\n    });\n    if (!focus) {\n      return null;\n    }\n    var range = {\n      anchor: anchor,\n      focus: focus\n    };\n    // if the selection is a hanging range that ends in a void\n    // and the DOM focus is an Element\n    // (meaning that the selection ends before the element)\n    // unhang the range to avoid mistakenly including the void\n    if (Range.isExpanded(range) && Range.isForward(range) && isDOMElement(focusNode) && Editor.void(editor, {\n      at: range.focus,\n      mode: 'highest'\n    })) {\n      range = Editor.unhangRange(editor, range, {\n        voids: true\n      });\n    }\n    return range;\n  }\n};\n\n/**\n * Check whether a text diff was applied in a way we can perform the pending action on /\n * recover the pending selection.\n */\nfunction verifyDiffState(editor, textDiff) {\n  var {\n    path,\n    diff\n  } = textDiff;\n  if (!Editor.hasPath(editor, path)) {\n    return false;\n  }\n  var node = Node.get(editor, path);\n  if (!Text$1.isText(node)) {\n    return false;\n  }\n  if (diff.start !== node.text.length || diff.text.length === 0) {\n    return node.text.slice(diff.start, diff.start + diff.text.length) === diff.text;\n  }\n  var nextPath = Path.next(path);\n  if (!Editor.hasPath(editor, nextPath)) {\n    return false;\n  }\n  var nextNode = Node.get(editor, nextPath);\n  return Text$1.isText(nextNode) && nextNode.text.startsWith(diff.text);\n}\nfunction applyStringDiff(text) {\n  for (var _len = arguments.length, diffs = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    diffs[_key - 1] = arguments[_key];\n  }\n  return diffs.reduce((text, diff) => text.slice(0, diff.start) + diff.text + text.slice(diff.end), text);\n}\nfunction longestCommonPrefixLength(str, another) {\n  var length = Math.min(str.length, another.length);\n  for (var i = 0; i < length; i++) {\n    if (str.charAt(i) !== another.charAt(i)) {\n      return i;\n    }\n  }\n  return length;\n}\nfunction longestCommonSuffixLength(str, another, max) {\n  var length = Math.min(str.length, another.length, max);\n  for (var i = 0; i < length; i++) {\n    if (str.charAt(str.length - i - 1) !== another.charAt(another.length - i - 1)) {\n      return i;\n    }\n  }\n  return length;\n}\n/**\n * Remove redundant changes from the diff so that it spans the minimal possible range\n */\nfunction normalizeStringDiff(targetText, diff) {\n  var {\n    start,\n    end,\n    text\n  } = diff;\n  var removedText = targetText.slice(start, end);\n  var prefixLength = longestCommonPrefixLength(removedText, text);\n  var max = Math.min(removedText.length - prefixLength, text.length - prefixLength);\n  var suffixLength = longestCommonSuffixLength(removedText, text, max);\n  var normalized = {\n    start: start + prefixLength,\n    end: end - suffixLength,\n    text: text.slice(prefixLength, text.length - suffixLength)\n  };\n  if (normalized.start === normalized.end && normalized.text.length === 0) {\n    return null;\n  }\n  return normalized;\n}\n/**\n * Return a string diff that is equivalent to applying b after a spanning the range of\n * both changes\n */\nfunction mergeStringDiffs(targetText, a, b) {\n  var start = Math.min(a.start, b.start);\n  var overlap = Math.max(0, Math.min(a.start + a.text.length, b.end) - b.start);\n  var applied = applyStringDiff(targetText, a, b);\n  var sliceEnd = Math.max(b.start + b.text.length, a.start + a.text.length + (a.start + a.text.length > b.start ? b.text.length : 0) - overlap);\n  var text = applied.slice(start, sliceEnd);\n  var end = Math.max(a.end, b.end - a.text.length + (a.end - a.start));\n  return normalizeStringDiff(targetText, {\n    start,\n    end,\n    text\n  });\n}\n/**\n * Get the slate range the text diff spans.\n */\nfunction targetRange(textDiff) {\n  var {\n    path,\n    diff\n  } = textDiff;\n  return {\n    anchor: {\n      path,\n      offset: diff.start\n    },\n    focus: {\n      path,\n      offset: diff.end\n    }\n  };\n}\n/**\n * Normalize a 'pending point' a.k.a a point based on the dom state before applying\n * the pending diffs. Since the pending diffs might have been inserted with different\n * marks we have to 'walk' the offset from the starting position to ensure we still\n * have a valid point inside the document\n */\nfunction normalizePoint(editor, point) {\n  var {\n    path,\n    offset\n  } = point;\n  if (!Editor.hasPath(editor, path)) {\n    return null;\n  }\n  var leaf = Node.get(editor, path);\n  if (!Text$1.isText(leaf)) {\n    return null;\n  }\n  var parentBlock = Editor.above(editor, {\n    match: n => Element$1.isElement(n) && Editor.isBlock(editor, n),\n    at: path\n  });\n  if (!parentBlock) {\n    return null;\n  }\n  while (offset > leaf.text.length) {\n    var entry = Editor.next(editor, {\n      at: path,\n      match: Text$1.isText\n    });\n    if (!entry || !Path.isDescendant(entry[1], parentBlock[1])) {\n      return null;\n    }\n    offset -= leaf.text.length;\n    leaf = entry[0];\n    path = entry[1];\n  }\n  return {\n    path,\n    offset\n  };\n}\n/**\n * Normalize a 'pending selection' to ensure it's valid in the current document state.\n */\nfunction normalizeRange(editor, range) {\n  var anchor = normalizePoint(editor, range.anchor);\n  if (!anchor) {\n    return null;\n  }\n  if (Range.isCollapsed(range)) {\n    return {\n      anchor,\n      focus: anchor\n    };\n  }\n  var focus = normalizePoint(editor, range.focus);\n  if (!focus) {\n    return null;\n  }\n  return {\n    anchor,\n    focus\n  };\n}\nfunction transformPendingPoint(editor, point, op) {\n  var pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(editor);\n  var textDiff = pendingDiffs === null || pendingDiffs === void 0 ? void 0 : pendingDiffs.find(_ref => {\n    var {\n      path\n    } = _ref;\n    return Path.equals(path, point.path);\n  });\n  if (!textDiff || point.offset <= textDiff.diff.start) {\n    return Point.transform(point, op, {\n      affinity: 'backward'\n    });\n  }\n  var {\n    diff\n  } = textDiff;\n  // Point references location inside the diff => transform the point based on the location\n  // the diff will be applied to and add the offset inside the diff.\n  if (point.offset <= diff.start + diff.text.length) {\n    var _anchor = {\n      path: point.path,\n      offset: diff.start\n    };\n    var _transformed = Point.transform(_anchor, op, {\n      affinity: 'backward'\n    });\n    if (!_transformed) {\n      return null;\n    }\n    return {\n      path: _transformed.path,\n      offset: _transformed.offset + point.offset - diff.start\n    };\n  }\n  // Point references location after the diff\n  var anchor = {\n    path: point.path,\n    offset: point.offset - diff.text.length + diff.end - diff.start\n  };\n  var transformed = Point.transform(anchor, op, {\n    affinity: 'backward'\n  });\n  if (!transformed) {\n    return null;\n  }\n  if (op.type === 'split_node' && Path.equals(op.path, point.path) && anchor.offset < op.position && diff.start < op.position) {\n    return transformed;\n  }\n  return {\n    path: transformed.path,\n    offset: transformed.offset + diff.text.length - diff.end + diff.start\n  };\n}\nfunction transformPendingRange(editor, range, op) {\n  var anchor = transformPendingPoint(editor, range.anchor, op);\n  if (!anchor) {\n    return null;\n  }\n  if (Range.isCollapsed(range)) {\n    return {\n      anchor,\n      focus: anchor\n    };\n  }\n  var focus = transformPendingPoint(editor, range.focus, op);\n  if (!focus) {\n    return null;\n  }\n  return {\n    anchor,\n    focus\n  };\n}\nfunction transformTextDiff(textDiff, op) {\n  var {\n    path,\n    diff,\n    id\n  } = textDiff;\n  switch (op.type) {\n    case 'insert_text':\n      {\n        if (!Path.equals(op.path, path) || op.offset >= diff.end) {\n          return textDiff;\n        }\n        if (op.offset <= diff.start) {\n          return {\n            diff: {\n              start: op.text.length + diff.start,\n              end: op.text.length + diff.end,\n              text: diff.text\n            },\n            id,\n            path\n          };\n        }\n        return {\n          diff: {\n            start: diff.start,\n            end: diff.end + op.text.length,\n            text: diff.text\n          },\n          id,\n          path\n        };\n      }\n    case 'remove_text':\n      {\n        if (!Path.equals(op.path, path) || op.offset >= diff.end) {\n          return textDiff;\n        }\n        if (op.offset + op.text.length <= diff.start) {\n          return {\n            diff: {\n              start: diff.start - op.text.length,\n              end: diff.end - op.text.length,\n              text: diff.text\n            },\n            id,\n            path\n          };\n        }\n        return {\n          diff: {\n            start: diff.start,\n            end: diff.end - op.text.length,\n            text: diff.text\n          },\n          id,\n          path\n        };\n      }\n    case 'split_node':\n      {\n        if (!Path.equals(op.path, path) || op.position >= diff.end) {\n          return {\n            diff,\n            id,\n            path: Path.transform(path, op, {\n              affinity: 'backward'\n            })\n          };\n        }\n        if (op.position > diff.start) {\n          return {\n            diff: {\n              start: diff.start,\n              end: Math.min(op.position, diff.end),\n              text: diff.text\n            },\n            id,\n            path\n          };\n        }\n        return {\n          diff: {\n            start: diff.start - op.position,\n            end: diff.end - op.position,\n            text: diff.text\n          },\n          id,\n          path: Path.transform(path, op, {\n            affinity: 'forward'\n          })\n        };\n      }\n    case 'merge_node':\n      {\n        if (!Path.equals(op.path, path)) {\n          return {\n            diff,\n            id,\n            path: Path.transform(path, op)\n          };\n        }\n        return {\n          diff: {\n            start: diff.start + op.position,\n            end: diff.end + op.position,\n            text: diff.text\n          },\n          id,\n          path: Path.transform(path, op)\n        };\n      }\n  }\n  var newPath = Path.transform(path, op);\n  if (!newPath) {\n    return null;\n  }\n  return {\n    diff,\n    path: newPath,\n    id\n  };\n}\n\nfunction ownKeys$6(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$6(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$6(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$6(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n// https://github.com/facebook/draft-js/blob/main/src/component/handlers/composition/DraftEditorCompositionHandler.js#L41\n// When using keyboard English association function, conpositionEnd triggered too fast, resulting in after `insertText` still maintain association state.\nvar RESOLVE_DELAY = 25;\n// Time with no user interaction before the current user action is considered as done.\nvar FLUSH_DELAY = 200;\n// Replace with `const debug = console.log` to debug\nvar debug = function debug() {};\n// Type guard to check if a value is a DataTransfer\nvar isDataTransfer = value => (value === null || value === void 0 ? void 0 : value.constructor.name) === 'DataTransfer';\nfunction createAndroidInputManager(_ref) {\n  var {\n    editor,\n    scheduleOnDOMSelectionChange,\n    onDOMSelectionChange\n  } = _ref;\n  var flushing = false;\n  var compositionEndTimeoutId = null;\n  var flushTimeoutId = null;\n  var actionTimeoutId = null;\n  var idCounter = 0;\n  var insertPositionHint = false;\n  var applyPendingSelection = () => {\n    var pendingSelection = EDITOR_TO_PENDING_SELECTION.get(editor);\n    EDITOR_TO_PENDING_SELECTION.delete(editor);\n    if (pendingSelection) {\n      var {\n        selection\n      } = editor;\n      var normalized = normalizeRange(editor, pendingSelection);\n      if (normalized && (!selection || !Range.equals(normalized, selection))) {\n        Transforms.select(editor, normalized);\n      }\n    }\n  };\n  var performAction = () => {\n    var action = EDITOR_TO_PENDING_ACTION.get(editor);\n    EDITOR_TO_PENDING_ACTION.delete(editor);\n    if (!action) {\n      return;\n    }\n    if (action.at) {\n      var target = Point.isPoint(action.at) ? normalizePoint(editor, action.at) : normalizeRange(editor, action.at);\n      if (!target) {\n        return;\n      }\n      var _targetRange = Editor.range(editor, target);\n      if (!editor.selection || !Range.equals(editor.selection, _targetRange)) {\n        Transforms.select(editor, target);\n      }\n    }\n    action.run();\n  };\n  var flush = () => {\n    if (flushTimeoutId) {\n      clearTimeout(flushTimeoutId);\n      flushTimeoutId = null;\n    }\n    if (actionTimeoutId) {\n      clearTimeout(actionTimeoutId);\n      actionTimeoutId = null;\n    }\n    if (!hasPendingDiffs() && !hasPendingAction()) {\n      applyPendingSelection();\n      return;\n    }\n    if (!flushing) {\n      flushing = true;\n      setTimeout(() => flushing = false);\n    }\n    if (hasPendingAction()) {\n      flushing = 'action';\n    }\n    var selectionRef = editor.selection && Editor.rangeRef(editor, editor.selection, {\n      affinity: 'forward'\n    });\n    EDITOR_TO_USER_MARKS.set(editor, editor.marks);\n    debug('flush', EDITOR_TO_PENDING_ACTION.get(editor), EDITOR_TO_PENDING_DIFFS.get(editor));\n    var scheduleSelectionChange = hasPendingDiffs();\n    var diff;\n    while (diff = (_EDITOR_TO_PENDING_DI = EDITOR_TO_PENDING_DIFFS.get(editor)) === null || _EDITOR_TO_PENDING_DI === void 0 ? void 0 : _EDITOR_TO_PENDING_DI[0]) {\n      var _EDITOR_TO_PENDING_DI, _EDITOR_TO_PENDING_DI2;\n      var pendingMarks = EDITOR_TO_PENDING_INSERTION_MARKS.get(editor);\n      if (pendingMarks !== undefined) {\n        EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor);\n        editor.marks = pendingMarks;\n      }\n      if (pendingMarks && insertPositionHint === false) {\n        insertPositionHint = null;\n      }\n      var range = targetRange(diff);\n      if (!editor.selection || !Range.equals(editor.selection, range)) {\n        Transforms.select(editor, range);\n      }\n      if (diff.diff.text) {\n        Editor.insertText(editor, diff.diff.text);\n      } else {\n        Editor.deleteFragment(editor);\n      }\n      // Remove diff only after we have applied it to account for it when transforming\n      // pending ranges.\n      EDITOR_TO_PENDING_DIFFS.set(editor, (_EDITOR_TO_PENDING_DI2 = EDITOR_TO_PENDING_DIFFS.get(editor)) === null || _EDITOR_TO_PENDING_DI2 === void 0 ? void 0 : _EDITOR_TO_PENDING_DI2.filter(_ref2 => {\n        var {\n          id\n        } = _ref2;\n        return id !== diff.id;\n      }));\n      if (!verifyDiffState(editor, diff)) {\n        scheduleSelectionChange = false;\n        EDITOR_TO_PENDING_ACTION.delete(editor);\n        EDITOR_TO_USER_MARKS.delete(editor);\n        flushing = 'action';\n        // Ensure we don't restore the pending user (dom) selection\n        // since the document and dom state do not match.\n        EDITOR_TO_PENDING_SELECTION.delete(editor);\n        scheduleOnDOMSelectionChange.cancel();\n        onDOMSelectionChange.cancel();\n        selectionRef === null || selectionRef === void 0 || selectionRef.unref();\n      }\n    }\n    var selection = selectionRef === null || selectionRef === void 0 ? void 0 : selectionRef.unref();\n    if (selection && !EDITOR_TO_PENDING_SELECTION.get(editor) && (!editor.selection || !Range.equals(selection, editor.selection))) {\n      Transforms.select(editor, selection);\n    }\n    if (hasPendingAction()) {\n      performAction();\n      return;\n    }\n    // COMPAT: The selectionChange event is fired after the action is performed,\n    // so we have to manually schedule it to ensure we don't 'throw away' the selection\n    // while rendering if we have pending changes.\n    if (scheduleSelectionChange) {\n      scheduleOnDOMSelectionChange();\n    }\n    scheduleOnDOMSelectionChange.flush();\n    onDOMSelectionChange.flush();\n    applyPendingSelection();\n    var userMarks = EDITOR_TO_USER_MARKS.get(editor);\n    EDITOR_TO_USER_MARKS.delete(editor);\n    if (userMarks !== undefined) {\n      editor.marks = userMarks;\n      editor.onChange();\n    }\n  };\n  var handleCompositionEnd = _event => {\n    if (compositionEndTimeoutId) {\n      clearTimeout(compositionEndTimeoutId);\n    }\n    compositionEndTimeoutId = setTimeout(() => {\n      IS_COMPOSING.set(editor, false);\n      flush();\n    }, RESOLVE_DELAY);\n  };\n  var handleCompositionStart = _event => {\n    IS_COMPOSING.set(editor, true);\n    if (compositionEndTimeoutId) {\n      clearTimeout(compositionEndTimeoutId);\n      compositionEndTimeoutId = null;\n    }\n  };\n  var updatePlaceholderVisibility = function updatePlaceholderVisibility() {\n    var forceHide = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var placeholderElement = EDITOR_TO_PLACEHOLDER_ELEMENT.get(editor);\n    if (!placeholderElement) {\n      return;\n    }\n    if (hasPendingDiffs() || forceHide) {\n      placeholderElement.style.display = 'none';\n      return;\n    }\n    placeholderElement.style.removeProperty('display');\n  };\n  var storeDiff = (path, diff) => {\n    var _EDITOR_TO_PENDING_DI3;\n    var pendingDiffs = (_EDITOR_TO_PENDING_DI3 = EDITOR_TO_PENDING_DIFFS.get(editor)) !== null && _EDITOR_TO_PENDING_DI3 !== void 0 ? _EDITOR_TO_PENDING_DI3 : [];\n    EDITOR_TO_PENDING_DIFFS.set(editor, pendingDiffs);\n    var target = Node.leaf(editor, path);\n    var idx = pendingDiffs.findIndex(change => Path.equals(change.path, path));\n    if (idx < 0) {\n      var normalized = normalizeStringDiff(target.text, diff);\n      if (normalized) {\n        pendingDiffs.push({\n          path,\n          diff,\n          id: idCounter++\n        });\n      }\n      updatePlaceholderVisibility();\n      return;\n    }\n    var merged = mergeStringDiffs(target.text, pendingDiffs[idx].diff, diff);\n    if (!merged) {\n      pendingDiffs.splice(idx, 1);\n      updatePlaceholderVisibility();\n      return;\n    }\n    pendingDiffs[idx] = _objectSpread$6(_objectSpread$6({}, pendingDiffs[idx]), {}, {\n      diff: merged\n    });\n  };\n  var scheduleAction = function scheduleAction(run) {\n    var {\n      at\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    insertPositionHint = false;\n    EDITOR_TO_PENDING_SELECTION.delete(editor);\n    scheduleOnDOMSelectionChange.cancel();\n    onDOMSelectionChange.cancel();\n    if (hasPendingAction()) {\n      flush();\n    }\n    EDITOR_TO_PENDING_ACTION.set(editor, {\n      at,\n      run\n    });\n    // COMPAT: When deleting before a non-contenteditable element chrome only fires a beforeinput,\n    // (no input) and doesn't perform any dom mutations. Without a flush timeout we would never flush\n    // in this case and thus never actually perform the action.\n    actionTimeoutId = setTimeout(flush);\n  };\n  var handleDOMBeforeInput = event => {\n    var _targetRange2;\n    if (flushTimeoutId) {\n      clearTimeout(flushTimeoutId);\n      flushTimeoutId = null;\n    }\n    var {\n      inputType: type\n    } = event;\n    var targetRange = null;\n    var data = event.dataTransfer || event.data || undefined;\n    if (insertPositionHint !== false && type !== 'insertText' && type !== 'insertCompositionText') {\n      insertPositionHint = false;\n    }\n    var [nativeTargetRange] = event.getTargetRanges();\n    if (nativeTargetRange) {\n      targetRange = ReactEditor.toSlateRange(editor, nativeTargetRange, {\n        exactMatch: false,\n        suppressThrow: true\n      });\n    }\n    // COMPAT: SelectionChange event is fired after the action is performed, so we\n    // have to manually get the selection here to ensure it's up-to-date.\n    var window = ReactEditor.getWindow(editor);\n    var domSelection = window.getSelection();\n    if (!targetRange && domSelection) {\n      nativeTargetRange = domSelection;\n      targetRange = ReactEditor.toSlateRange(editor, domSelection, {\n        exactMatch: false,\n        suppressThrow: true\n      });\n    }\n    targetRange = (_targetRange2 = targetRange) !== null && _targetRange2 !== void 0 ? _targetRange2 : editor.selection;\n    if (!targetRange) {\n      return;\n    }\n    // By default, the input manager tries to store text diffs so that we can\n    // defer flushing them at a later point in time. We don't want to flush\n    // for every input event as this can be expensive. However, there are some\n    // scenarios where we cannot safely store the text diff and must instead\n    // schedule an action to let Slate normalize the editor state.\n    var canStoreDiff = true;\n    if (type.startsWith('delete')) {\n      if (Range.isExpanded(targetRange)) {\n        var [_start, _end] = Range.edges(targetRange);\n        var _leaf = Node.leaf(editor, _start.path);\n        if (_leaf.text.length === _start.offset && _end.offset === 0) {\n          var next = Editor.next(editor, {\n            at: _start.path,\n            match: Text$1.isText\n          });\n          if (next && Path.equals(next[1], _end.path)) {\n            targetRange = {\n              anchor: _end,\n              focus: _end\n            };\n          }\n        }\n      }\n      var direction = type.endsWith('Backward') ? 'backward' : 'forward';\n      var [start, end] = Range.edges(targetRange);\n      var [leaf, path] = Editor.leaf(editor, start.path);\n      var diff = {\n        text: '',\n        start: start.offset,\n        end: end.offset\n      };\n      var pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(editor);\n      var relevantPendingDiffs = pendingDiffs === null || pendingDiffs === void 0 ? void 0 : pendingDiffs.find(change => Path.equals(change.path, path));\n      var diffs = relevantPendingDiffs ? [relevantPendingDiffs.diff, diff] : [diff];\n      var text = applyStringDiff(leaf.text, ...diffs);\n      if (text.length === 0) {\n        // Text leaf will be removed, so we need to schedule an\n        // action to remove it so that Slate can normalize instead\n        // of storing as a diff\n        canStoreDiff = false;\n      }\n      if (Range.isExpanded(targetRange)) {\n        if (canStoreDiff && Path.equals(targetRange.anchor.path, targetRange.focus.path)) {\n          var point = {\n            path: targetRange.anchor.path,\n            offset: start.offset\n          };\n          var range = Editor.range(editor, point, point);\n          handleUserSelect(range);\n          return storeDiff(targetRange.anchor.path, {\n            text: '',\n            end: end.offset,\n            start: start.offset\n          });\n        }\n        return scheduleAction(() => Editor.deleteFragment(editor, {\n          direction\n        }), {\n          at: targetRange\n        });\n      }\n    }\n    switch (type) {\n      case 'deleteByComposition':\n      case 'deleteByCut':\n      case 'deleteByDrag':\n        {\n          return scheduleAction(() => Editor.deleteFragment(editor), {\n            at: targetRange\n          });\n        }\n      case 'deleteContent':\n      case 'deleteContentForward':\n        {\n          var {\n            anchor\n          } = targetRange;\n          if (canStoreDiff && Range.isCollapsed(targetRange)) {\n            var targetNode = Node.leaf(editor, anchor.path);\n            if (anchor.offset < targetNode.text.length) {\n              return storeDiff(anchor.path, {\n                text: '',\n                start: anchor.offset,\n                end: anchor.offset + 1\n              });\n            }\n          }\n          return scheduleAction(() => Editor.deleteForward(editor), {\n            at: targetRange\n          });\n        }\n      case 'deleteContentBackward':\n        {\n          var _nativeTargetRange;\n          var {\n            anchor: _anchor\n          } = targetRange;\n          // If we have a mismatch between the native and slate selection being collapsed\n          // we are most likely deleting a zero-width placeholder and thus should perform it\n          // as an action to ensure correct behavior (mostly happens with mark placeholders)\n          var nativeCollapsed = isDOMSelection(nativeTargetRange) ? nativeTargetRange.isCollapsed : !!((_nativeTargetRange = nativeTargetRange) !== null && _nativeTargetRange !== void 0 && _nativeTargetRange.collapsed);\n          if (canStoreDiff && nativeCollapsed && Range.isCollapsed(targetRange) && _anchor.offset > 0) {\n            return storeDiff(_anchor.path, {\n              text: '',\n              start: _anchor.offset - 1,\n              end: _anchor.offset\n            });\n          }\n          return scheduleAction(() => Editor.deleteBackward(editor), {\n            at: targetRange\n          });\n        }\n      case 'deleteEntireSoftLine':\n        {\n          return scheduleAction(() => {\n            Editor.deleteBackward(editor, {\n              unit: 'line'\n            });\n            Editor.deleteForward(editor, {\n              unit: 'line'\n            });\n          }, {\n            at: targetRange\n          });\n        }\n      case 'deleteHardLineBackward':\n        {\n          return scheduleAction(() => Editor.deleteBackward(editor, {\n            unit: 'block'\n          }), {\n            at: targetRange\n          });\n        }\n      case 'deleteSoftLineBackward':\n        {\n          return scheduleAction(() => Editor.deleteBackward(editor, {\n            unit: 'line'\n          }), {\n            at: targetRange\n          });\n        }\n      case 'deleteHardLineForward':\n        {\n          return scheduleAction(() => Editor.deleteForward(editor, {\n            unit: 'block'\n          }), {\n            at: targetRange\n          });\n        }\n      case 'deleteSoftLineForward':\n        {\n          return scheduleAction(() => Editor.deleteForward(editor, {\n            unit: 'line'\n          }), {\n            at: targetRange\n          });\n        }\n      case 'deleteWordBackward':\n        {\n          return scheduleAction(() => Editor.deleteBackward(editor, {\n            unit: 'word'\n          }), {\n            at: targetRange\n          });\n        }\n      case 'deleteWordForward':\n        {\n          return scheduleAction(() => Editor.deleteForward(editor, {\n            unit: 'word'\n          }), {\n            at: targetRange\n          });\n        }\n      case 'insertLineBreak':\n        {\n          return scheduleAction(() => Editor.insertSoftBreak(editor), {\n            at: targetRange\n          });\n        }\n      case 'insertParagraph':\n        {\n          return scheduleAction(() => Editor.insertBreak(editor), {\n            at: targetRange\n          });\n        }\n      case 'insertCompositionText':\n      case 'deleteCompositionText':\n      case 'insertFromComposition':\n      case 'insertFromDrop':\n      case 'insertFromPaste':\n      case 'insertFromYank':\n      case 'insertReplacementText':\n      case 'insertText':\n        {\n          if (isDataTransfer(data)) {\n            return scheduleAction(() => ReactEditor.insertData(editor, data), {\n              at: targetRange\n            });\n          }\n          var _text = data !== null && data !== void 0 ? data : '';\n          // COMPAT: If we are writing inside a placeholder, the ime inserts the text inside\n          // the placeholder itself and thus includes the zero-width space inside edit events.\n          if (EDITOR_TO_PENDING_INSERTION_MARKS.get(editor)) {\n            _text = _text.replace('\\uFEFF', '');\n          }\n          // Pastes from the Android clipboard will generate `insertText` events.\n          // If the copied text contains any newlines, Android will append an\n          // extra newline to the end of the copied text.\n          if (type === 'insertText' && /.*\\n.*\\n$/.test(_text)) {\n            _text = _text.slice(0, -1);\n          }\n          // If the text includes a newline, split it at newlines and paste each component\n          // string, with soft breaks in between each.\n          if (_text.includes('\\n')) {\n            return scheduleAction(() => {\n              var parts = _text.split('\\n');\n              parts.forEach((line, i) => {\n                if (line) {\n                  Editor.insertText(editor, line);\n                }\n                if (i !== parts.length - 1) {\n                  Editor.insertSoftBreak(editor);\n                }\n              });\n            }, {\n              at: targetRange\n            });\n          }\n          if (Path.equals(targetRange.anchor.path, targetRange.focus.path)) {\n            var [_start2, _end2] = Range.edges(targetRange);\n            var _diff = {\n              start: _start2.offset,\n              end: _end2.offset,\n              text: _text\n            };\n            // COMPAT: Swiftkey has a weird bug where the target range of the 2nd word\n            // inserted after a mark placeholder is inserted with an anchor offset off by 1.\n            // So writing 'some text' will result in 'some ttext'. Luckily all 'normal' insert\n            // text events are fired with the correct target ranges, only the final 'insertComposition'\n            // isn't, so we can adjust the target range start offset if we are confident this is the\n            // swiftkey insert causing the issue.\n            if (_text && insertPositionHint && type === 'insertCompositionText') {\n              var hintPosition = insertPositionHint.start + insertPositionHint.text.search(/\\S|$/);\n              var diffPosition = _diff.start + _diff.text.search(/\\S|$/);\n              if (diffPosition === hintPosition + 1 && _diff.end === insertPositionHint.start + insertPositionHint.text.length) {\n                _diff.start -= 1;\n                insertPositionHint = null;\n                scheduleFlush();\n              } else {\n                insertPositionHint = false;\n              }\n            } else if (type === 'insertText') {\n              if (insertPositionHint === null) {\n                insertPositionHint = _diff;\n              } else if (insertPositionHint && Range.isCollapsed(targetRange) && insertPositionHint.end + insertPositionHint.text.length === _start2.offset) {\n                insertPositionHint = _objectSpread$6(_objectSpread$6({}, insertPositionHint), {}, {\n                  text: insertPositionHint.text + _text\n                });\n              } else {\n                insertPositionHint = false;\n              }\n            } else {\n              insertPositionHint = false;\n            }\n            if (canStoreDiff) {\n              storeDiff(_start2.path, _diff);\n              return;\n            }\n          }\n          return scheduleAction(() => Editor.insertText(editor, _text), {\n            at: targetRange\n          });\n        }\n    }\n  };\n  var hasPendingAction = () => {\n    return !!EDITOR_TO_PENDING_ACTION.get(editor);\n  };\n  var hasPendingDiffs = () => {\n    var _EDITOR_TO_PENDING_DI4;\n    return !!((_EDITOR_TO_PENDING_DI4 = EDITOR_TO_PENDING_DIFFS.get(editor)) !== null && _EDITOR_TO_PENDING_DI4 !== void 0 && _EDITOR_TO_PENDING_DI4.length);\n  };\n  var hasPendingChanges = () => {\n    return hasPendingAction() || hasPendingDiffs();\n  };\n  var isFlushing = () => {\n    return flushing;\n  };\n  var handleUserSelect = range => {\n    EDITOR_TO_PENDING_SELECTION.set(editor, range);\n    if (flushTimeoutId) {\n      clearTimeout(flushTimeoutId);\n      flushTimeoutId = null;\n    }\n    var {\n      selection\n    } = editor;\n    if (!range) {\n      return;\n    }\n    var pathChanged = !selection || !Path.equals(selection.anchor.path, range.anchor.path);\n    var parentPathChanged = !selection || !Path.equals(selection.anchor.path.slice(0, -1), range.anchor.path.slice(0, -1));\n    if (pathChanged && insertPositionHint || parentPathChanged) {\n      insertPositionHint = false;\n    }\n    if (pathChanged || hasPendingDiffs()) {\n      flushTimeoutId = setTimeout(flush, FLUSH_DELAY);\n    }\n  };\n  var handleInput = () => {\n    if (hasPendingAction() || !hasPendingDiffs()) {\n      flush();\n    }\n  };\n  var handleKeyDown = _ => {\n    // COMPAT: Swiftkey closes the keyboard when typing inside a empty node\n    // directly next to a non-contenteditable element (= the placeholder).\n    // The only event fired soon enough for us to allow hiding the placeholder\n    // without swiftkey picking it up is the keydown event, so we have to hide it\n    // here. See https://github.com/ianstormtaylor/slate/pull/4988#issuecomment-1201050535\n    if (!hasPendingDiffs()) {\n      updatePlaceholderVisibility(true);\n      setTimeout(updatePlaceholderVisibility);\n    }\n  };\n  var scheduleFlush = () => {\n    if (!hasPendingAction()) {\n      actionTimeoutId = setTimeout(flush);\n    }\n  };\n  var handleDomMutations = mutations => {\n    if (hasPendingDiffs() || hasPendingAction()) {\n      return;\n    }\n    if (mutations.some(mutation => isTrackedMutation(editor, mutation, mutations))) {\n      var _EDITOR_TO_FORCE_REND;\n      // Cause a re-render to restore the dom state if we encounter tracked mutations without\n      // a corresponding pending action.\n      (_EDITOR_TO_FORCE_REND = EDITOR_TO_FORCE_RENDER.get(editor)) === null || _EDITOR_TO_FORCE_REND === void 0 || _EDITOR_TO_FORCE_REND();\n    }\n  };\n  return {\n    flush,\n    scheduleFlush,\n    hasPendingDiffs,\n    hasPendingAction,\n    hasPendingChanges,\n    isFlushing,\n    handleUserSelect,\n    handleCompositionEnd,\n    handleCompositionStart,\n    handleDOMBeforeInput,\n    handleKeyDown,\n    handleDomMutations,\n    handleInput\n  };\n}\n\nfunction useIsMounted() {\n  var isMountedRef = useRef(false);\n  useEffect(() => {\n    isMountedRef.current = true;\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n  return isMountedRef.current;\n}\n\n/**\n * Prevent warning on SSR by falling back to useEffect when DOM isn't available\n */\nvar useIsomorphicLayoutEffect = CAN_USE_DOM ? useLayoutEffect : useEffect;\n\nfunction useMutationObserver(node, callback, options) {\n  var [mutationObserver] = useState(() => new MutationObserver(callback));\n  useIsomorphicLayoutEffect(() => {\n    // Discard mutations caused during render phase. This works due to react calling\n    // useLayoutEffect synchronously after the render phase before the next tick.\n    mutationObserver.takeRecords();\n  });\n  useEffect(() => {\n    if (!node.current) {\n      throw new Error('Failed to attach MutationObserver, `node` is undefined');\n    }\n    mutationObserver.observe(node.current, options);\n    return () => mutationObserver.disconnect();\n  }, [mutationObserver, node, options]);\n}\n\nvar _excluded$3 = [\"node\"];\nfunction ownKeys$5(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$5(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$5(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$5(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar MUTATION_OBSERVER_CONFIG$1 = {\n  subtree: true,\n  childList: true,\n  characterData: true\n};\nvar useAndroidInputManager = !IS_ANDROID ? () => null : _ref => {\n  var {\n      node\n    } = _ref,\n    options = _objectWithoutProperties(_ref, _excluded$3);\n  if (!IS_ANDROID) {\n    return null;\n  }\n  var editor = useSlateStatic();\n  var isMounted = useIsMounted();\n  var [inputManager] = useState(() => createAndroidInputManager(_objectSpread$5({\n    editor\n  }, options)));\n  useMutationObserver(node, inputManager.handleDomMutations, MUTATION_OBSERVER_CONFIG$1);\n  EDITOR_TO_SCHEDULE_FLUSH.set(editor, inputManager.scheduleFlush);\n  if (isMounted) {\n    inputManager.flush();\n  }\n  return inputManager;\n};\n\nvar _excluded$2 = [\"anchor\", \"focus\"],\n  _excluded2$1 = [\"anchor\", \"focus\"];\nvar shallowCompare = (obj1, obj2) => Object.keys(obj1).length === Object.keys(obj2).length && Object.keys(obj1).every(key => obj2.hasOwnProperty(key) && obj1[key] === obj2[key]);\nvar isDecorationFlagsEqual = (range, other) => {\n  var rangeOwnProps = _objectWithoutProperties(range, _excluded$2);\n  var otherOwnProps = _objectWithoutProperties(other, _excluded2$1);\n  return range[PLACEHOLDER_SYMBOL] === other[PLACEHOLDER_SYMBOL] && shallowCompare(rangeOwnProps, otherOwnProps);\n};\n/**\n * Check if a list of decorator ranges are equal to another.\n *\n * PERF: this requires the two lists to also have the ranges inside them in the\n * same order, but this is an okay constraint for us since decorations are\n * kept in order, and the odd case where they aren't is okay to re-render for.\n */\nvar isElementDecorationsEqual = (list, another) => {\n  if (list.length !== another.length) {\n    return false;\n  }\n  for (var i = 0; i < list.length; i++) {\n    var range = list[i];\n    var other = another[i];\n    if (!Range.equals(range, other) || !isDecorationFlagsEqual(range, other)) {\n      return false;\n    }\n  }\n  return true;\n};\n/**\n * Check if a list of decorator ranges are equal to another.\n *\n * PERF: this requires the two lists to also have the ranges inside them in the\n * same order, but this is an okay constraint for us since decorations are\n * kept in order, and the odd case where they aren't is okay to re-render for.\n */\nvar isTextDecorationsEqual = (list, another) => {\n  if (list.length !== another.length) {\n    return false;\n  }\n  for (var i = 0; i < list.length; i++) {\n    var range = list[i];\n    var other = another[i];\n    // compare only offsets because paths doesn't matter for text\n    if (range.anchor.offset !== other.anchor.offset || range.focus.offset !== other.focus.offset || !isDecorationFlagsEqual(range, other)) {\n      return false;\n    }\n  }\n  return true;\n};\n\nfunction ownKeys$4(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$4(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$4(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$4(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n/**\n * Leaf content strings.\n */\nvar String$1 = props => {\n  var {\n    isLast,\n    leaf,\n    parent,\n    text\n  } = props;\n  var editor = useSlateStatic();\n  var path = ReactEditor.findPath(editor, text);\n  var parentPath = Path.parent(path);\n  var isMarkPlaceholder = Boolean(leaf[MARK_PLACEHOLDER_SYMBOL]);\n  // COMPAT: Render text inside void nodes with a zero-width space.\n  // So the node can contain selection but the text is not visible.\n  if (editor.isVoid(parent)) {\n    return /*#__PURE__*/React.createElement(ZeroWidthString, {\n      length: Node.string(parent).length\n    });\n  }\n  // COMPAT: If this is the last text node in an empty block, render a zero-\n  // width space that will convert into a line break when copying and pasting\n  // to support expected plain text.\n  if (leaf.text === '' && parent.children[parent.children.length - 1] === text && !editor.isInline(parent) && Editor.string(editor, parentPath) === '') {\n    return /*#__PURE__*/React.createElement(ZeroWidthString, {\n      isLineBreak: true,\n      isMarkPlaceholder: isMarkPlaceholder\n    });\n  }\n  // COMPAT: If the text is empty, it's because it's on the edge of an inline\n  // node, so we render a zero-width space so that the selection can be\n  // inserted next to it still.\n  if (leaf.text === '') {\n    return /*#__PURE__*/React.createElement(ZeroWidthString, {\n      isMarkPlaceholder: isMarkPlaceholder\n    });\n  }\n  // COMPAT: Browsers will collapse trailing new lines at the end of blocks,\n  // so we need to add an extra trailing new lines to prevent that.\n  if (isLast && leaf.text.slice(-1) === '\\n') {\n    return /*#__PURE__*/React.createElement(TextString, {\n      isTrailing: true,\n      text: leaf.text\n    });\n  }\n  return /*#__PURE__*/React.createElement(TextString, {\n    text: leaf.text\n  });\n};\n/**\n * Leaf strings with text in them.\n */\nvar TextString = props => {\n  var {\n    text,\n    isTrailing = false\n  } = props;\n  var ref = useRef(null);\n  var getTextContent = () => {\n    return \"\".concat(text !== null && text !== void 0 ? text : '').concat(isTrailing ? '\\n' : '');\n  };\n  var [initialText] = useState(getTextContent);\n  // This is the actual text rendering boundary where we interface with the DOM\n  // The text is not rendered as part of the virtual DOM, as since we handle basic character insertions natively,\n  // updating the DOM is not a one way dataflow anymore. What we need here is not reconciliation and diffing\n  // with previous version of the virtual DOM, but rather diffing with the actual DOM element, and replace the DOM <span> content\n  // exactly if and only if its current content does not match our current virtual DOM.\n  // Otherwise the DOM TextNode would always be replaced by React as the user types, which interferes with native text features,\n  // eg makes native spellcheck opt out from checking the text node.\n  // useLayoutEffect: updating our span before browser paint\n  useIsomorphicLayoutEffect(() => {\n    // null coalescing text to make sure we're not outputing \"null\" as a string in the extreme case it is nullish at runtime\n    var textWithTrailing = getTextContent();\n    if (ref.current && ref.current.textContent !== textWithTrailing) {\n      ref.current.textContent = textWithTrailing;\n    }\n    // intentionally not specifying dependencies, so that this effect runs on every render\n    // as this effectively replaces \"specifying the text in the virtual DOM under the <span> below\" on each render\n  });\n  // We intentionally render a memoized <span> that only receives the initial text content when the component is mounted.\n  // We defer to the layout effect above to update the `textContent` of the span element when needed.\n  return /*#__PURE__*/React.createElement(MemoizedText$1, {\n    ref: ref\n  }, initialText);\n};\nvar MemoizedText$1 = /*#__PURE__*/memo( /*#__PURE__*/forwardRef((props, ref) => {\n  return /*#__PURE__*/React.createElement(\"span\", {\n    \"data-slate-string\": true,\n    ref: ref\n  }, props.children);\n}));\n/**\n * Leaf strings without text, render as zero-width strings.\n */\nvar ZeroWidthString = props => {\n  var {\n    length = 0,\n    isLineBreak = false,\n    isMarkPlaceholder = false\n  } = props;\n  var attributes = {\n    'data-slate-zero-width': isLineBreak ? 'n' : 'z',\n    'data-slate-length': length\n  };\n  if (isMarkPlaceholder) {\n    attributes['data-slate-mark-placeholder'] = true;\n  }\n  return /*#__PURE__*/React.createElement(\"span\", _objectSpread$4({}, attributes), !IS_ANDROID || !isLineBreak ? '\\uFEFF' : null, isLineBreak ? /*#__PURE__*/React.createElement(\"br\", null) : null);\n};\n\nfunction ownKeys$3(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$3(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$3(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$3(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n// Delay the placeholder on Android to prevent the keyboard from closing.\n// (https://github.com/ianstormtaylor/slate/pull/5368)\nvar PLACEHOLDER_DELAY = IS_ANDROID ? 300 : 0;\nfunction disconnectPlaceholderResizeObserver(placeholderResizeObserver, releaseObserver) {\n  if (placeholderResizeObserver.current) {\n    placeholderResizeObserver.current.disconnect();\n    if (releaseObserver) {\n      placeholderResizeObserver.current = null;\n    }\n  }\n}\nfunction clearTimeoutRef(timeoutRef) {\n  if (timeoutRef.current) {\n    clearTimeout(timeoutRef.current);\n    timeoutRef.current = null;\n  }\n}\n/**\n * Individual leaves in a text node with unique formatting.\n */\nvar Leaf = props => {\n  var {\n    leaf,\n    isLast,\n    text,\n    parent,\n    renderPlaceholder,\n    renderLeaf = props => /*#__PURE__*/React.createElement(DefaultLeaf, _objectSpread$3({}, props))\n  } = props;\n  var editor = useSlateStatic();\n  var placeholderResizeObserver = useRef(null);\n  var placeholderRef = useRef(null);\n  var [showPlaceholder, setShowPlaceholder] = useState(false);\n  var showPlaceholderTimeoutRef = useRef(null);\n  var callbackPlaceholderRef = useCallback(placeholderEl => {\n    disconnectPlaceholderResizeObserver(placeholderResizeObserver, placeholderEl == null);\n    if (placeholderEl == null) {\n      var _leaf$onPlaceholderRe;\n      EDITOR_TO_PLACEHOLDER_ELEMENT.delete(editor);\n      (_leaf$onPlaceholderRe = leaf.onPlaceholderResize) === null || _leaf$onPlaceholderRe === void 0 || _leaf$onPlaceholderRe.call(leaf, null);\n    } else {\n      EDITOR_TO_PLACEHOLDER_ELEMENT.set(editor, placeholderEl);\n      if (!placeholderResizeObserver.current) {\n        // Create a new observer and observe the placeholder element.\n        var ResizeObserver$1 = window.ResizeObserver || ResizeObserver;\n        placeholderResizeObserver.current = new ResizeObserver$1(() => {\n          var _leaf$onPlaceholderRe2;\n          (_leaf$onPlaceholderRe2 = leaf.onPlaceholderResize) === null || _leaf$onPlaceholderRe2 === void 0 || _leaf$onPlaceholderRe2.call(leaf, placeholderEl);\n        });\n      }\n      placeholderResizeObserver.current.observe(placeholderEl);\n      placeholderRef.current = placeholderEl;\n    }\n  }, [placeholderRef, leaf, editor]);\n  var children = /*#__PURE__*/React.createElement(String$1, {\n    isLast: isLast,\n    leaf: leaf,\n    parent: parent,\n    text: text\n  });\n  var leafIsPlaceholder = Boolean(leaf[PLACEHOLDER_SYMBOL]);\n  useEffect(() => {\n    if (leafIsPlaceholder) {\n      if (!showPlaceholderTimeoutRef.current) {\n        // Delay the placeholder, so it will not render in a selection\n        showPlaceholderTimeoutRef.current = setTimeout(() => {\n          setShowPlaceholder(true);\n          showPlaceholderTimeoutRef.current = null;\n        }, PLACEHOLDER_DELAY);\n      }\n    } else {\n      clearTimeoutRef(showPlaceholderTimeoutRef);\n      setShowPlaceholder(false);\n    }\n    return () => clearTimeoutRef(showPlaceholderTimeoutRef);\n  }, [leafIsPlaceholder, setShowPlaceholder]);\n  if (leafIsPlaceholder && showPlaceholder) {\n    var placeholderProps = {\n      children: leaf.placeholder,\n      attributes: {\n        'data-slate-placeholder': true,\n        style: {\n          position: 'absolute',\n          top: 0,\n          pointerEvents: 'none',\n          width: '100%',\n          maxWidth: '100%',\n          display: 'block',\n          opacity: '0.333',\n          userSelect: 'none',\n          textDecoration: 'none',\n          // Fixes https://github.com/udecode/plate/issues/2315\n          WebkitUserModify: IS_WEBKIT ? 'inherit' : undefined\n        },\n        contentEditable: false,\n        ref: callbackPlaceholderRef\n      }\n    };\n    children = /*#__PURE__*/React.createElement(React.Fragment, null, renderPlaceholder(placeholderProps), children);\n  }\n  // COMPAT: Having the `data-` attributes on these leaf elements ensures that\n  // in certain misbehaving browsers they aren't weirdly cloned/destroyed by\n  // contenteditable behaviors. (2019/05/08)\n  var attributes = {\n    'data-slate-leaf': true\n  };\n  return renderLeaf({\n    attributes,\n    children,\n    leaf,\n    text\n  });\n};\nvar MemoizedLeaf = /*#__PURE__*/React.memo(Leaf, (prev, next) => {\n  return next.parent === prev.parent && next.isLast === prev.isLast && next.renderLeaf === prev.renderLeaf && next.renderPlaceholder === prev.renderPlaceholder && next.text === prev.text && Text$1.equals(next.leaf, prev.leaf) && next.leaf[PLACEHOLDER_SYMBOL] === prev.leaf[PLACEHOLDER_SYMBOL];\n});\nvar DefaultLeaf = props => {\n  var {\n    attributes,\n    children\n  } = props;\n  return /*#__PURE__*/React.createElement(\"span\", _objectSpread$3({}, attributes), children);\n};\n\n/**\n * Text.\n */\nvar Text = props => {\n  var {\n    decorations,\n    isLast,\n    parent,\n    renderPlaceholder,\n    renderLeaf,\n    text\n  } = props;\n  var editor = useSlateStatic();\n  var ref = useRef(null);\n  var leaves = Text$1.decorations(text, decorations);\n  var key = ReactEditor.findKey(editor, text);\n  var children = [];\n  for (var i = 0; i < leaves.length; i++) {\n    var leaf = leaves[i];\n    children.push( /*#__PURE__*/React.createElement(MemoizedLeaf, {\n      isLast: isLast && i === leaves.length - 1,\n      key: \"\".concat(key.id, \"-\").concat(i),\n      renderPlaceholder: renderPlaceholder,\n      leaf: leaf,\n      text: text,\n      parent: parent,\n      renderLeaf: renderLeaf\n    }));\n  }\n  // Update element-related weak maps with the DOM element ref.\n  var callbackRef = useCallback(span => {\n    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);\n    if (span) {\n      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 || KEY_TO_ELEMENT.set(key, span);\n      NODE_TO_ELEMENT.set(text, span);\n      ELEMENT_TO_NODE.set(span, text);\n    } else {\n      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 || KEY_TO_ELEMENT.delete(key);\n      NODE_TO_ELEMENT.delete(text);\n      if (ref.current) {\n        ELEMENT_TO_NODE.delete(ref.current);\n      }\n    }\n    ref.current = span;\n  }, [ref, editor, key, text]);\n  return /*#__PURE__*/React.createElement(\"span\", {\n    \"data-slate-node\": \"text\",\n    ref: callbackRef\n  }, children);\n};\nvar MemoizedText = /*#__PURE__*/React.memo(Text, (prev, next) => {\n  return next.parent === prev.parent && next.isLast === prev.isLast && next.renderLeaf === prev.renderLeaf && next.renderPlaceholder === prev.renderPlaceholder && next.text === prev.text && isTextDecorationsEqual(next.decorations, prev.decorations);\n});\n\nfunction ownKeys$2(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$2(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$2(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$2(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n/**\n * Element.\n */\nvar Element = props => {\n  var {\n    decorations,\n    element,\n    renderElement = p => /*#__PURE__*/React.createElement(DefaultElement, _objectSpread$2({}, p)),\n    renderPlaceholder,\n    renderLeaf,\n    selection\n  } = props;\n  var editor = useSlateStatic();\n  var readOnly = useReadOnly();\n  var isInline = editor.isInline(element);\n  var key = ReactEditor.findKey(editor, element);\n  var ref = useCallback(ref => {\n    // Update element-related weak maps with the DOM element ref.\n    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);\n    if (ref) {\n      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 || KEY_TO_ELEMENT.set(key, ref);\n      NODE_TO_ELEMENT.set(element, ref);\n      ELEMENT_TO_NODE.set(ref, element);\n    } else {\n      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 || KEY_TO_ELEMENT.delete(key);\n      NODE_TO_ELEMENT.delete(element);\n    }\n  }, [editor, key, element]);\n  var children = useChildren({\n    decorations,\n    node: element,\n    renderElement,\n    renderPlaceholder,\n    renderLeaf,\n    selection\n  });\n  // Attributes that the developer must mix into the element in their\n  // custom node renderer component.\n  var attributes = {\n    'data-slate-node': 'element',\n    ref\n  };\n  if (isInline) {\n    attributes['data-slate-inline'] = true;\n  }\n  // If it's a block node with inline children, add the proper `dir` attribute\n  // for text direction.\n  if (!isInline && Editor.hasInlines(editor, element)) {\n    var text = Node.string(element);\n    var dir = getDirection(text);\n    if (dir === 'rtl') {\n      attributes.dir = dir;\n    }\n  }\n  // If it's a void node, wrap the children in extra void-specific elements.\n  if (Editor.isVoid(editor, element)) {\n    attributes['data-slate-void'] = true;\n    if (!readOnly && isInline) {\n      attributes.contentEditable = false;\n    }\n    var Tag = isInline ? 'span' : 'div';\n    var [[_text]] = Node.texts(element);\n    children = /*#__PURE__*/React.createElement(Tag, {\n      \"data-slate-spacer\": true,\n      style: {\n        height: '0',\n        color: 'transparent',\n        outline: 'none',\n        position: 'absolute'\n      }\n    }, /*#__PURE__*/React.createElement(MemoizedText, {\n      renderPlaceholder: renderPlaceholder,\n      decorations: [],\n      isLast: false,\n      parent: element,\n      text: _text\n    }));\n    NODE_TO_INDEX.set(_text, 0);\n    NODE_TO_PARENT.set(_text, element);\n  }\n  return renderElement({\n    attributes,\n    children,\n    element\n  });\n};\nvar MemoizedElement = /*#__PURE__*/React.memo(Element, (prev, next) => {\n  return prev.element === next.element && prev.renderElement === next.renderElement && prev.renderLeaf === next.renderLeaf && prev.renderPlaceholder === next.renderPlaceholder && isElementDecorationsEqual(prev.decorations, next.decorations) && (prev.selection === next.selection || !!prev.selection && !!next.selection && Range.equals(prev.selection, next.selection));\n});\n/**\n * The default element renderer.\n */\nvar DefaultElement = props => {\n  var {\n    attributes,\n    children,\n    element\n  } = props;\n  var editor = useSlateStatic();\n  var Tag = editor.isInline(element) ? 'span' : 'div';\n  return /*#__PURE__*/React.createElement(Tag, _objectSpread$2(_objectSpread$2({}, attributes), {}, {\n    style: {\n      position: 'relative'\n    }\n  }), children);\n};\n\n/**\n * A React context for sharing the `decorate` prop of the editable.\n */\nvar DecorateContext = /*#__PURE__*/createContext(() => []);\n/**\n * Get the current `decorate` prop of the editable.\n */\nvar useDecorate = () => {\n  return useContext(DecorateContext);\n};\n\n/**\n * A React context for sharing the `selected` state of an element.\n */\nvar SelectedContext = /*#__PURE__*/createContext(false);\n/**\n * Get the current `selected` state of an element.\n */\nvar useSelected = () => {\n  return useContext(SelectedContext);\n};\n\n/**\n * Children.\n */\nvar useChildren = props => {\n  var {\n    decorations,\n    node,\n    renderElement,\n    renderPlaceholder,\n    renderLeaf,\n    selection\n  } = props;\n  var decorate = useDecorate();\n  var editor = useSlateStatic();\n  var path = ReactEditor.findPath(editor, node);\n  var children = [];\n  var isLeafBlock = Element$1.isElement(node) && !editor.isInline(node) && Editor.hasInlines(editor, node);\n  for (var i = 0; i < node.children.length; i++) {\n    var p = path.concat(i);\n    var n = node.children[i];\n    var key = ReactEditor.findKey(editor, n);\n    var range = Editor.range(editor, p);\n    var sel = selection && Range.intersection(range, selection);\n    var ds = decorate([n, p]);\n    for (var dec of decorations) {\n      var d = Range.intersection(dec, range);\n      if (d) {\n        ds.push(d);\n      }\n    }\n    if (Element$1.isElement(n)) {\n      children.push( /*#__PURE__*/React.createElement(SelectedContext.Provider, {\n        key: \"provider-\".concat(key.id),\n        value: !!sel\n      }, /*#__PURE__*/React.createElement(MemoizedElement, {\n        decorations: ds,\n        element: n,\n        key: key.id,\n        renderElement: renderElement,\n        renderPlaceholder: renderPlaceholder,\n        renderLeaf: renderLeaf,\n        selection: sel\n      })));\n    } else {\n      children.push( /*#__PURE__*/React.createElement(MemoizedText, {\n        decorations: ds,\n        key: key.id,\n        isLast: isLeafBlock && i === node.children.length - 1,\n        parent: node,\n        renderPlaceholder: renderPlaceholder,\n        renderLeaf: renderLeaf,\n        text: n\n      }));\n    }\n    NODE_TO_INDEX.set(n, i);\n    NODE_TO_PARENT.set(n, node);\n  }\n  return children;\n};\n\n/**\n * A React context for sharing the `readOnly` state of the editor.\n */\nvar ReadOnlyContext = /*#__PURE__*/createContext(false);\n/**\n * Get the current `readOnly` state of the editor.\n */\nvar useReadOnly = () => {\n  return useContext(ReadOnlyContext);\n};\n\nvar SlateContext = /*#__PURE__*/createContext(null);\n/**\n * Get the current editor object from the React context.\n */\nvar useSlate = () => {\n  var context = useContext(SlateContext);\n  if (!context) {\n    throw new Error(\"The `useSlate` hook must be used inside the <Slate> component's context.\");\n  }\n  var {\n    editor\n  } = context;\n  return editor;\n};\nvar useSlateWithV = () => {\n  var context = useContext(SlateContext);\n  if (!context) {\n    throw new Error(\"The `useSlate` hook must be used inside the <Slate> component's context.\");\n  }\n  return context;\n};\n\nfunction useTrackUserInput() {\n  var editor = useSlateStatic();\n  var receivedUserInput = useRef(false);\n  var animationFrameIdRef = useRef(0);\n  var onUserInput = useCallback(() => {\n    if (receivedUserInput.current) {\n      return;\n    }\n    receivedUserInput.current = true;\n    var window = ReactEditor.getWindow(editor);\n    window.cancelAnimationFrame(animationFrameIdRef.current);\n    animationFrameIdRef.current = window.requestAnimationFrame(() => {\n      receivedUserInput.current = false;\n    });\n  }, [editor]);\n  useEffect(() => () => cancelAnimationFrame(animationFrameIdRef.current), []);\n  return {\n    receivedUserInput,\n    onUserInput\n  };\n}\n\nvar TRIPLE_CLICK = 3;\n\n/**\n * Hotkey mappings for each platform.\n */\nvar HOTKEYS = {\n  bold: 'mod+b',\n  compose: ['down', 'left', 'right', 'up', 'backspace', 'enter'],\n  moveBackward: 'left',\n  moveForward: 'right',\n  moveWordBackward: 'ctrl+left',\n  moveWordForward: 'ctrl+right',\n  deleteBackward: 'shift?+backspace',\n  deleteForward: 'shift?+delete',\n  extendBackward: 'shift+left',\n  extendForward: 'shift+right',\n  italic: 'mod+i',\n  insertSoftBreak: 'shift+enter',\n  splitBlock: 'enter',\n  undo: 'mod+z'\n};\nvar APPLE_HOTKEYS = {\n  moveLineBackward: 'opt+up',\n  moveLineForward: 'opt+down',\n  moveWordBackward: 'opt+left',\n  moveWordForward: 'opt+right',\n  deleteBackward: ['ctrl+backspace', 'ctrl+h'],\n  deleteForward: ['ctrl+delete', 'ctrl+d'],\n  deleteLineBackward: 'cmd+shift?+backspace',\n  deleteLineForward: ['cmd+shift?+delete', 'ctrl+k'],\n  deleteWordBackward: 'opt+shift?+backspace',\n  deleteWordForward: 'opt+shift?+delete',\n  extendLineBackward: 'opt+shift+up',\n  extendLineForward: 'opt+shift+down',\n  redo: 'cmd+shift+z',\n  transposeCharacter: 'ctrl+t'\n};\nvar WINDOWS_HOTKEYS = {\n  deleteWordBackward: 'ctrl+shift?+backspace',\n  deleteWordForward: 'ctrl+shift?+delete',\n  redo: ['ctrl+y', 'ctrl+shift+z']\n};\n/**\n * Create a platform-aware hotkey checker.\n */\nvar create = key => {\n  var generic = HOTKEYS[key];\n  var apple = APPLE_HOTKEYS[key];\n  var windows = WINDOWS_HOTKEYS[key];\n  var isGeneric = generic && isHotkey(generic);\n  var isApple = apple && isHotkey(apple);\n  var isWindows = windows && isHotkey(windows);\n  return event => {\n    if (isGeneric && isGeneric(event)) return true;\n    if (IS_APPLE && isApple && isApple(event)) return true;\n    if (!IS_APPLE && isWindows && isWindows(event)) return true;\n    return false;\n  };\n};\n/**\n * Hotkeys.\n */\nvar Hotkeys = {\n  isBold: create('bold'),\n  isCompose: create('compose'),\n  isMoveBackward: create('moveBackward'),\n  isMoveForward: create('moveForward'),\n  isDeleteBackward: create('deleteBackward'),\n  isDeleteForward: create('deleteForward'),\n  isDeleteLineBackward: create('deleteLineBackward'),\n  isDeleteLineForward: create('deleteLineForward'),\n  isDeleteWordBackward: create('deleteWordBackward'),\n  isDeleteWordForward: create('deleteWordForward'),\n  isExtendBackward: create('extendBackward'),\n  isExtendForward: create('extendForward'),\n  isExtendLineBackward: create('extendLineBackward'),\n  isExtendLineForward: create('extendLineForward'),\n  isItalic: create('italic'),\n  isMoveLineBackward: create('moveLineBackward'),\n  isMoveLineForward: create('moveLineForward'),\n  isMoveWordBackward: create('moveWordBackward'),\n  isMoveWordForward: create('moveWordForward'),\n  isRedo: create('redo'),\n  isSoftBreak: create('insertSoftBreak'),\n  isSplitBlock: create('splitBlock'),\n  isTransposeCharacter: create('transposeCharacter'),\n  isUndo: create('undo')\n};\n\nvar createRestoreDomManager = (editor, receivedUserInput) => {\n  var bufferedMutations = [];\n  var clear = () => {\n    bufferedMutations = [];\n  };\n  var registerMutations = mutations => {\n    if (!receivedUserInput.current) {\n      return;\n    }\n    var trackedMutations = mutations.filter(mutation => isTrackedMutation(editor, mutation, mutations));\n    bufferedMutations.push(...trackedMutations);\n  };\n  function restoreDOM() {\n    if (bufferedMutations.length > 0) {\n      bufferedMutations.reverse().forEach(mutation => {\n        if (mutation.type === 'characterData') {\n          // We don't want to restore the DOM for characterData mutations\n          // because this interrupts the composition.\n          return;\n        }\n        mutation.removedNodes.forEach(node => {\n          mutation.target.insertBefore(node, mutation.nextSibling);\n        });\n        mutation.addedNodes.forEach(node => {\n          mutation.target.removeChild(node);\n        });\n      });\n      // Clear buffered mutations to ensure we don't undo them twice\n      clear();\n    }\n  }\n  return {\n    registerMutations,\n    restoreDOM,\n    clear\n  };\n};\n\nvar MUTATION_OBSERVER_CONFIG = {\n  subtree: true,\n  childList: true,\n  characterData: true,\n  characterDataOldValue: true\n};\n// We have to use a class component here since we rely on `getSnapshotBeforeUpdate` which has no FC equivalent\n// to run code synchronously immediately before react commits the component update to the DOM.\nclass RestoreDOMComponent extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"context\", null);\n    _defineProperty(this, \"manager\", null);\n    _defineProperty(this, \"mutationObserver\", null);\n  }\n  observe() {\n    var _this$mutationObserve;\n    var {\n      node\n    } = this.props;\n    if (!node.current) {\n      throw new Error('Failed to attach MutationObserver, `node` is undefined');\n    }\n    (_this$mutationObserve = this.mutationObserver) === null || _this$mutationObserve === void 0 || _this$mutationObserve.observe(node.current, MUTATION_OBSERVER_CONFIG);\n  }\n  componentDidMount() {\n    var {\n      receivedUserInput\n    } = this.props;\n    var editor = this.context;\n    this.manager = createRestoreDomManager(editor, receivedUserInput);\n    this.mutationObserver = new MutationObserver(this.manager.registerMutations);\n    this.observe();\n  }\n  getSnapshotBeforeUpdate() {\n    var _this$mutationObserve2, _this$mutationObserve3, _this$manager2;\n    var pendingMutations = (_this$mutationObserve2 = this.mutationObserver) === null || _this$mutationObserve2 === void 0 ? void 0 : _this$mutationObserve2.takeRecords();\n    if (pendingMutations !== null && pendingMutations !== void 0 && pendingMutations.length) {\n      var _this$manager;\n      (_this$manager = this.manager) === null || _this$manager === void 0 || _this$manager.registerMutations(pendingMutations);\n    }\n    (_this$mutationObserve3 = this.mutationObserver) === null || _this$mutationObserve3 === void 0 || _this$mutationObserve3.disconnect();\n    (_this$manager2 = this.manager) === null || _this$manager2 === void 0 || _this$manager2.restoreDOM();\n    return null;\n  }\n  componentDidUpdate() {\n    var _this$manager3;\n    (_this$manager3 = this.manager) === null || _this$manager3 === void 0 || _this$manager3.clear();\n    this.observe();\n  }\n  componentWillUnmount() {\n    var _this$mutationObserve4;\n    (_this$mutationObserve4 = this.mutationObserver) === null || _this$mutationObserve4 === void 0 || _this$mutationObserve4.disconnect();\n  }\n  render() {\n    return this.props.children;\n  }\n}\n_defineProperty(RestoreDOMComponent, \"contextType\", EditorContext);\nvar RestoreDOM = IS_ANDROID ? RestoreDOMComponent : _ref => {\n  var {\n    children\n  } = _ref;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n};\n\nvar _excluded$1 = [\"autoFocus\", \"decorate\", \"onDOMBeforeInput\", \"placeholder\", \"readOnly\", \"renderElement\", \"renderLeaf\", \"renderPlaceholder\", \"scrollSelectionIntoView\", \"style\", \"as\", \"disableDefaultStyles\"],\n  _excluded2 = [\"text\"];\nfunction ownKeys$1(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$1(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$1(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$1(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar Children = props => /*#__PURE__*/React.createElement(React.Fragment, null, useChildren(props));\n/**\n * Editable.\n */\nvar Editable = props => {\n  var defaultRenderPlaceholder = useCallback(props => /*#__PURE__*/React.createElement(DefaultPlaceholder, _objectSpread$1({}, props)), []);\n  var {\n      autoFocus,\n      decorate = defaultDecorate,\n      onDOMBeforeInput: propsOnDOMBeforeInput,\n      placeholder,\n      readOnly = false,\n      renderElement,\n      renderLeaf,\n      renderPlaceholder = defaultRenderPlaceholder,\n      scrollSelectionIntoView = defaultScrollSelectionIntoView,\n      style: userStyle = {},\n      as: Component = 'div',\n      disableDefaultStyles = false\n    } = props,\n    attributes = _objectWithoutProperties(props, _excluded$1);\n  var editor = useSlate();\n  // Rerender editor when composition status changed\n  var [isComposing, setIsComposing] = useState(false);\n  var ref = useRef(null);\n  var deferredOperations = useRef([]);\n  var [placeholderHeight, setPlaceholderHeight] = useState();\n  var {\n    onUserInput,\n    receivedUserInput\n  } = useTrackUserInput();\n  var [, forceRender] = useReducer(s => s + 1, 0);\n  EDITOR_TO_FORCE_RENDER.set(editor, forceRender);\n  // Update internal state on each render.\n  IS_READ_ONLY.set(editor, readOnly);\n  // Keep track of some state for the event handler logic.\n  var state = useMemo(() => ({\n    isDraggingInternally: false,\n    isUpdatingSelection: false,\n    latestElement: null,\n    hasMarkPlaceholder: false\n  }), []);\n  // The autoFocus TextareaHTMLAttribute doesn't do anything on a div, so it\n  // needs to be manually focused.\n  useEffect(() => {\n    if (ref.current && autoFocus) {\n      ref.current.focus();\n    }\n  }, [autoFocus]);\n  /**\n   * The AndroidInputManager object has a cyclical dependency on onDOMSelectionChange\n   *\n   * It is defined as a reference to simplify hook dependencies and clarify that\n   * it needs to be initialized.\n   */\n  var androidInputManagerRef = useRef();\n  // Listen on the native `selectionchange` event to be able to update any time\n  // the selection changes. This is required because React's `onSelect` is leaky\n  // and non-standard so it doesn't fire until after a selection has been\n  // released. This causes issues in situations where another change happens\n  // while a selection is being dragged.\n  var onDOMSelectionChange = useMemo(() => throttle(() => {\n    var androidInputManager = androidInputManagerRef.current;\n    if ((IS_ANDROID || !ReactEditor.isComposing(editor)) && (!state.isUpdatingSelection || androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.isFlushing()) && !state.isDraggingInternally) {\n      var root = ReactEditor.findDocumentOrShadowRoot(editor);\n      var {\n        activeElement\n      } = root;\n      var el = ReactEditor.toDOMNode(editor, editor);\n      var domSelection = root.getSelection();\n      if (activeElement === el) {\n        state.latestElement = activeElement;\n        IS_FOCUSED.set(editor, true);\n      } else {\n        IS_FOCUSED.delete(editor);\n      }\n      if (!domSelection) {\n        return Transforms.deselect(editor);\n      }\n      var {\n        anchorNode,\n        focusNode\n      } = domSelection;\n      var anchorNodeSelectable = ReactEditor.hasEditableTarget(editor, anchorNode) || ReactEditor.isTargetInsideNonReadonlyVoid(editor, anchorNode);\n      var focusNodeSelectable = ReactEditor.hasEditableTarget(editor, focusNode) || ReactEditor.isTargetInsideNonReadonlyVoid(editor, focusNode);\n      if (anchorNodeSelectable && focusNodeSelectable) {\n        var range = ReactEditor.toSlateRange(editor, domSelection, {\n          exactMatch: false,\n          suppressThrow: true\n        });\n        if (range) {\n          if (!ReactEditor.isComposing(editor) && !(androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.hasPendingChanges()) && !(androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.isFlushing())) {\n            Transforms.select(editor, range);\n          } else {\n            androidInputManager === null || androidInputManager === void 0 || androidInputManager.handleUserSelect(range);\n          }\n        }\n      }\n      // Deselect the editor if the dom selection is not selectable in readonly mode\n      if (readOnly && (!anchorNodeSelectable || !focusNodeSelectable)) {\n        Transforms.deselect(editor);\n      }\n    }\n  }, 100), [editor, readOnly, state]);\n  var scheduleOnDOMSelectionChange = useMemo(() => debounce(onDOMSelectionChange, 0), [onDOMSelectionChange]);\n  androidInputManagerRef.current = useAndroidInputManager({\n    node: ref,\n    onDOMSelectionChange,\n    scheduleOnDOMSelectionChange\n  });\n  useIsomorphicLayoutEffect(() => {\n    var _androidInputManagerR, _androidInputManagerR2;\n    // Update element-related weak maps with the DOM element ref.\n    var window;\n    if (ref.current && (window = getDefaultView(ref.current))) {\n      EDITOR_TO_WINDOW.set(editor, window);\n      EDITOR_TO_ELEMENT.set(editor, ref.current);\n      NODE_TO_ELEMENT.set(editor, ref.current);\n      ELEMENT_TO_NODE.set(ref.current, editor);\n    } else {\n      NODE_TO_ELEMENT.delete(editor);\n    }\n    // Make sure the DOM selection state is in sync.\n    var {\n      selection\n    } = editor;\n    var root = ReactEditor.findDocumentOrShadowRoot(editor);\n    var domSelection = root.getSelection();\n    if (!domSelection || !ReactEditor.isFocused(editor) || (_androidInputManagerR = androidInputManagerRef.current) !== null && _androidInputManagerR !== void 0 && _androidInputManagerR.hasPendingAction()) {\n      return;\n    }\n    var setDomSelection = forceChange => {\n      var hasDomSelection = domSelection.type !== 'None';\n      // If the DOM selection is properly unset, we're done.\n      if (!selection && !hasDomSelection) {\n        return;\n      }\n      // Get anchorNode and focusNode\n      var focusNode = domSelection.focusNode;\n      var anchorNode;\n      // COMPAT: In firefox the normal seletion way does not work\n      // (https://github.com/ianstormtaylor/slate/pull/5486#issue-1820720223)\n      if (IS_FIREFOX && domSelection.rangeCount > 1) {\n        var firstRange = domSelection.getRangeAt(0);\n        var lastRange = domSelection.getRangeAt(domSelection.rangeCount - 1);\n        // Right to left\n        if (firstRange.startContainer === focusNode) {\n          anchorNode = lastRange.endContainer;\n        } else {\n          // Left to right\n          anchorNode = firstRange.startContainer;\n        }\n      } else {\n        anchorNode = domSelection.anchorNode;\n      }\n      // verify that the dom selection is in the editor\n      var editorElement = EDITOR_TO_ELEMENT.get(editor);\n      var hasDomSelectionInEditor = false;\n      if (editorElement.contains(anchorNode) && editorElement.contains(focusNode)) {\n        hasDomSelectionInEditor = true;\n      }\n      // If the DOM selection is in the editor and the editor selection is already correct, we're done.\n      if (hasDomSelection && hasDomSelectionInEditor && selection && !forceChange) {\n        var slateRange = ReactEditor.toSlateRange(editor, domSelection, {\n          exactMatch: true,\n          // domSelection is not necessarily a valid Slate range\n          // (e.g. when clicking on contentEditable:false element)\n          suppressThrow: true\n        });\n        if (slateRange && Range.equals(slateRange, selection)) {\n          var _anchorNode;\n          if (!state.hasMarkPlaceholder) {\n            return;\n          }\n          // Ensure selection is inside the mark placeholder\n          if ((_anchorNode = anchorNode) !== null && _anchorNode !== void 0 && (_anchorNode = _anchorNode.parentElement) !== null && _anchorNode !== void 0 && _anchorNode.hasAttribute('data-slate-mark-placeholder')) {\n            return;\n          }\n        }\n      }\n      // when <Editable/> is being controlled through external value\n      // then its children might just change - DOM responds to it on its own\n      // but Slate's value is not being updated through any operation\n      // and thus it doesn't transform selection on its own\n      if (selection && !ReactEditor.hasRange(editor, selection)) {\n        editor.selection = ReactEditor.toSlateRange(editor, domSelection, {\n          exactMatch: false,\n          suppressThrow: true\n        });\n        return;\n      }\n      // Otherwise the DOM selection is out of sync, so update it.\n      state.isUpdatingSelection = true;\n      var newDomRange = selection && ReactEditor.toDOMRange(editor, selection);\n      if (newDomRange) {\n        if (ReactEditor.isComposing(editor) && !IS_ANDROID) {\n          domSelection.collapseToEnd();\n        } else if (Range.isBackward(selection)) {\n          domSelection.setBaseAndExtent(newDomRange.endContainer, newDomRange.endOffset, newDomRange.startContainer, newDomRange.startOffset);\n        } else {\n          domSelection.setBaseAndExtent(newDomRange.startContainer, newDomRange.startOffset, newDomRange.endContainer, newDomRange.endOffset);\n        }\n        scrollSelectionIntoView(editor, newDomRange);\n      } else {\n        domSelection.removeAllRanges();\n      }\n      return newDomRange;\n    };\n    // In firefox if there is more then 1 range and we call setDomSelection we remove the ability to select more cells in a table\n    if (domSelection.rangeCount <= 1) {\n      setDomSelection();\n    }\n    var ensureSelection = ((_androidInputManagerR2 = androidInputManagerRef.current) === null || _androidInputManagerR2 === void 0 ? void 0 : _androidInputManagerR2.isFlushing()) === 'action';\n    if (!IS_ANDROID || !ensureSelection) {\n      setTimeout(() => {\n        state.isUpdatingSelection = false;\n      });\n      return;\n    }\n    var timeoutId = null;\n    var animationFrameId = requestAnimationFrame(() => {\n      if (ensureSelection) {\n        var ensureDomSelection = forceChange => {\n          try {\n            var el = ReactEditor.toDOMNode(editor, editor);\n            el.focus();\n            setDomSelection(forceChange);\n          } catch (e) {\n            // Ignore, dom and state might be out of sync\n          }\n        };\n        // Compat: Android IMEs try to force their selection by manually re-applying it even after we set it.\n        // This essentially would make setting the slate selection during an update meaningless, so we force it\n        // again here. We can't only do it in the setTimeout after the animation frame since that would cause a\n        // visible flicker.\n        ensureDomSelection();\n        timeoutId = setTimeout(() => {\n          // COMPAT: While setting the selection in an animation frame visually correctly sets the selection,\n          // it doesn't update GBoards spellchecker state. We have to manually trigger a selection change after\n          // the animation frame to ensure it displays the correct state.\n          ensureDomSelection(true);\n          state.isUpdatingSelection = false;\n        });\n      }\n    });\n    return () => {\n      cancelAnimationFrame(animationFrameId);\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  });\n  // Listen on the native `beforeinput` event to get real \"Level 2\" events. This\n  // is required because React's `beforeinput` is fake and never really attaches\n  // to the real event sadly. (2019/11/01)\n  // https://github.com/facebook/react/issues/11211\n  var onDOMBeforeInput = useCallback(event => {\n    onUserInput();\n    if (!readOnly && ReactEditor.hasEditableTarget(editor, event.target) && !isDOMEventHandled(event, propsOnDOMBeforeInput)) {\n      var _EDITOR_TO_USER_SELEC;\n      // COMPAT: BeforeInput events aren't cancelable on android, so we have to handle them differently using the android input manager.\n      if (androidInputManagerRef.current) {\n        return androidInputManagerRef.current.handleDOMBeforeInput(event);\n      }\n      // Some IMEs/Chrome extensions like e.g. Grammarly set the selection immediately before\n      // triggering a `beforeinput` expecting the change to be applied to the immediately before\n      // set selection.\n      scheduleOnDOMSelectionChange.flush();\n      onDOMSelectionChange.flush();\n      var {\n        selection\n      } = editor;\n      var {\n        inputType: type\n      } = event;\n      var data = event.dataTransfer || event.data || undefined;\n      var isCompositionChange = type === 'insertCompositionText' || type === 'deleteCompositionText';\n      // COMPAT: use composition change events as a hint to where we should insert\n      // composition text if we aren't composing to work around https://github.com/ianstormtaylor/slate/issues/5038\n      if (isCompositionChange && ReactEditor.isComposing(editor)) {\n        return;\n      }\n      var native = false;\n      if (type === 'insertText' && selection && Range.isCollapsed(selection) &&\n      // Only use native character insertion for single characters a-z or space for now.\n      // Long-press events (hold a + press 4 = ) to choose a special character otherwise\n      // causes duplicate inserts.\n      event.data && event.data.length === 1 && /[a-z ]/i.test(event.data) &&\n      // Chrome has issues correctly editing the start of nodes: https://bugs.chromium.org/p/chromium/issues/detail?id=1249405\n      // When there is an inline element, e.g. a link, and you select\n      // right after it (the start of the next node).\n      selection.anchor.offset !== 0) {\n        var _node$parentElement, _window$getComputedSt;\n        native = true;\n        // Skip native if there are marks, as\n        // `insertText` will insert a node, not just text.\n        if (editor.marks) {\n          native = false;\n        }\n        // Chrome also has issues correctly editing the end of anchor elements: https://bugs.chromium.org/p/chromium/issues/detail?id=1259100\n        // Therefore we don't allow native events to insert text at the end of anchor nodes.\n        var {\n          anchor\n        } = selection;\n        var [node, offset] = ReactEditor.toDOMPoint(editor, anchor);\n        var anchorNode = (_node$parentElement = node.parentElement) === null || _node$parentElement === void 0 ? void 0 : _node$parentElement.closest('a');\n        var window = ReactEditor.getWindow(editor);\n        if (native && anchorNode && ReactEditor.hasDOMNode(editor, anchorNode)) {\n          var _lastText$textContent;\n          // Find the last text node inside the anchor.\n          var lastText = window === null || window === void 0 ? void 0 : window.document.createTreeWalker(anchorNode, NodeFilter.SHOW_TEXT).lastChild();\n          if (lastText === node && ((_lastText$textContent = lastText.textContent) === null || _lastText$textContent === void 0 ? void 0 : _lastText$textContent.length) === offset) {\n            native = false;\n          }\n        }\n        // Chrome has issues with the presence of tab characters inside elements with whiteSpace = 'pre'\n        // causing abnormal insert behavior: https://bugs.chromium.org/p/chromium/issues/detail?id=1219139\n        if (native && node.parentElement && (window === null || window === void 0 || (_window$getComputedSt = window.getComputedStyle(node.parentElement)) === null || _window$getComputedSt === void 0 ? void 0 : _window$getComputedSt.whiteSpace) === 'pre') {\n          var block = Editor.above(editor, {\n            at: anchor.path,\n            match: n => Element$1.isElement(n) && Editor.isBlock(editor, n)\n          });\n          if (block && Node.string(block[0]).includes('\\t')) {\n            native = false;\n          }\n        }\n      }\n      // COMPAT: For the deleting forward/backward input types we don't want\n      // to change the selection because it is the range that will be deleted,\n      // and those commands determine that for themselves.\n      if (!type.startsWith('delete') || type.startsWith('deleteBy')) {\n        var [targetRange] = event.getTargetRanges();\n        if (targetRange) {\n          var range = ReactEditor.toSlateRange(editor, targetRange, {\n            exactMatch: false,\n            suppressThrow: false\n          });\n          if (!selection || !Range.equals(selection, range)) {\n            native = false;\n            var selectionRef = !isCompositionChange && editor.selection && Editor.rangeRef(editor, editor.selection);\n            Transforms.select(editor, range);\n            if (selectionRef) {\n              EDITOR_TO_USER_SELECTION.set(editor, selectionRef);\n            }\n          }\n        }\n      }\n      // Composition change types occur while a user is composing text and can't be\n      // cancelled. Let them through and wait for the composition to end.\n      if (isCompositionChange) {\n        return;\n      }\n      if (!native) {\n        event.preventDefault();\n      }\n      // COMPAT: If the selection is expanded, even if the command seems like\n      // a delete forward/backward command it should delete the selection.\n      if (selection && Range.isExpanded(selection) && type.startsWith('delete')) {\n        var direction = type.endsWith('Backward') ? 'backward' : 'forward';\n        Editor.deleteFragment(editor, {\n          direction\n        });\n        return;\n      }\n      switch (type) {\n        case 'deleteByComposition':\n        case 'deleteByCut':\n        case 'deleteByDrag':\n          {\n            Editor.deleteFragment(editor);\n            break;\n          }\n        case 'deleteContent':\n        case 'deleteContentForward':\n          {\n            Editor.deleteForward(editor);\n            break;\n          }\n        case 'deleteContentBackward':\n          {\n            Editor.deleteBackward(editor);\n            break;\n          }\n        case 'deleteEntireSoftLine':\n          {\n            Editor.deleteBackward(editor, {\n              unit: 'line'\n            });\n            Editor.deleteForward(editor, {\n              unit: 'line'\n            });\n            break;\n          }\n        case 'deleteHardLineBackward':\n          {\n            Editor.deleteBackward(editor, {\n              unit: 'block'\n            });\n            break;\n          }\n        case 'deleteSoftLineBackward':\n          {\n            Editor.deleteBackward(editor, {\n              unit: 'line'\n            });\n            break;\n          }\n        case 'deleteHardLineForward':\n          {\n            Editor.deleteForward(editor, {\n              unit: 'block'\n            });\n            break;\n          }\n        case 'deleteSoftLineForward':\n          {\n            Editor.deleteForward(editor, {\n              unit: 'line'\n            });\n            break;\n          }\n        case 'deleteWordBackward':\n          {\n            Editor.deleteBackward(editor, {\n              unit: 'word'\n            });\n            break;\n          }\n        case 'deleteWordForward':\n          {\n            Editor.deleteForward(editor, {\n              unit: 'word'\n            });\n            break;\n          }\n        case 'insertLineBreak':\n          Editor.insertSoftBreak(editor);\n          break;\n        case 'insertParagraph':\n          {\n            Editor.insertBreak(editor);\n            break;\n          }\n        case 'insertFromComposition':\n        case 'insertFromDrop':\n        case 'insertFromPaste':\n        case 'insertFromYank':\n        case 'insertReplacementText':\n        case 'insertText':\n          {\n            if (type === 'insertFromComposition') {\n              // COMPAT: in Safari, `compositionend` is dispatched after the\n              // `beforeinput` for \"insertFromComposition\". But if we wait for it\n              // then we will abort because we're still composing and the selection\n              // won't be updated properly.\n              // https://www.w3.org/TR/input-events-2/\n              if (ReactEditor.isComposing(editor)) {\n                setIsComposing(false);\n                IS_COMPOSING.set(editor, false);\n              }\n            }\n            // use a weak comparison instead of 'instanceof' to allow\n            // programmatic access of paste events coming from external windows\n            // like cypress where cy.window does not work realibly\n            if ((data === null || data === void 0 ? void 0 : data.constructor.name) === 'DataTransfer') {\n              ReactEditor.insertData(editor, data);\n            } else if (typeof data === 'string') {\n              // Only insertText operations use the native functionality, for now.\n              // Potentially expand to single character deletes, as well.\n              if (native) {\n                deferredOperations.current.push(() => Editor.insertText(editor, data));\n              } else {\n                Editor.insertText(editor, data);\n              }\n            }\n            break;\n          }\n      }\n      // Restore the actual user section if nothing manually set it.\n      var toRestore = (_EDITOR_TO_USER_SELEC = EDITOR_TO_USER_SELECTION.get(editor)) === null || _EDITOR_TO_USER_SELEC === void 0 ? void 0 : _EDITOR_TO_USER_SELEC.unref();\n      EDITOR_TO_USER_SELECTION.delete(editor);\n      if (toRestore && (!editor.selection || !Range.equals(editor.selection, toRestore))) {\n        Transforms.select(editor, toRestore);\n      }\n    }\n  }, [editor, onDOMSelectionChange, onUserInput, propsOnDOMBeforeInput, readOnly, scheduleOnDOMSelectionChange]);\n  var callbackRef = useCallback(node => {\n    if (node == null) {\n      onDOMSelectionChange.cancel();\n      scheduleOnDOMSelectionChange.cancel();\n      EDITOR_TO_ELEMENT.delete(editor);\n      NODE_TO_ELEMENT.delete(editor);\n      if (ref.current && HAS_BEFORE_INPUT_SUPPORT) {\n        // @ts-ignore The `beforeinput` event isn't recognized.\n        ref.current.removeEventListener('beforeinput', onDOMBeforeInput);\n      }\n    } else {\n      // Attach a native DOM event handler for `beforeinput` events, because React's\n      // built-in `onBeforeInput` is actually a leaky polyfill that doesn't expose\n      // real `beforeinput` events sadly... (2019/11/04)\n      // https://github.com/facebook/react/issues/11211\n      if (HAS_BEFORE_INPUT_SUPPORT) {\n        // @ts-ignore The `beforeinput` event isn't recognized.\n        node.addEventListener('beforeinput', onDOMBeforeInput);\n      }\n    }\n    ref.current = node;\n  }, [onDOMSelectionChange, scheduleOnDOMSelectionChange, editor, onDOMBeforeInput]);\n  // Attach a native DOM event handler for `selectionchange`, because React's\n  // built-in `onSelect` handler doesn't fire for all selection changes. It's a\n  // leaky polyfill that only fires on keypresses or clicks. Instead, we want to\n  // fire for any change to the selection inside the editor. (2019/11/04)\n  // https://github.com/facebook/react/issues/5785\n  useIsomorphicLayoutEffect(() => {\n    var window = ReactEditor.getWindow(editor);\n    window.document.addEventListener('selectionchange', scheduleOnDOMSelectionChange);\n    return () => {\n      window.document.removeEventListener('selectionchange', scheduleOnDOMSelectionChange);\n    };\n  }, [scheduleOnDOMSelectionChange]);\n  var decorations = decorate([editor, []]);\n  var showPlaceholder = placeholder && editor.children.length === 1 && Array.from(Node.texts(editor)).length === 1 && Node.string(editor) === '' && !isComposing;\n  var placeHolderResizeHandler = useCallback(placeholderEl => {\n    if (placeholderEl && showPlaceholder) {\n      var _placeholderEl$getBou;\n      setPlaceholderHeight((_placeholderEl$getBou = placeholderEl.getBoundingClientRect()) === null || _placeholderEl$getBou === void 0 ? void 0 : _placeholderEl$getBou.height);\n    } else {\n      setPlaceholderHeight(undefined);\n    }\n  }, [showPlaceholder]);\n  if (showPlaceholder) {\n    var start = Editor.start(editor, []);\n    decorations.push({\n      [PLACEHOLDER_SYMBOL]: true,\n      placeholder,\n      onPlaceholderResize: placeHolderResizeHandler,\n      anchor: start,\n      focus: start\n    });\n  }\n  var {\n    marks\n  } = editor;\n  state.hasMarkPlaceholder = false;\n  if (editor.selection && Range.isCollapsed(editor.selection) && marks) {\n    var {\n      anchor\n    } = editor.selection;\n    var leaf = Node.leaf(editor, anchor.path);\n    var rest = _objectWithoutProperties(leaf, _excluded2);\n    // While marks isn't a 'complete' text, we can still use loose Text.equals\n    // here which only compares marks anyway.\n    if (!Text$1.equals(leaf, marks, {\n      loose: true\n    })) {\n      state.hasMarkPlaceholder = true;\n      var unset = Object.fromEntries(Object.keys(rest).map(mark => [mark, null]));\n      decorations.push(_objectSpread$1(_objectSpread$1(_objectSpread$1({\n        [MARK_PLACEHOLDER_SYMBOL]: true\n      }, unset), marks), {}, {\n        anchor,\n        focus: anchor\n      }));\n    }\n  }\n  // Update EDITOR_TO_MARK_PLACEHOLDER_MARKS in setTimeout useEffect to ensure we don't set it\n  // before we receive the composition end event.\n  useEffect(() => {\n    setTimeout(() => {\n      var {\n        selection\n      } = editor;\n      if (selection) {\n        var {\n          anchor: _anchor\n        } = selection;\n        var _text = Node.leaf(editor, _anchor.path);\n        // While marks isn't a 'complete' text, we can still use loose Text.equals\n        // here which only compares marks anyway.\n        if (marks && !Text$1.equals(_text, marks, {\n          loose: true\n        })) {\n          EDITOR_TO_PENDING_INSERTION_MARKS.set(editor, marks);\n          return;\n        }\n      }\n      EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor);\n    });\n  });\n  return /*#__PURE__*/React.createElement(ReadOnlyContext.Provider, {\n    value: readOnly\n  }, /*#__PURE__*/React.createElement(DecorateContext.Provider, {\n    value: decorate\n  }, /*#__PURE__*/React.createElement(RestoreDOM, {\n    node: ref,\n    receivedUserInput: receivedUserInput\n  }, /*#__PURE__*/React.createElement(Component, _objectSpread$1(_objectSpread$1({\n    role: readOnly ? undefined : 'textbox',\n    \"aria-multiline\": readOnly ? undefined : true\n  }, attributes), {}, {\n    // COMPAT: Certain browsers don't support the `beforeinput` event, so we'd\n    // have to use hacks to make these replacement-based features work.\n    // For SSR situations HAS_BEFORE_INPUT_SUPPORT is false and results in prop\n    // mismatch warning app moves to browser. Pass-through consumer props when\n    // not CAN_USE_DOM (SSR) and default to falsy value\n    spellCheck: HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM ? attributes.spellCheck : false,\n    autoCorrect: HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM ? attributes.autoCorrect : 'false',\n    autoCapitalize: HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM ? attributes.autoCapitalize : 'false',\n    \"data-slate-editor\": true,\n    \"data-slate-node\": \"value\",\n    // explicitly set this\n    contentEditable: !readOnly,\n    // in some cases, a decoration needs access to the range / selection to decorate a text node,\n    // then you will select the whole text node when you select part the of text\n    // this magic zIndex=\"-1\" will fix it\n    zindex: -1,\n    suppressContentEditableWarning: true,\n    ref: callbackRef,\n    style: _objectSpread$1(_objectSpread$1({}, disableDefaultStyles ? {} : _objectSpread$1({\n      // Allow positioning relative to the editable element.\n      position: 'relative',\n      // Preserve adjacent whitespace and new lines.\n      whiteSpace: 'pre-wrap',\n      // Allow words to break if they are too long.\n      wordWrap: 'break-word'\n    }, placeholderHeight ? {\n      minHeight: placeholderHeight\n    } : {})), userStyle),\n    onBeforeInput: useCallback(event => {\n      // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n      // fall back to React's leaky polyfill instead just for it. It\n      // only works for the `insertText` input type.\n      if (!HAS_BEFORE_INPUT_SUPPORT && !readOnly && !isEventHandled(event, attributes.onBeforeInput) && ReactEditor.hasSelectableTarget(editor, event.target)) {\n        event.preventDefault();\n        if (!ReactEditor.isComposing(editor)) {\n          var _text2 = event.data;\n          Editor.insertText(editor, _text2);\n        }\n      }\n    }, [attributes.onBeforeInput, editor, readOnly]),\n    onInput: useCallback(event => {\n      if (isEventHandled(event, attributes.onInput)) {\n        return;\n      }\n      if (androidInputManagerRef.current) {\n        androidInputManagerRef.current.handleInput();\n        return;\n      }\n      // Flush native operations, as native events will have propogated\n      // and we can correctly compare DOM text values in components\n      // to stop rendering, so that browser functions like autocorrect\n      // and spellcheck work as expected.\n      for (var op of deferredOperations.current) {\n        op();\n      }\n      deferredOperations.current = [];\n    }, [attributes.onInput]),\n    onBlur: useCallback(event => {\n      if (readOnly || state.isUpdatingSelection || !ReactEditor.hasSelectableTarget(editor, event.target) || isEventHandled(event, attributes.onBlur)) {\n        return;\n      }\n      // COMPAT: If the current `activeElement` is still the previous\n      // one, this is due to the window being blurred when the tab\n      // itself becomes unfocused, so we want to abort early to allow to\n      // editor to stay focused when the tab becomes focused again.\n      var root = ReactEditor.findDocumentOrShadowRoot(editor);\n      if (state.latestElement === root.activeElement) {\n        return;\n      }\n      var {\n        relatedTarget\n      } = event;\n      var el = ReactEditor.toDOMNode(editor, editor);\n      // COMPAT: The event should be ignored if the focus is returning\n      // to the editor from an embedded editable element (eg. an <input>\n      // element inside a void node).\n      if (relatedTarget === el) {\n        return;\n      }\n      // COMPAT: The event should be ignored if the focus is moving from\n      // the editor to inside a void node's spacer element.\n      if (isDOMElement(relatedTarget) && relatedTarget.hasAttribute('data-slate-spacer')) {\n        return;\n      }\n      // COMPAT: The event should be ignored if the focus is moving to a\n      // non- editable section of an element that isn't a void node (eg.\n      // a list item of the check list example).\n      if (relatedTarget != null && isDOMNode(relatedTarget) && ReactEditor.hasDOMNode(editor, relatedTarget)) {\n        var node = ReactEditor.toSlateNode(editor, relatedTarget);\n        if (Element$1.isElement(node) && !editor.isVoid(node)) {\n          return;\n        }\n      }\n      // COMPAT: Safari doesn't always remove the selection even if the content-\n      // editable element no longer has focus. Refer to:\n      // https://stackoverflow.com/questions/12353247/force-contenteditable-div-to-stop-accepting-input-after-it-loses-focus-under-web\n      if (IS_WEBKIT) {\n        var domSelection = root.getSelection();\n        domSelection === null || domSelection === void 0 || domSelection.removeAllRanges();\n      }\n      IS_FOCUSED.delete(editor);\n    }, [readOnly, state.isUpdatingSelection, state.latestElement, editor, attributes.onBlur]),\n    onClick: useCallback(event => {\n      if (ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onClick) && isDOMNode(event.target)) {\n        var node = ReactEditor.toSlateNode(editor, event.target);\n        var path = ReactEditor.findPath(editor, node);\n        // At this time, the Slate document may be arbitrarily different,\n        // because onClick handlers can change the document before we get here.\n        // Therefore we must check that this path actually exists,\n        // and that it still refers to the same node.\n        if (!Editor.hasPath(editor, path) || Node.get(editor, path) !== node) {\n          return;\n        }\n        if (event.detail === TRIPLE_CLICK && path.length >= 1) {\n          var blockPath = path;\n          if (!(Element$1.isElement(node) && Editor.isBlock(editor, node))) {\n            var _block$;\n            var block = Editor.above(editor, {\n              match: n => Element$1.isElement(n) && Editor.isBlock(editor, n),\n              at: path\n            });\n            blockPath = (_block$ = block === null || block === void 0 ? void 0 : block[1]) !== null && _block$ !== void 0 ? _block$ : path.slice(0, 1);\n          }\n          var range = Editor.range(editor, blockPath);\n          Transforms.select(editor, range);\n          return;\n        }\n        if (readOnly) {\n          return;\n        }\n        var _start = Editor.start(editor, path);\n        var end = Editor.end(editor, path);\n        var startVoid = Editor.void(editor, {\n          at: _start\n        });\n        var endVoid = Editor.void(editor, {\n          at: end\n        });\n        if (startVoid && endVoid && Path.equals(startVoid[1], endVoid[1])) {\n          var _range = Editor.range(editor, _start);\n          Transforms.select(editor, _range);\n        }\n      }\n    }, [editor, attributes.onClick, readOnly]),\n    onCompositionEnd: useCallback(event => {\n      if (ReactEditor.hasSelectableTarget(editor, event.target)) {\n        var _androidInputManagerR3;\n        if (ReactEditor.isComposing(editor)) {\n          Promise.resolve().then(() => {\n            setIsComposing(false);\n            IS_COMPOSING.set(editor, false);\n          });\n        }\n        (_androidInputManagerR3 = androidInputManagerRef.current) === null || _androidInputManagerR3 === void 0 || _androidInputManagerR3.handleCompositionEnd(event);\n        if (isEventHandled(event, attributes.onCompositionEnd) || IS_ANDROID) {\n          return;\n        }\n        // COMPAT: In Chrome, `beforeinput` events for compositions\n        // aren't correct and never fire the \"insertFromComposition\"\n        // type that we need. So instead, insert whenever a composition\n        // ends since it will already have been committed to the DOM.\n        if (!IS_WEBKIT && !IS_FIREFOX_LEGACY && !IS_IOS && !IS_WECHATBROWSER && !IS_UC_MOBILE && event.data) {\n          var placeholderMarks = EDITOR_TO_PENDING_INSERTION_MARKS.get(editor);\n          EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor);\n          // Ensure we insert text with the marks the user was actually seeing\n          if (placeholderMarks !== undefined) {\n            EDITOR_TO_USER_MARKS.set(editor, editor.marks);\n            editor.marks = placeholderMarks;\n          }\n          Editor.insertText(editor, event.data);\n          var userMarks = EDITOR_TO_USER_MARKS.get(editor);\n          EDITOR_TO_USER_MARKS.delete(editor);\n          if (userMarks !== undefined) {\n            editor.marks = userMarks;\n          }\n        }\n      }\n    }, [attributes.onCompositionEnd, editor]),\n    onCompositionUpdate: useCallback(event => {\n      if (ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onCompositionUpdate)) {\n        if (!ReactEditor.isComposing(editor)) {\n          setIsComposing(true);\n          IS_COMPOSING.set(editor, true);\n        }\n      }\n    }, [attributes.onCompositionUpdate, editor]),\n    onCompositionStart: useCallback(event => {\n      if (ReactEditor.hasSelectableTarget(editor, event.target)) {\n        var _androidInputManagerR4;\n        (_androidInputManagerR4 = androidInputManagerRef.current) === null || _androidInputManagerR4 === void 0 || _androidInputManagerR4.handleCompositionStart(event);\n        if (isEventHandled(event, attributes.onCompositionStart) || IS_ANDROID) {\n          return;\n        }\n        setIsComposing(true);\n        var {\n          selection\n        } = editor;\n        if (selection && Range.isExpanded(selection)) {\n          Editor.deleteFragment(editor);\n          return;\n        }\n      }\n    }, [attributes.onCompositionStart, editor]),\n    onCopy: useCallback(event => {\n      if (ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onCopy) && !isDOMEventTargetInput(event)) {\n        event.preventDefault();\n        ReactEditor.setFragmentData(editor, event.clipboardData, 'copy');\n      }\n    }, [attributes.onCopy, editor]),\n    onCut: useCallback(event => {\n      if (!readOnly && ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onCut) && !isDOMEventTargetInput(event)) {\n        event.preventDefault();\n        ReactEditor.setFragmentData(editor, event.clipboardData, 'cut');\n        var {\n          selection\n        } = editor;\n        if (selection) {\n          if (Range.isExpanded(selection)) {\n            Editor.deleteFragment(editor);\n          } else {\n            var node = Node.parent(editor, selection.anchor.path);\n            if (Editor.isVoid(editor, node)) {\n              Transforms.delete(editor);\n            }\n          }\n        }\n      }\n    }, [readOnly, editor, attributes.onCut]),\n    onDragOver: useCallback(event => {\n      if (ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDragOver)) {\n        // Only when the target is void, call `preventDefault` to signal\n        // that drops are allowed. Editable content is droppable by\n        // default, and calling `preventDefault` hides the cursor.\n        var node = ReactEditor.toSlateNode(editor, event.target);\n        if (Element$1.isElement(node) && Editor.isVoid(editor, node)) {\n          event.preventDefault();\n        }\n      }\n    }, [attributes.onDragOver, editor]),\n    onDragStart: useCallback(event => {\n      if (!readOnly && ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDragStart)) {\n        var node = ReactEditor.toSlateNode(editor, event.target);\n        var path = ReactEditor.findPath(editor, node);\n        var voidMatch = Element$1.isElement(node) && Editor.isVoid(editor, node) || Editor.void(editor, {\n          at: path,\n          voids: true\n        });\n        // If starting a drag on a void node, make sure it is selected\n        // so that it shows up in the selection's fragment.\n        if (voidMatch) {\n          var range = Editor.range(editor, path);\n          Transforms.select(editor, range);\n        }\n        state.isDraggingInternally = true;\n        ReactEditor.setFragmentData(editor, event.dataTransfer, 'drag');\n      }\n    }, [readOnly, editor, attributes.onDragStart, state]),\n    onDrop: useCallback(event => {\n      if (!readOnly && ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDrop)) {\n        event.preventDefault();\n        // Keep a reference to the dragged range before updating selection\n        var draggedRange = editor.selection;\n        // Find the range where the drop happened\n        var range = ReactEditor.findEventRange(editor, event);\n        var data = event.dataTransfer;\n        Transforms.select(editor, range);\n        if (state.isDraggingInternally) {\n          if (draggedRange && !Range.equals(draggedRange, range) && !Editor.void(editor, {\n            at: range,\n            voids: true\n          })) {\n            Transforms.delete(editor, {\n              at: draggedRange\n            });\n          }\n        }\n        ReactEditor.insertData(editor, data);\n        // When dragging from another source into the editor, it's possible\n        // that the current editor does not have focus.\n        if (!ReactEditor.isFocused(editor)) {\n          ReactEditor.focus(editor);\n        }\n      }\n      state.isDraggingInternally = false;\n    }, [readOnly, editor, attributes.onDrop, state]),\n    onDragEnd: useCallback(event => {\n      if (!readOnly && state.isDraggingInternally && attributes.onDragEnd && ReactEditor.hasTarget(editor, event.target)) {\n        attributes.onDragEnd(event);\n      }\n      // When dropping on a different droppable element than the current editor,\n      // `onDrop` is not called. So we need to clean up in `onDragEnd` instead.\n      // Note: `onDragEnd` is only called when `onDrop` is not called\n      state.isDraggingInternally = false;\n    }, [readOnly, state, attributes, editor]),\n    onFocus: useCallback(event => {\n      if (!readOnly && !state.isUpdatingSelection && ReactEditor.hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onFocus)) {\n        var el = ReactEditor.toDOMNode(editor, editor);\n        var root = ReactEditor.findDocumentOrShadowRoot(editor);\n        state.latestElement = root.activeElement;\n        // COMPAT: If the editor has nested editable elements, the focus\n        // can go to them. In Firefox, this must be prevented because it\n        // results in issues with keyboard navigation. (2017/03/30)\n        if (IS_FIREFOX && event.target !== el) {\n          el.focus();\n          return;\n        }\n        IS_FOCUSED.set(editor, true);\n      }\n    }, [readOnly, state, editor, attributes.onFocus]),\n    onKeyDown: useCallback(event => {\n      if (!readOnly && ReactEditor.hasEditableTarget(editor, event.target)) {\n        var _androidInputManagerR5;\n        (_androidInputManagerR5 = androidInputManagerRef.current) === null || _androidInputManagerR5 === void 0 || _androidInputManagerR5.handleKeyDown(event);\n        var {\n          nativeEvent\n        } = event;\n        // COMPAT: The composition end event isn't fired reliably in all browsers,\n        // so we sometimes might end up stuck in a composition state even though we\n        // aren't composing any more.\n        if (ReactEditor.isComposing(editor) && nativeEvent.isComposing === false) {\n          IS_COMPOSING.set(editor, false);\n          setIsComposing(false);\n        }\n        if (isEventHandled(event, attributes.onKeyDown) || ReactEditor.isComposing(editor)) {\n          return;\n        }\n        var {\n          selection\n        } = editor;\n        var element = editor.children[selection !== null ? selection.focus.path[0] : 0];\n        var isRTL = getDirection(Node.string(element)) === 'rtl';\n        // COMPAT: Since we prevent the default behavior on\n        // `beforeinput` events, the browser doesn't think there's ever\n        // any history stack to undo or redo, so we have to manage these\n        // hotkeys ourselves. (2019/11/06)\n        if (Hotkeys.isRedo(nativeEvent)) {\n          event.preventDefault();\n          var maybeHistoryEditor = editor;\n          if (typeof maybeHistoryEditor.redo === 'function') {\n            maybeHistoryEditor.redo();\n          }\n          return;\n        }\n        if (Hotkeys.isUndo(nativeEvent)) {\n          event.preventDefault();\n          var _maybeHistoryEditor = editor;\n          if (typeof _maybeHistoryEditor.undo === 'function') {\n            _maybeHistoryEditor.undo();\n          }\n          return;\n        }\n        // COMPAT: Certain browsers don't handle the selection updates\n        // properly. In Chrome, the selection isn't properly extended.\n        // And in Firefox, the selection isn't properly collapsed.\n        // (2017/10/17)\n        if (Hotkeys.isMoveLineBackward(nativeEvent)) {\n          event.preventDefault();\n          Transforms.move(editor, {\n            unit: 'line',\n            reverse: true\n          });\n          return;\n        }\n        if (Hotkeys.isMoveLineForward(nativeEvent)) {\n          event.preventDefault();\n          Transforms.move(editor, {\n            unit: 'line'\n          });\n          return;\n        }\n        if (Hotkeys.isExtendLineBackward(nativeEvent)) {\n          event.preventDefault();\n          Transforms.move(editor, {\n            unit: 'line',\n            edge: 'focus',\n            reverse: true\n          });\n          return;\n        }\n        if (Hotkeys.isExtendLineForward(nativeEvent)) {\n          event.preventDefault();\n          Transforms.move(editor, {\n            unit: 'line',\n            edge: 'focus'\n          });\n          return;\n        }\n        // COMPAT: If a void node is selected, or a zero-width text node\n        // adjacent to an inline is selected, we need to handle these\n        // hotkeys manually because browsers won't be able to skip over\n        // the void node with the zero-width space not being an empty\n        // string.\n        if (Hotkeys.isMoveBackward(nativeEvent)) {\n          event.preventDefault();\n          if (selection && Range.isCollapsed(selection)) {\n            Transforms.move(editor, {\n              reverse: !isRTL\n            });\n          } else {\n            Transforms.collapse(editor, {\n              edge: isRTL ? 'end' : 'start'\n            });\n          }\n          return;\n        }\n        if (Hotkeys.isMoveForward(nativeEvent)) {\n          event.preventDefault();\n          if (selection && Range.isCollapsed(selection)) {\n            Transforms.move(editor, {\n              reverse: isRTL\n            });\n          } else {\n            Transforms.collapse(editor, {\n              edge: isRTL ? 'start' : 'end'\n            });\n          }\n          return;\n        }\n        if (Hotkeys.isMoveWordBackward(nativeEvent)) {\n          event.preventDefault();\n          if (selection && Range.isExpanded(selection)) {\n            Transforms.collapse(editor, {\n              edge: 'focus'\n            });\n          }\n          Transforms.move(editor, {\n            unit: 'word',\n            reverse: !isRTL\n          });\n          return;\n        }\n        if (Hotkeys.isMoveWordForward(nativeEvent)) {\n          event.preventDefault();\n          if (selection && Range.isExpanded(selection)) {\n            Transforms.collapse(editor, {\n              edge: 'focus'\n            });\n          }\n          Transforms.move(editor, {\n            unit: 'word',\n            reverse: isRTL\n          });\n          return;\n        }\n        // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n        // fall back to guessing at the input intention for hotkeys.\n        // COMPAT: In iOS, some of these hotkeys are handled in the\n        if (!HAS_BEFORE_INPUT_SUPPORT) {\n          // We don't have a core behavior for these, but they change the\n          // DOM if we don't prevent them, so we have to.\n          if (Hotkeys.isBold(nativeEvent) || Hotkeys.isItalic(nativeEvent) || Hotkeys.isTransposeCharacter(nativeEvent)) {\n            event.preventDefault();\n            return;\n          }\n          if (Hotkeys.isSoftBreak(nativeEvent)) {\n            event.preventDefault();\n            Editor.insertSoftBreak(editor);\n            return;\n          }\n          if (Hotkeys.isSplitBlock(nativeEvent)) {\n            event.preventDefault();\n            Editor.insertBreak(editor);\n            return;\n          }\n          if (Hotkeys.isDeleteBackward(nativeEvent)) {\n            event.preventDefault();\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'backward'\n              });\n            } else {\n              Editor.deleteBackward(editor);\n            }\n            return;\n          }\n          if (Hotkeys.isDeleteForward(nativeEvent)) {\n            event.preventDefault();\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'forward'\n              });\n            } else {\n              Editor.deleteForward(editor);\n            }\n            return;\n          }\n          if (Hotkeys.isDeleteLineBackward(nativeEvent)) {\n            event.preventDefault();\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'backward'\n              });\n            } else {\n              Editor.deleteBackward(editor, {\n                unit: 'line'\n              });\n            }\n            return;\n          }\n          if (Hotkeys.isDeleteLineForward(nativeEvent)) {\n            event.preventDefault();\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'forward'\n              });\n            } else {\n              Editor.deleteForward(editor, {\n                unit: 'line'\n              });\n            }\n            return;\n          }\n          if (Hotkeys.isDeleteWordBackward(nativeEvent)) {\n            event.preventDefault();\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'backward'\n              });\n            } else {\n              Editor.deleteBackward(editor, {\n                unit: 'word'\n              });\n            }\n            return;\n          }\n          if (Hotkeys.isDeleteWordForward(nativeEvent)) {\n            event.preventDefault();\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'forward'\n              });\n            } else {\n              Editor.deleteForward(editor, {\n                unit: 'word'\n              });\n            }\n            return;\n          }\n        } else {\n          if (IS_CHROME || IS_WEBKIT) {\n            // COMPAT: Chrome and Safari support `beforeinput` event but do not fire\n            // an event when deleting backwards in a selected void inline node\n            if (selection && (Hotkeys.isDeleteBackward(nativeEvent) || Hotkeys.isDeleteForward(nativeEvent)) && Range.isCollapsed(selection)) {\n              var currentNode = Node.parent(editor, selection.anchor.path);\n              if (Element$1.isElement(currentNode) && Editor.isVoid(editor, currentNode) && (Editor.isInline(editor, currentNode) || Editor.isBlock(editor, currentNode))) {\n                event.preventDefault();\n                Editor.deleteBackward(editor, {\n                  unit: 'block'\n                });\n                return;\n              }\n            }\n          }\n        }\n      }\n    }, [readOnly, editor, attributes.onKeyDown]),\n    onPaste: useCallback(event => {\n      if (!readOnly && ReactEditor.hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onPaste)) {\n        // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n        // fall back to React's `onPaste` here instead.\n        // COMPAT: Firefox, Chrome and Safari don't emit `beforeinput` events\n        // when \"paste without formatting\" is used, so fallback. (2020/02/20)\n        // COMPAT: Safari InputEvents generated by pasting won't include\n        // application/x-slate-fragment items, so use the\n        // ClipboardEvent here. (2023/03/15)\n        if (!HAS_BEFORE_INPUT_SUPPORT || isPlainTextOnlyPaste(event.nativeEvent) || IS_WEBKIT) {\n          event.preventDefault();\n          ReactEditor.insertData(editor, event.clipboardData);\n        }\n      }\n    }, [readOnly, editor, attributes.onPaste])\n  }), /*#__PURE__*/React.createElement(Children, {\n    decorations: decorations,\n    node: editor,\n    renderElement: renderElement,\n    renderPlaceholder: renderPlaceholder,\n    renderLeaf: renderLeaf,\n    selection: editor.selection\n  })))));\n};\n/**\n * The default placeholder element\n */\nvar DefaultPlaceholder = _ref => {\n  var {\n    attributes,\n    children\n  } = _ref;\n  return (\n    /*#__PURE__*/\n    // COMPAT: Artificially add a line-break to the end on the placeholder element\n    // to prevent Android IMEs to pick up its content in autocorrect and to auto-capitalize the first letter\n    React.createElement(\"span\", _objectSpread$1({}, attributes), children, IS_ANDROID && /*#__PURE__*/React.createElement(\"br\", null))\n  );\n};\n/**\n * A default memoized decorate function.\n */\nvar defaultDecorate = () => [];\n/**\n * A default implement to scroll dom range into view.\n */\nvar defaultScrollSelectionIntoView = (editor, domRange) => {\n  // This was affecting the selection of multiple blocks and dragging behavior,\n  // so enabled only if the selection has been collapsed.\n  if (domRange.getBoundingClientRect && (!editor.selection || editor.selection && Range.isCollapsed(editor.selection))) {\n    var leafEl = domRange.startContainer.parentElement;\n    leafEl.getBoundingClientRect = domRange.getBoundingClientRect.bind(domRange);\n    scrollIntoView(leafEl, {\n      scrollMode: 'if-needed'\n    });\n    // @ts-expect-error an unorthodox delete D:\n    delete leafEl.getBoundingClientRect;\n  }\n};\n/**\n * Check if an event is overrided by a handler.\n */\nvar isEventHandled = (event, handler) => {\n  if (!handler) {\n    return false;\n  }\n  // The custom event handler may return a boolean to specify whether the event\n  // shall be treated as being handled or not.\n  var shouldTreatEventAsHandled = handler(event);\n  if (shouldTreatEventAsHandled != null) {\n    return shouldTreatEventAsHandled;\n  }\n  return event.isDefaultPrevented() || event.isPropagationStopped();\n};\n/**\n * Check if the event's target is an input element\n */\nvar isDOMEventTargetInput = event => {\n  return isDOMNode(event.target) && (event.target instanceof HTMLInputElement || event.target instanceof HTMLTextAreaElement);\n};\n/**\n * Check if a DOM event is overrided by a handler.\n */\nvar isDOMEventHandled = (event, handler) => {\n  if (!handler) {\n    return false;\n  }\n  // The custom event handler may return a boolean to specify whether the event\n  // shall be treated as being handled or not.\n  var shouldTreatEventAsHandled = handler(event);\n  if (shouldTreatEventAsHandled != null) {\n    return shouldTreatEventAsHandled;\n  }\n  return event.defaultPrevented;\n};\n\n/**\n * A React context for sharing the `focused` state of the editor.\n */\nvar FocusedContext = /*#__PURE__*/createContext(false);\n/**\n * Get the current `focused` state of the editor.\n */\nvar useFocused = () => {\n  return useContext(FocusedContext);\n};\n\nfunction isError(error) {\n  return error instanceof Error;\n}\n/**\n * A React context for sharing the editor selector context in a way to control rerenders\n */\nvar SlateSelectorContext = /*#__PURE__*/createContext({});\nvar refEquality = (a, b) => a === b;\n/**\n * use redux style selectors to prevent rerendering on every keystroke.\n * Bear in mind rerendering can only prevented if the returned value is a value type or for reference types (e.g. objects and arrays) add a custom equality function.\n *\n * Example:\n * ```\n *  const isSelectionActive = useSlateSelector(editor => Boolean(editor.selection));\n * ```\n */\nfunction useSlateSelector(selector) {\n  var equalityFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : refEquality;\n  var [, forceRender] = useReducer(s => s + 1, 0);\n  var context = useContext(SlateSelectorContext);\n  if (!context) {\n    throw new Error(\"The `useSlateSelector` hook must be used inside the <Slate> component's context.\");\n  }\n  var {\n    getSlate,\n    addEventListener\n  } = context;\n  var latestSubscriptionCallbackError = useRef();\n  var latestSelector = useRef(() => null);\n  var latestSelectedState = useRef(null);\n  var selectedState;\n  try {\n    if (selector !== latestSelector.current || latestSubscriptionCallbackError.current) {\n      selectedState = selector(getSlate());\n    } else {\n      selectedState = latestSelectedState.current;\n    }\n  } catch (err) {\n    if (latestSubscriptionCallbackError.current && isError(err)) {\n      err.message += \"\\nThe error may be correlated with this previous error:\\n\".concat(latestSubscriptionCallbackError.current.stack, \"\\n\\n\");\n    }\n    throw err;\n  }\n  useIsomorphicLayoutEffect(() => {\n    latestSelector.current = selector;\n    latestSelectedState.current = selectedState;\n    latestSubscriptionCallbackError.current = undefined;\n  });\n  useIsomorphicLayoutEffect(() => {\n    function checkForUpdates() {\n      try {\n        var newSelectedState = latestSelector.current(getSlate());\n        if (equalityFn(newSelectedState, latestSelectedState.current)) {\n          return;\n        }\n        latestSelectedState.current = newSelectedState;\n      } catch (err) {\n        // we ignore all errors here, since when the component\n        // is re-rendered, the selectors are called again, and\n        // will throw again, if neither props nor store state\n        // changed\n        if (err instanceof Error) {\n          latestSubscriptionCallbackError.current = err;\n        } else {\n          latestSubscriptionCallbackError.current = new Error(String(err));\n        }\n      }\n      forceRender();\n    }\n    var unsubscribe = addEventListener(checkForUpdates);\n    checkForUpdates();\n    return () => unsubscribe();\n  },\n  // don't rerender on equalityFn change since we want to be able to define it inline\n  [addEventListener, getSlate]);\n  return selectedState;\n}\n/**\n * Create selector context with editor updating on every editor change\n */\nfunction useSelectorContext(editor) {\n  var eventListeners = useRef([]).current;\n  var slateRef = useRef({\n    editor\n  }).current;\n  var onChange = useCallback(editor => {\n    slateRef.editor = editor;\n    eventListeners.forEach(listener => listener(editor));\n  }, [eventListeners, slateRef]);\n  var selectorContext = useMemo(() => {\n    return {\n      getSlate: () => slateRef.editor,\n      addEventListener: callback => {\n        eventListeners.push(callback);\n        return () => {\n          eventListeners.splice(eventListeners.indexOf(callback), 1);\n        };\n      }\n    };\n  }, [eventListeners, slateRef]);\n  return {\n    selectorContext,\n    onChange\n  };\n}\n\nvar _excluded = [\"editor\", \"children\", \"onChange\", \"onSelectionChange\", \"onValueChange\", \"initialValue\"];\n/**\n * A wrapper around the provider to handle `onChange` events, because the editor\n * is a mutable singleton so it won't ever register as \"changed\" otherwise.\n */\nvar Slate = props => {\n  var {\n      editor,\n      children,\n      onChange,\n      onSelectionChange,\n      onValueChange,\n      initialValue\n    } = props,\n    rest = _objectWithoutProperties(props, _excluded);\n  var [context, setContext] = React.useState(() => {\n    if (!Node.isNodeList(initialValue)) {\n      throw new Error(\"[Slate] initialValue is invalid! Expected a list of elements but got: \".concat(Scrubber.stringify(initialValue)));\n    }\n    if (!Editor.isEditor(editor)) {\n      throw new Error(\"[Slate] editor is invalid! You passed: \".concat(Scrubber.stringify(editor)));\n    }\n    editor.children = initialValue;\n    Object.assign(editor, rest);\n    return {\n      v: 0,\n      editor\n    };\n  });\n  var {\n    selectorContext,\n    onChange: handleSelectorChange\n  } = useSelectorContext(editor);\n  var onContextChange = useCallback(options => {\n    var _options$operation;\n    if (onChange) {\n      onChange(editor.children);\n    }\n    switch (options === null || options === void 0 || (_options$operation = options.operation) === null || _options$operation === void 0 ? void 0 : _options$operation.type) {\n      case 'set_selection':\n        onSelectionChange === null || onSelectionChange === void 0 || onSelectionChange(editor.selection);\n        break;\n      default:\n        onValueChange === null || onValueChange === void 0 || onValueChange(editor.children);\n    }\n    setContext(prevContext => ({\n      v: prevContext.v + 1,\n      editor\n    }));\n    handleSelectorChange(editor);\n  }, [editor, handleSelectorChange, onChange, onSelectionChange, onValueChange]);\n  useEffect(() => {\n    EDITOR_TO_ON_CHANGE.set(editor, onContextChange);\n    return () => {\n      EDITOR_TO_ON_CHANGE.set(editor, () => {});\n    };\n  }, [editor, onContextChange]);\n  var [isFocused, setIsFocused] = useState(ReactEditor.isFocused(editor));\n  useEffect(() => {\n    setIsFocused(ReactEditor.isFocused(editor));\n  }, [editor]);\n  useIsomorphicLayoutEffect(() => {\n    var fn = () => setIsFocused(ReactEditor.isFocused(editor));\n    if (REACT_MAJOR_VERSION >= 17) {\n      // In React >= 17 onFocus and onBlur listen to the focusin and focusout events during the bubbling phase.\n      // Therefore in order for <Editable />'s handlers to run first, which is necessary for ReactEditor.isFocused(editor)\n      // to return the correct value, we have to listen to the focusin and focusout events without useCapture here.\n      document.addEventListener('focusin', fn);\n      document.addEventListener('focusout', fn);\n      return () => {\n        document.removeEventListener('focusin', fn);\n        document.removeEventListener('focusout', fn);\n      };\n    } else {\n      document.addEventListener('focus', fn, true);\n      document.addEventListener('blur', fn, true);\n      return () => {\n        document.removeEventListener('focus', fn, true);\n        document.removeEventListener('blur', fn, true);\n      };\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(SlateSelectorContext.Provider, {\n    value: selectorContext\n  }, /*#__PURE__*/React.createElement(SlateContext.Provider, {\n    value: context\n  }, /*#__PURE__*/React.createElement(EditorContext.Provider, {\n    value: context.editor\n  }, /*#__PURE__*/React.createElement(FocusedContext.Provider, {\n    value: isFocused\n  }, children))));\n};\n\n/**\n * Get the current editor object from the React context.\n * @deprecated Use useSlateStatic instead.\n */\nvar useEditor = () => {\n  var editor = useContext(EditorContext);\n  if (!editor) {\n    throw new Error(\"The `useEditor` hook must be used inside the <Slate> component's context.\");\n  }\n  return editor;\n};\n\n/**\n * Get the current slate selection.\n * Only triggers a rerender when the selection actually changes\n */\nvar useSlateSelection = () => {\n  return useSlateSelector(editor => editor.selection, isSelectionEqual);\n};\nvar isSelectionEqual = (a, b) => {\n  if (!a && !b) return true;\n  if (!a || !b) return false;\n  return Range.equals(a, b);\n};\n\n/**\n * Utilities for single-line deletion\n */\nvar doRectsIntersect = (rect, compareRect) => {\n  var middle = (compareRect.top + compareRect.bottom) / 2;\n  return rect.top <= middle && rect.bottom >= middle;\n};\nvar areRangesSameLine = (editor, range1, range2) => {\n  var rect1 = ReactEditor.toDOMRange(editor, range1).getBoundingClientRect();\n  var rect2 = ReactEditor.toDOMRange(editor, range2).getBoundingClientRect();\n  return doRectsIntersect(rect1, rect2) && doRectsIntersect(rect2, rect1);\n};\n/**\n * A helper utility that returns the end portion of a `Range`\n * which is located on a single line.\n *\n * @param {Editor} editor The editor object to compare against\n * @param {Range} parentRange The parent range to compare against\n * @returns {Range} A valid portion of the parentRange which is one a single line\n */\nvar findCurrentLineRange = (editor, parentRange) => {\n  var parentRangeBoundary = Editor.range(editor, Range.end(parentRange));\n  var positions = Array.from(Editor.positions(editor, {\n    at: parentRange\n  }));\n  var left = 0;\n  var right = positions.length;\n  var middle = Math.floor(right / 2);\n  if (areRangesSameLine(editor, Editor.range(editor, positions[left]), parentRangeBoundary)) {\n    return Editor.range(editor, positions[left], parentRangeBoundary);\n  }\n  if (positions.length < 2) {\n    return Editor.range(editor, positions[positions.length - 1], parentRangeBoundary);\n  }\n  while (middle !== positions.length && middle !== left) {\n    if (areRangesSameLine(editor, Editor.range(editor, positions[middle]), parentRangeBoundary)) {\n      right = middle;\n    } else {\n      left = middle;\n    }\n    middle = Math.floor((left + right) / 2);\n  }\n  return Editor.range(editor, positions[right], parentRangeBoundary);\n};\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n/**\n * `withReact` adds React and DOM specific behaviors to the editor.\n *\n * If you are using TypeScript, you must extend Slate's CustomTypes to use\n * this plugin.\n *\n * See https://docs.slatejs.org/concepts/11-typescript to learn how.\n */\nvar withReact = function withReact(editor) {\n  var clipboardFormatKey = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'x-slate-fragment';\n  var e = editor;\n  var {\n    apply,\n    onChange,\n    deleteBackward,\n    addMark,\n    removeMark\n  } = e;\n  // The WeakMap which maps a key to a specific HTMLElement must be scoped to the editor instance to\n  // avoid collisions between editors in the DOM that share the same value.\n  EDITOR_TO_KEY_TO_ELEMENT.set(e, new WeakMap());\n  e.addMark = (key, value) => {\n    var _EDITOR_TO_SCHEDULE_F, _EDITOR_TO_PENDING_DI;\n    (_EDITOR_TO_SCHEDULE_F = EDITOR_TO_SCHEDULE_FLUSH.get(e)) === null || _EDITOR_TO_SCHEDULE_F === void 0 || _EDITOR_TO_SCHEDULE_F();\n    if (!EDITOR_TO_PENDING_INSERTION_MARKS.get(e) && (_EDITOR_TO_PENDING_DI = EDITOR_TO_PENDING_DIFFS.get(e)) !== null && _EDITOR_TO_PENDING_DI !== void 0 && _EDITOR_TO_PENDING_DI.length) {\n      // Ensure the current pending diffs originating from changes before the addMark\n      // are applied with the current formatting\n      EDITOR_TO_PENDING_INSERTION_MARKS.set(e, null);\n    }\n    EDITOR_TO_USER_MARKS.delete(e);\n    addMark(key, value);\n  };\n  e.removeMark = key => {\n    var _EDITOR_TO_PENDING_DI2;\n    if (!EDITOR_TO_PENDING_INSERTION_MARKS.get(e) && (_EDITOR_TO_PENDING_DI2 = EDITOR_TO_PENDING_DIFFS.get(e)) !== null && _EDITOR_TO_PENDING_DI2 !== void 0 && _EDITOR_TO_PENDING_DI2.length) {\n      // Ensure the current pending diffs originating from changes before the addMark\n      // are applied with the current formatting\n      EDITOR_TO_PENDING_INSERTION_MARKS.set(e, null);\n    }\n    EDITOR_TO_USER_MARKS.delete(e);\n    removeMark(key);\n  };\n  e.deleteBackward = unit => {\n    if (unit !== 'line') {\n      return deleteBackward(unit);\n    }\n    if (e.selection && Range.isCollapsed(e.selection)) {\n      var parentBlockEntry = Editor.above(e, {\n        match: n => Element$1.isElement(n) && Editor.isBlock(e, n),\n        at: e.selection\n      });\n      if (parentBlockEntry) {\n        var [, parentBlockPath] = parentBlockEntry;\n        var parentElementRange = Editor.range(e, parentBlockPath, e.selection.anchor);\n        var currentLineRange = findCurrentLineRange(e, parentElementRange);\n        if (!Range.isCollapsed(currentLineRange)) {\n          Transforms.delete(e, {\n            at: currentLineRange\n          });\n        }\n      }\n    }\n  };\n  // This attempts to reset the NODE_TO_KEY entry to the correct value\n  // as apply() changes the object reference and hence invalidates the NODE_TO_KEY entry\n  e.apply = op => {\n    var matches = [];\n    var pathRefMatches = [];\n    var pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(e);\n    if (pendingDiffs !== null && pendingDiffs !== void 0 && pendingDiffs.length) {\n      var transformed = pendingDiffs.map(textDiff => transformTextDiff(textDiff, op)).filter(Boolean);\n      EDITOR_TO_PENDING_DIFFS.set(e, transformed);\n    }\n    var pendingSelection = EDITOR_TO_PENDING_SELECTION.get(e);\n    if (pendingSelection) {\n      EDITOR_TO_PENDING_SELECTION.set(e, transformPendingRange(e, pendingSelection, op));\n    }\n    var pendingAction = EDITOR_TO_PENDING_ACTION.get(e);\n    if (pendingAction !== null && pendingAction !== void 0 && pendingAction.at) {\n      var at = Point.isPoint(pendingAction === null || pendingAction === void 0 ? void 0 : pendingAction.at) ? transformPendingPoint(e, pendingAction.at, op) : transformPendingRange(e, pendingAction.at, op);\n      EDITOR_TO_PENDING_ACTION.set(e, at ? _objectSpread(_objectSpread({}, pendingAction), {}, {\n        at\n      }) : null);\n    }\n    switch (op.type) {\n      case 'insert_text':\n      case 'remove_text':\n      case 'set_node':\n      case 'split_node':\n        {\n          matches.push(...getMatches(e, op.path));\n          break;\n        }\n      case 'set_selection':\n        {\n          var _EDITOR_TO_USER_SELEC;\n          // Selection was manually set, don't restore the user selection after the change.\n          (_EDITOR_TO_USER_SELEC = EDITOR_TO_USER_SELECTION.get(e)) === null || _EDITOR_TO_USER_SELEC === void 0 || _EDITOR_TO_USER_SELEC.unref();\n          EDITOR_TO_USER_SELECTION.delete(e);\n          break;\n        }\n      case 'insert_node':\n      case 'remove_node':\n        {\n          matches.push(...getMatches(e, Path.parent(op.path)));\n          break;\n        }\n      case 'merge_node':\n        {\n          var prevPath = Path.previous(op.path);\n          matches.push(...getMatches(e, prevPath));\n          break;\n        }\n      case 'move_node':\n        {\n          var commonPath = Path.common(Path.parent(op.path), Path.parent(op.newPath));\n          matches.push(...getMatches(e, commonPath));\n          var changedPath;\n          if (Path.isBefore(op.path, op.newPath)) {\n            matches.push(...getMatches(e, Path.parent(op.path)));\n            changedPath = op.newPath;\n          } else {\n            matches.push(...getMatches(e, Path.parent(op.newPath)));\n            changedPath = op.path;\n          }\n          var changedNode = Node.get(editor, Path.parent(changedPath));\n          var changedNodeKey = ReactEditor.findKey(e, changedNode);\n          var changedPathRef = Editor.pathRef(e, Path.parent(changedPath));\n          pathRefMatches.push([changedPathRef, changedNodeKey]);\n          break;\n        }\n    }\n    apply(op);\n    for (var [path, key] of matches) {\n      var [node] = Editor.node(e, path);\n      NODE_TO_KEY.set(node, key);\n    }\n    for (var [pathRef, _key] of pathRefMatches) {\n      if (pathRef.current) {\n        var [_node] = Editor.node(e, pathRef.current);\n        NODE_TO_KEY.set(_node, _key);\n      }\n    }\n  };\n  e.setFragmentData = data => {\n    var {\n      selection\n    } = e;\n    if (!selection) {\n      return;\n    }\n    var [start, end] = Range.edges(selection);\n    var startVoid = Editor.void(e, {\n      at: start.path\n    });\n    var endVoid = Editor.void(e, {\n      at: end.path\n    });\n    if (Range.isCollapsed(selection) && !startVoid) {\n      return;\n    }\n    // Create a fake selection so that we can add a Base64-encoded copy of the\n    // fragment to the HTML, to decode on future pastes.\n    var domRange = ReactEditor.toDOMRange(e, selection);\n    var contents = domRange.cloneContents();\n    var attach = contents.childNodes[0];\n    // Make sure attach is non-empty, since empty nodes will not get copied.\n    contents.childNodes.forEach(node => {\n      if (node.textContent && node.textContent.trim() !== '') {\n        attach = node;\n      }\n    });\n    // COMPAT: If the end node is a void node, we need to move the end of the\n    // range from the void node's spacer span, to the end of the void node's\n    // content, since the spacer is before void's content in the DOM.\n    if (endVoid) {\n      var [voidNode] = endVoid;\n      var r = domRange.cloneRange();\n      var domNode = ReactEditor.toDOMNode(e, voidNode);\n      r.setEndAfter(domNode);\n      contents = r.cloneContents();\n    }\n    // COMPAT: If the start node is a void node, we need to attach the encoded\n    // fragment to the void node's content node instead of the spacer, because\n    // attaching it to empty `<div>/<span>` nodes will end up having it erased by\n    // most browsers. (2018/04/27)\n    if (startVoid) {\n      attach = contents.querySelector('[data-slate-spacer]');\n    }\n    // Remove any zero-width space spans from the cloned DOM so that they don't\n    // show up elsewhere when pasted.\n    Array.from(contents.querySelectorAll('[data-slate-zero-width]')).forEach(zw => {\n      var isNewline = zw.getAttribute('data-slate-zero-width') === 'n';\n      zw.textContent = isNewline ? '\\n' : '';\n    });\n    // Set a `data-slate-fragment` attribute on a non-empty node, so it shows up\n    // in the HTML, and can be used for intra-Slate pasting. If it's a text\n    // node, wrap it in a `<span>` so we have something to set an attribute on.\n    if (isDOMText(attach)) {\n      var span = attach.ownerDocument.createElement('span');\n      // COMPAT: In Chrome and Safari, if we don't add the `white-space` style\n      // then leading and trailing spaces will be ignored. (2017/09/21)\n      span.style.whiteSpace = 'pre';\n      span.appendChild(attach);\n      contents.appendChild(span);\n      attach = span;\n    }\n    var fragment = e.getFragment();\n    var string = JSON.stringify(fragment);\n    var encoded = window.btoa(encodeURIComponent(string));\n    attach.setAttribute('data-slate-fragment', encoded);\n    data.setData(\"application/\".concat(clipboardFormatKey), encoded);\n    // Add the content to a <div> so that we can get its inner HTML.\n    var div = contents.ownerDocument.createElement('div');\n    div.appendChild(contents);\n    div.setAttribute('hidden', 'true');\n    contents.ownerDocument.body.appendChild(div);\n    data.setData('text/html', div.innerHTML);\n    data.setData('text/plain', getPlainText(div));\n    contents.ownerDocument.body.removeChild(div);\n    return data;\n  };\n  e.insertData = data => {\n    if (!e.insertFragmentData(data)) {\n      e.insertTextData(data);\n    }\n  };\n  e.insertFragmentData = data => {\n    /**\n     * Checking copied fragment from application/x-slate-fragment or data-slate-fragment\n     */\n    var fragment = data.getData(\"application/\".concat(clipboardFormatKey)) || getSlateFragmentAttribute(data);\n    if (fragment) {\n      var decoded = decodeURIComponent(window.atob(fragment));\n      var parsed = JSON.parse(decoded);\n      e.insertFragment(parsed);\n      return true;\n    }\n    return false;\n  };\n  e.insertTextData = data => {\n    var text = data.getData('text/plain');\n    if (text) {\n      var lines = text.split(/\\r\\n|\\r|\\n/);\n      var split = false;\n      for (var line of lines) {\n        if (split) {\n          Transforms.splitNodes(e, {\n            always: true\n          });\n        }\n        e.insertText(line);\n        split = true;\n      }\n      return true;\n    }\n    return false;\n  };\n  e.onChange = options => {\n    // COMPAT: React < 18 doesn't batch `setState` hook calls, which means\n    // that the children and selection can get out of sync for one render\n    // pass. So we have to use this unstable API to ensure it batches them.\n    // (2019/12/03)\n    // https://github.com/facebook/react/issues/14259#issuecomment-439702367\n    var maybeBatchUpdates = REACT_MAJOR_VERSION < 18 ? ReactDOM.unstable_batchedUpdates : callback => callback();\n    maybeBatchUpdates(() => {\n      var onContextChange = EDITOR_TO_ON_CHANGE.get(e);\n      if (onContextChange) {\n        onContextChange(options);\n      }\n      onChange(options);\n    });\n  };\n  return e;\n};\nvar getMatches = (e, path) => {\n  var matches = [];\n  for (var [n, p] of Editor.levels(e, {\n    at: path\n  })) {\n    var key = ReactEditor.findKey(e, n);\n    matches.push([p, key]);\n  }\n  return matches;\n};\n\nexport { DefaultElement, DefaultLeaf, DefaultPlaceholder, Editable, ReactEditor, Slate, useEditor, useFocused, useReadOnly, useSelected, useSlate, useSlateSelection, useSlateSelector, useSlateStatic, useSlateWithV, withReact };\n//# sourceMappingURL=index.es.js.map\n","import { isPlainObject } from 'is-plain-object';\nimport { Operation, Editor, Transforms, Path } from 'slate';\n\n// eslint-disable-next-line no-redeclare\nvar History = {\n  /**\n   * Check if a value is a `History` object.\n   */\n  isHistory(value) {\n    return isPlainObject(value) && Array.isArray(value.redos) && Array.isArray(value.undos) && (value.redos.length === 0 || Operation.isOperationList(value.redos[0].operations)) && (value.undos.length === 0 || Operation.isOperationList(value.undos[0].operations));\n  }\n};\n\n/**\n * Weakmaps for attaching state to the editor.\n */\nvar HISTORY = new WeakMap();\nvar SAVING = new WeakMap();\nvar MERGING = new WeakMap();\n// eslint-disable-next-line no-redeclare\nvar HistoryEditor = {\n  /**\n   * Check if a value is a `HistoryEditor` object.\n   */\n  isHistoryEditor(value) {\n    return History.isHistory(value.history) && Editor.isEditor(value);\n  },\n  /**\n   * Get the merge flag's current value.\n   */\n  isMerging(editor) {\n    return MERGING.get(editor);\n  },\n  /**\n   * Get the saving flag's current value.\n   */\n  isSaving(editor) {\n    return SAVING.get(editor);\n  },\n  /**\n   * Redo to the previous saved state.\n   */\n  redo(editor) {\n    editor.redo();\n  },\n  /**\n   * Undo to the previous saved state.\n   */\n  undo(editor) {\n    editor.undo();\n  },\n  /**\n   * Apply a series of changes inside a synchronous `fn`, without merging any of\n   * the new operations into previous save point in the history.\n   */\n  withoutMerging(editor, fn) {\n    var prev = HistoryEditor.isMerging(editor);\n    MERGING.set(editor, false);\n    fn();\n    MERGING.set(editor, prev);\n  },\n  /**\n   * Apply a series of changes inside a synchronous `fn`, without saving any of\n   * their operations into the history.\n   */\n  withoutSaving(editor, fn) {\n    var prev = HistoryEditor.isSaving(editor);\n    SAVING.set(editor, false);\n    fn();\n    SAVING.set(editor, prev);\n  }\n};\n\n/**\n * The `withHistory` plugin keeps track of the operation history of a Slate\n * editor as operations are applied to it, using undo and redo stacks.\n *\n * If you are using TypeScript, you must extend Slate's CustomTypes to use\n * this plugin.\n *\n * See https://docs.slatejs.org/concepts/11-typescript to learn how.\n */\nvar withHistory = editor => {\n  var e = editor;\n  var {\n    apply\n  } = e;\n  e.history = {\n    undos: [],\n    redos: []\n  };\n  e.redo = () => {\n    var {\n      history\n    } = e;\n    var {\n      redos\n    } = history;\n    if (redos.length > 0) {\n      var batch = redos[redos.length - 1];\n      if (batch.selectionBefore) {\n        Transforms.setSelection(e, batch.selectionBefore);\n      }\n      HistoryEditor.withoutSaving(e, () => {\n        Editor.withoutNormalizing(e, () => {\n          for (var op of batch.operations) {\n            e.apply(op);\n          }\n        });\n      });\n      history.redos.pop();\n      e.writeHistory('undos', batch);\n    }\n  };\n  e.undo = () => {\n    var {\n      history\n    } = e;\n    var {\n      undos\n    } = history;\n    if (undos.length > 0) {\n      var batch = undos[undos.length - 1];\n      HistoryEditor.withoutSaving(e, () => {\n        Editor.withoutNormalizing(e, () => {\n          var inverseOps = batch.operations.map(Operation.inverse).reverse();\n          for (var op of inverseOps) {\n            e.apply(op);\n          }\n          if (batch.selectionBefore) {\n            Transforms.setSelection(e, batch.selectionBefore);\n          }\n        });\n      });\n      e.writeHistory('redos', batch);\n      history.undos.pop();\n    }\n  };\n  e.apply = op => {\n    var {\n      operations,\n      history\n    } = e;\n    var {\n      undos\n    } = history;\n    var lastBatch = undos[undos.length - 1];\n    var lastOp = lastBatch && lastBatch.operations[lastBatch.operations.length - 1];\n    var save = HistoryEditor.isSaving(e);\n    var merge = HistoryEditor.isMerging(e);\n    if (save == null) {\n      save = shouldSave(op);\n    }\n    if (save) {\n      if (merge == null) {\n        if (lastBatch == null) {\n          merge = false;\n        } else if (operations.length !== 0) {\n          merge = true;\n        } else {\n          merge = shouldMerge(op, lastOp);\n        }\n      }\n      if (lastBatch && merge) {\n        lastBatch.operations.push(op);\n      } else {\n        var batch = {\n          operations: [op],\n          selectionBefore: e.selection\n        };\n        e.writeHistory('undos', batch);\n      }\n      while (undos.length > 100) {\n        undos.shift();\n      }\n      history.redos = [];\n    }\n    apply(op);\n  };\n  e.writeHistory = (stack, batch) => {\n    e.history[stack].push(batch);\n  };\n  return e;\n};\n/**\n * Check whether to merge an operation into the previous operation.\n */\nvar shouldMerge = (op, prev) => {\n  if (prev && op.type === 'insert_text' && prev.type === 'insert_text' && op.offset === prev.offset + prev.text.length && Path.equals(op.path, prev.path)) {\n    return true;\n  }\n  if (prev && op.type === 'remove_text' && prev.type === 'remove_text' && op.offset + op.text.length === prev.offset && Path.equals(op.path, prev.path)) {\n    return true;\n  }\n  return false;\n};\n/**\n * Check whether an operation needs to be saved to the history.\n */\nvar shouldSave = (op, prev) => {\n  if (op.type === 'set_selection') {\n    return false;\n  }\n  return true;\n};\n\nexport { HISTORY, History, HistoryEditor, MERGING, SAVING, withHistory };\n//# sourceMappingURL=index.es.js.map\n","/*\n\nBased off glamor's StyleSheet, thanks Sunil \n\nhigh performance StyleSheet for css-in-js systems\n\n- uses multiple style tags behind the scenes for millions of rules\n- uses `insertRule` for appending in production for *much* faster performance\n\n// usage\n\nimport { StyleSheet } from '@emotion/sheet'\n\nlet styleSheet = new StyleSheet({ key: '', container: document.head })\n\nstyleSheet.insert('#box { border: 1px solid red; }')\n- appends a css rule into the stylesheet\n\nstyleSheet.flush()\n- empties the stylesheet of all its contents\n\n*/\n// $FlowFixMe\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    // $FlowFixMe\n    return tag.sheet;\n  } // this weirdness brought to you by firefox\n\n  /* istanbul ignore next */\n\n\n  for (var i = 0; i < document.styleSheets.length; i++) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      // $FlowFixMe\n      return document.styleSheets[i];\n    }\n  }\n}\n\nfunction createStyleElement(options) {\n  var tag = document.createElement('style');\n  tag.setAttribute('data-emotion', options.key);\n\n  if (options.nonce !== undefined) {\n    tag.setAttribute('nonce', options.nonce);\n  }\n\n  tag.appendChild(document.createTextNode(''));\n  tag.setAttribute('data-s', '');\n  return tag;\n}\n\nvar StyleSheet = /*#__PURE__*/function () {\n  // Using Node instead of HTMLElement since container may be a ShadowRoot\n  function StyleSheet(options) {\n    var _this = this;\n\n    this._insertTag = function (tag) {\n      var before;\n\n      if (_this.tags.length === 0) {\n        if (_this.insertionPoint) {\n          before = _this.insertionPoint.nextSibling;\n        } else if (_this.prepend) {\n          before = _this.container.firstChild;\n        } else {\n          before = _this.before;\n        }\n      } else {\n        before = _this.tags[_this.tags.length - 1].nextSibling;\n      }\n\n      _this.container.insertBefore(tag, before);\n\n      _this.tags.push(tag);\n    };\n\n    this.isSpeedy = options.speedy === undefined ? process.env.NODE_ENV === 'production' : options.speedy;\n    this.tags = [];\n    this.ctr = 0;\n    this.nonce = options.nonce; // key is the value of the data-emotion attribute, it's used to identify different sheets\n\n    this.key = options.key;\n    this.container = options.container;\n    this.prepend = options.prepend;\n    this.insertionPoint = options.insertionPoint;\n    this.before = null;\n  }\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.hydrate = function hydrate(nodes) {\n    nodes.forEach(this._insertTag);\n  };\n\n  _proto.insert = function insert(rule) {\n    // the max length is how many rules we have per style tag, it's 65000 in speedy mode\n    // it's 1 in dev because we insert source maps that map a single rule to a location\n    // and you can only have one source map per style tag\n    if (this.ctr % (this.isSpeedy ? 65000 : 1) === 0) {\n      this._insertTag(createStyleElement(this));\n    }\n\n    var tag = this.tags[this.tags.length - 1];\n\n    if (process.env.NODE_ENV !== 'production') {\n      var isImportRule = rule.charCodeAt(0) === 64 && rule.charCodeAt(1) === 105;\n\n      if (isImportRule && this._alreadyInsertedOrderInsensitiveRule) {\n        // this would only cause problem in speedy mode\n        // but we don't want enabling speedy to affect the observable behavior\n        // so we report this error at all times\n        console.error(\"You're attempting to insert the following rule:\\n\" + rule + '\\n\\n`@import` rules must be before all other types of rules in a stylesheet but other rules have already been inserted. Please ensure that `@import` rules are before all other rules.');\n      }\n      this._alreadyInsertedOrderInsensitiveRule = this._alreadyInsertedOrderInsensitiveRule || !isImportRule;\n    }\n\n    if (this.isSpeedy) {\n      var sheet = sheetForTag(tag);\n\n      try {\n        // this is the ultrafast version, works across browsers\n        // the big drawback is that the css won't be editable in devtools\n        sheet.insertRule(rule, sheet.cssRules.length);\n      } catch (e) {\n        if (process.env.NODE_ENV !== 'production' && !/:(-moz-placeholder|-moz-focus-inner|-moz-focusring|-ms-input-placeholder|-moz-read-write|-moz-read-only|-ms-clear|-ms-expand|-ms-reveal){/.test(rule)) {\n          console.error(\"There was a problem inserting the following rule: \\\"\" + rule + \"\\\"\", e);\n        }\n      }\n    } else {\n      tag.appendChild(document.createTextNode(rule));\n    }\n\n    this.ctr++;\n  };\n\n  _proto.flush = function flush() {\n    // $FlowFixMe\n    this.tags.forEach(function (tag) {\n      return tag.parentNode && tag.parentNode.removeChild(tag);\n    });\n    this.tags = [];\n    this.ctr = 0;\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._alreadyInsertedOrderInsensitiveRule = false;\n    }\n  };\n\n  return StyleSheet;\n}();\n\nexport { StyleSheet };\n","export var MS = '-ms-'\nexport var MOZ = '-moz-'\nexport var WEBKIT = '-webkit-'\n\nexport var COMMENT = 'comm'\nexport var RULESET = 'rule'\nexport var DECLARATION = 'decl'\n\nexport var PAGE = '@page'\nexport var MEDIA = '@media'\nexport var IMPORT = '@import'\nexport var CHARSET = '@charset'\nexport var VIEWPORT = '@viewport'\nexport var SUPPORTS = '@supports'\nexport var DOCUMENT = '@document'\nexport var NAMESPACE = '@namespace'\nexport var KEYFRAMES = '@keyframes'\nexport var FONT_FACE = '@font-face'\nexport var COUNTER_STYLE = '@counter-style'\nexport var FONT_FEATURE_VALUES = '@font-feature-values'\nexport var LAYER = '@layer'\n","/**\n * @param {number}\n * @return {number}\n */\nexport var abs = Math.abs\n\n/**\n * @param {number}\n * @return {string}\n */\nexport var from = String.fromCharCode\n\n/**\n * @param {object}\n * @return {object}\n */\nexport var assign = Object.assign\n\n/**\n * @param {string} value\n * @param {number} length\n * @return {number}\n */\nexport function hash (value, length) {\n\treturn charat(value, 0) ^ 45 ? (((((((length << 2) ^ charat(value, 0)) << 2) ^ charat(value, 1)) << 2) ^ charat(value, 2)) << 2) ^ charat(value, 3) : 0\n}\n\n/**\n * @param {string} value\n * @return {string}\n */\nexport function trim (value) {\n\treturn value.trim()\n}\n\n/**\n * @param {string} value\n * @param {RegExp} pattern\n * @return {string?}\n */\nexport function match (value, pattern) {\n\treturn (value = pattern.exec(value)) ? value[0] : value\n}\n\n/**\n * @param {string} value\n * @param {(string|RegExp)} pattern\n * @param {string} replacement\n * @return {string}\n */\nexport function replace (value, pattern, replacement) {\n\treturn value.replace(pattern, replacement)\n}\n\n/**\n * @param {string} value\n * @param {string} search\n * @return {number}\n */\nexport function indexof (value, search) {\n\treturn value.indexOf(search)\n}\n\n/**\n * @param {string} value\n * @param {number} index\n * @return {number}\n */\nexport function charat (value, index) {\n\treturn value.charCodeAt(index) | 0\n}\n\n/**\n * @param {string} value\n * @param {number} begin\n * @param {number} end\n * @return {string}\n */\nexport function substr (value, begin, end) {\n\treturn value.slice(begin, end)\n}\n\n/**\n * @param {string} value\n * @return {number}\n */\nexport function strlen (value) {\n\treturn value.length\n}\n\n/**\n * @param {any[]} value\n * @return {number}\n */\nexport function sizeof (value) {\n\treturn value.length\n}\n\n/**\n * @param {any} value\n * @param {any[]} array\n * @return {any}\n */\nexport function append (value, array) {\n\treturn array.push(value), value\n}\n\n/**\n * @param {string[]} array\n * @param {function} callback\n * @return {string}\n */\nexport function combine (array, callback) {\n\treturn array.map(callback).join('')\n}\n","import {from, trim, charat, strlen, substr, append, assign} from './Utility.js'\n\nexport var line = 1\nexport var column = 1\nexport var length = 0\nexport var position = 0\nexport var character = 0\nexport var characters = ''\n\n/**\n * @param {string} value\n * @param {object | null} root\n * @param {object | null} parent\n * @param {string} type\n * @param {string[] | string} props\n * @param {object[] | string} children\n * @param {number} length\n */\nexport function node (value, root, parent, type, props, children, length) {\n\treturn {value: value, root: root, parent: parent, type: type, props: props, children: children, line: line, column: column, length: length, return: ''}\n}\n\n/**\n * @param {object} root\n * @param {object} props\n * @return {object}\n */\nexport function copy (root, props) {\n\treturn assign(node('', null, null, '', null, null, 0), root, {length: -root.length}, props)\n}\n\n/**\n * @return {number}\n */\nexport function char () {\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function prev () {\n\tcharacter = position > 0 ? charat(characters, --position) : 0\n\n\tif (column--, character === 10)\n\t\tcolumn = 1, line--\n\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function next () {\n\tcharacter = position < length ? charat(characters, position++) : 0\n\n\tif (column++, character === 10)\n\t\tcolumn = 1, line++\n\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function peek () {\n\treturn charat(characters, position)\n}\n\n/**\n * @return {number}\n */\nexport function caret () {\n\treturn position\n}\n\n/**\n * @param {number} begin\n * @param {number} end\n * @return {string}\n */\nexport function slice (begin, end) {\n\treturn substr(characters, begin, end)\n}\n\n/**\n * @param {number} type\n * @return {number}\n */\nexport function token (type) {\n\tswitch (type) {\n\t\t// \\0 \\t \\n \\r \\s whitespace token\n\t\tcase 0: case 9: case 10: case 13: case 32:\n\t\t\treturn 5\n\t\t// ! + , / > @ ~ isolate token\n\t\tcase 33: case 43: case 44: case 47: case 62: case 64: case 126:\n\t\t// ; { } breakpoint token\n\t\tcase 59: case 123: case 125:\n\t\t\treturn 4\n\t\t// : accompanied token\n\t\tcase 58:\n\t\t\treturn 3\n\t\t// \" ' ( [ opening delimit token\n\t\tcase 34: case 39: case 40: case 91:\n\t\t\treturn 2\n\t\t// ) ] closing delimit token\n\t\tcase 41: case 93:\n\t\t\treturn 1\n\t}\n\n\treturn 0\n}\n\n/**\n * @param {string} value\n * @return {any[]}\n */\nexport function alloc (value) {\n\treturn line = column = 1, length = strlen(characters = value), position = 0, []\n}\n\n/**\n * @param {any} value\n * @return {any}\n */\nexport function dealloc (value) {\n\treturn characters = '', value\n}\n\n/**\n * @param {number} type\n * @return {string}\n */\nexport function delimit (type) {\n\treturn trim(slice(position - 1, delimiter(type === 91 ? type + 2 : type === 40 ? type + 1 : type)))\n}\n\n/**\n * @param {string} value\n * @return {string[]}\n */\nexport function tokenize (value) {\n\treturn dealloc(tokenizer(alloc(value)))\n}\n\n/**\n * @param {number} type\n * @return {string}\n */\nexport function whitespace (type) {\n\twhile (character = peek())\n\t\tif (character < 33)\n\t\t\tnext()\n\t\telse\n\t\t\tbreak\n\n\treturn token(type) > 2 || token(character) > 3 ? '' : ' '\n}\n\n/**\n * @param {string[]} children\n * @return {string[]}\n */\nexport function tokenizer (children) {\n\twhile (next())\n\t\tswitch (token(character)) {\n\t\t\tcase 0: append(identifier(position - 1), children)\n\t\t\t\tbreak\n\t\t\tcase 2: append(delimit(character), children)\n\t\t\t\tbreak\n\t\t\tdefault: append(from(character), children)\n\t\t}\n\n\treturn children\n}\n\n/**\n * @param {number} index\n * @param {number} count\n * @return {string}\n */\nexport function escaping (index, count) {\n\twhile (--count && next())\n\t\t// not 0-9 A-F a-f\n\t\tif (character < 48 || character > 102 || (character > 57 && character < 65) || (character > 70 && character < 97))\n\t\t\tbreak\n\n\treturn slice(index, caret() + (count < 6 && peek() == 32 && next() == 32))\n}\n\n/**\n * @param {number} type\n * @return {number}\n */\nexport function delimiter (type) {\n\twhile (next())\n\t\tswitch (character) {\n\t\t\t// ] ) \" '\n\t\t\tcase type:\n\t\t\t\treturn position\n\t\t\t// \" '\n\t\t\tcase 34: case 39:\n\t\t\t\tif (type !== 34 && type !== 39)\n\t\t\t\t\tdelimiter(character)\n\t\t\t\tbreak\n\t\t\t// (\n\t\t\tcase 40:\n\t\t\t\tif (type === 41)\n\t\t\t\t\tdelimiter(type)\n\t\t\t\tbreak\n\t\t\t// \\\n\t\t\tcase 92:\n\t\t\t\tnext()\n\t\t\t\tbreak\n\t\t}\n\n\treturn position\n}\n\n/**\n * @param {number} type\n * @param {number} index\n * @return {number}\n */\nexport function commenter (type, index) {\n\twhile (next())\n\t\t// //\n\t\tif (type + character === 47 + 10)\n\t\t\tbreak\n\t\t// /*\n\t\telse if (type + character === 42 + 42 && peek() === 47)\n\t\t\tbreak\n\n\treturn '/*' + slice(index, position - 1) + '*' + from(type === 47 ? type : next())\n}\n\n/**\n * @param {number} index\n * @return {string}\n */\nexport function identifier (index) {\n\twhile (!token(peek()))\n\t\tnext()\n\n\treturn slice(index, position)\n}\n","import {COMMENT, RULESET, DECLARATION} from './Enum.js'\nimport {abs, charat, trim, from, sizeof, strlen, substr, append, replace, indexof} from './Utility.js'\nimport {node, char, prev, next, peek, caret, alloc, dealloc, delimit, whitespace, escaping, identifier, commenter} from './Tokenizer.js'\n\n/**\n * @param {string} value\n * @return {object[]}\n */\nexport function compile (value) {\n\treturn dealloc(parse('', null, null, null, [''], value = alloc(value), 0, [0], value))\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {string[]} rule\n * @param {string[]} rules\n * @param {string[]} rulesets\n * @param {number[]} pseudo\n * @param {number[]} points\n * @param {string[]} declarations\n * @return {object}\n */\nexport function parse (value, root, parent, rule, rules, rulesets, pseudo, points, declarations) {\n\tvar index = 0\n\tvar offset = 0\n\tvar length = pseudo\n\tvar atrule = 0\n\tvar property = 0\n\tvar previous = 0\n\tvar variable = 1\n\tvar scanning = 1\n\tvar ampersand = 1\n\tvar character = 0\n\tvar type = ''\n\tvar props = rules\n\tvar children = rulesets\n\tvar reference = rule\n\tvar characters = type\n\n\twhile (scanning)\n\t\tswitch (previous = character, character = next()) {\n\t\t\t// (\n\t\t\tcase 40:\n\t\t\t\tif (previous != 108 && charat(characters, length - 1) == 58) {\n\t\t\t\t\tif (indexof(characters += replace(delimit(character), '&', '&\\f'), '&\\f') != -1)\n\t\t\t\t\t\tampersand = -1\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t// \" ' [\n\t\t\tcase 34: case 39: case 91:\n\t\t\t\tcharacters += delimit(character)\n\t\t\t\tbreak\n\t\t\t// \\t \\n \\r \\s\n\t\t\tcase 9: case 10: case 13: case 32:\n\t\t\t\tcharacters += whitespace(previous)\n\t\t\t\tbreak\n\t\t\t// \\\n\t\t\tcase 92:\n\t\t\t\tcharacters += escaping(caret() - 1, 7)\n\t\t\t\tcontinue\n\t\t\t// /\n\t\t\tcase 47:\n\t\t\t\tswitch (peek()) {\n\t\t\t\t\tcase 42: case 47:\n\t\t\t\t\t\tappend(comment(commenter(next(), caret()), root, parent), declarations)\n\t\t\t\t\t\tbreak\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcharacters += '/'\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t// {\n\t\t\tcase 123 * variable:\n\t\t\t\tpoints[index++] = strlen(characters) * ampersand\n\t\t\t// } ; \\0\n\t\t\tcase 125 * variable: case 59: case 0:\n\t\t\t\tswitch (character) {\n\t\t\t\t\t// \\0 }\n\t\t\t\t\tcase 0: case 125: scanning = 0\n\t\t\t\t\t// ;\n\t\t\t\t\tcase 59 + offset: if (ampersand == -1) characters = replace(characters, /\\f/g, '')\n\t\t\t\t\t\tif (property > 0 && (strlen(characters) - length))\n\t\t\t\t\t\t\tappend(property > 32 ? declaration(characters + ';', rule, parent, length - 1) : declaration(replace(characters, ' ', '') + ';', rule, parent, length - 2), declarations)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// @ ;\n\t\t\t\t\tcase 59: characters += ';'\n\t\t\t\t\t// { rule/at-rule\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tappend(reference = ruleset(characters, root, parent, index, offset, rules, points, type, props = [], children = [], length), rulesets)\n\n\t\t\t\t\t\tif (character === 123)\n\t\t\t\t\t\t\tif (offset === 0)\n\t\t\t\t\t\t\t\tparse(characters, root, reference, reference, props, rulesets, length, points, children)\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tswitch (atrule === 99 && charat(characters, 3) === 110 ? 100 : atrule) {\n\t\t\t\t\t\t\t\t\t// d l m s\n\t\t\t\t\t\t\t\t\tcase 100: case 108: case 109: case 115:\n\t\t\t\t\t\t\t\t\t\tparse(value, reference, reference, rule && append(ruleset(value, reference, reference, 0, 0, rules, points, type, rules, props = [], length), children), rules, children, length, points, rule ? props : children)\n\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tparse(characters, reference, reference, reference, [''], children, 0, points, children)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tindex = offset = property = 0, variable = ampersand = 1, type = characters = '', length = pseudo\n\t\t\t\tbreak\n\t\t\t// :\n\t\t\tcase 58:\n\t\t\t\tlength = 1 + strlen(characters), property = previous\n\t\t\tdefault:\n\t\t\t\tif (variable < 1)\n\t\t\t\t\tif (character == 123)\n\t\t\t\t\t\t--variable\n\t\t\t\t\telse if (character == 125 && variable++ == 0 && prev() == 125)\n\t\t\t\t\t\tcontinue\n\n\t\t\t\tswitch (characters += from(character), character * variable) {\n\t\t\t\t\t// &\n\t\t\t\t\tcase 38:\n\t\t\t\t\t\tampersand = offset > 0 ? 1 : (characters += '\\f', -1)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// ,\n\t\t\t\t\tcase 44:\n\t\t\t\t\t\tpoints[index++] = (strlen(characters) - 1) * ampersand, ampersand = 1\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// @\n\t\t\t\t\tcase 64:\n\t\t\t\t\t\t// -\n\t\t\t\t\t\tif (peek() === 45)\n\t\t\t\t\t\t\tcharacters += delimit(next())\n\n\t\t\t\t\t\tatrule = peek(), offset = length = strlen(type = characters += identifier(caret())), character++\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// -\n\t\t\t\t\tcase 45:\n\t\t\t\t\t\tif (previous === 45 && strlen(characters) == 2)\n\t\t\t\t\t\t\tvariable = 0\n\t\t\t\t}\n\t\t}\n\n\treturn rulesets\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {number} index\n * @param {number} offset\n * @param {string[]} rules\n * @param {number[]} points\n * @param {string} type\n * @param {string[]} props\n * @param {string[]} children\n * @param {number} length\n * @return {object}\n */\nexport function ruleset (value, root, parent, index, offset, rules, points, type, props, children, length) {\n\tvar post = offset - 1\n\tvar rule = offset === 0 ? rules : ['']\n\tvar size = sizeof(rule)\n\n\tfor (var i = 0, j = 0, k = 0; i < index; ++i)\n\t\tfor (var x = 0, y = substr(value, post + 1, post = abs(j = points[i])), z = value; x < size; ++x)\n\t\t\tif (z = trim(j > 0 ? rule[x] + ' ' + y : replace(y, /&\\f/g, rule[x])))\n\t\t\t\tprops[k++] = z\n\n\treturn node(value, root, parent, offset === 0 ? RULESET : type, props, children, length)\n}\n\n/**\n * @param {number} value\n * @param {object} root\n * @param {object?} parent\n * @return {object}\n */\nexport function comment (value, root, parent) {\n\treturn node(value, root, parent, COMMENT, from(char()), substr(value, 2, -2), 0)\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {number} length\n * @return {object}\n */\nexport function declaration (value, root, parent, length) {\n\treturn node(value, root, parent, DECLARATION, substr(value, 0, length), substr(value, length + 1, -1), length)\n}\n","import {IMPORT, LAYER, COMMENT, RULESET, DECLARATION, KEYFRAMES} from './Enum.js'\nimport {strlen, sizeof} from './Utility.js'\n\n/**\n * @param {object[]} children\n * @param {function} callback\n * @return {string}\n */\nexport function serialize (children, callback) {\n\tvar output = ''\n\tvar length = sizeof(children)\n\n\tfor (var i = 0; i < length; i++)\n\t\toutput += callback(children[i], i, children, callback) || ''\n\n\treturn output\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n * @param {function} callback\n * @return {string}\n */\nexport function stringify (element, index, children, callback) {\n\tswitch (element.type) {\n\t\tcase LAYER: if (element.children.length) break\n\t\tcase IMPORT: case DECLARATION: return element.return = element.return || element.value\n\t\tcase COMMENT: return ''\n\t\tcase KEYFRAMES: return element.return = element.value + '{' + serialize(element.children, callback) + '}'\n\t\tcase RULESET: element.value = element.props.join(',')\n\t}\n\n\treturn strlen(children = serialize(element.children, callback)) ? element.return = element.value + '{' + children + '}' : ''\n}\n","import {MS, MOZ, WEBKIT, RULESET, KEYFRAMES, DECLARATION} from './Enum.js'\nimport {match, charat, substr, strlen, sizeof, replace, combine} from './Utility.js'\nimport {copy, tokenize} from './Tokenizer.js'\nimport {serialize} from './Serializer.js'\nimport {prefix} from './Prefixer.js'\n\n/**\n * @param {function[]} collection\n * @return {function}\n */\nexport function middleware (collection) {\n\tvar length = sizeof(collection)\n\n\treturn function (element, index, children, callback) {\n\t\tvar output = ''\n\n\t\tfor (var i = 0; i < length; i++)\n\t\t\toutput += collection[i](element, index, children, callback) || ''\n\n\t\treturn output\n\t}\n}\n\n/**\n * @param {function} callback\n * @return {function}\n */\nexport function rulesheet (callback) {\n\treturn function (element) {\n\t\tif (!element.root)\n\t\t\tif (element = element.return)\n\t\t\t\tcallback(element)\n\t}\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n * @param {function} callback\n */\nexport function prefixer (element, index, children, callback) {\n\tif (element.length > -1)\n\t\tif (!element.return)\n\t\t\tswitch (element.type) {\n\t\t\t\tcase DECLARATION: element.return = prefix(element.value, element.length, children)\n\t\t\t\t\treturn\n\t\t\t\tcase KEYFRAMES:\n\t\t\t\t\treturn serialize([copy(element, {value: replace(element.value, '@', '@' + WEBKIT)})], callback)\n\t\t\t\tcase RULESET:\n\t\t\t\t\tif (element.length)\n\t\t\t\t\t\treturn combine(element.props, function (value) {\n\t\t\t\t\t\t\tswitch (match(value, /(::plac\\w+|:read-\\w+)/)) {\n\t\t\t\t\t\t\t\t// :read-(only|write)\n\t\t\t\t\t\t\t\tcase ':read-only': case ':read-write':\n\t\t\t\t\t\t\t\t\treturn serialize([copy(element, {props: [replace(value, /:(read-\\w+)/, ':' + MOZ + '$1')]})], callback)\n\t\t\t\t\t\t\t\t// :placeholder\n\t\t\t\t\t\t\t\tcase '::placeholder':\n\t\t\t\t\t\t\t\t\treturn serialize([\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, ':' + WEBKIT + 'input-$1')]}),\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, ':' + MOZ + '$1')]}),\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, MS + 'input-$1')]})\n\t\t\t\t\t\t\t\t\t], callback)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn ''\n\t\t\t\t\t\t})\n\t\t\t}\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n */\nexport function namespace (element) {\n\tswitch (element.type) {\n\t\tcase RULESET:\n\t\t\telement.props = element.props.map(function (value) {\n\t\t\t\treturn combine(tokenize(value), function (value, index, children) {\n\t\t\t\t\tswitch (charat(value, 0)) {\n\t\t\t\t\t\t// \\f\n\t\t\t\t\t\tcase 12:\n\t\t\t\t\t\t\treturn substr(value, 1, strlen(value))\n\t\t\t\t\t\t// \\0 ( + > ~\n\t\t\t\t\t\tcase 0: case 40: case 43: case 62: case 126:\n\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t// :\n\t\t\t\t\t\tcase 58:\n\t\t\t\t\t\t\tif (children[++index] === 'global')\n\t\t\t\t\t\t\t\tchildren[index] = '', children[++index] = '\\f' + substr(children[index], index = 1, -1)\n\t\t\t\t\t\t// \\s\n\t\t\t\t\t\tcase 32:\n\t\t\t\t\t\t\treturn index === 1 ? '' : value\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tswitch (index) {\n\t\t\t\t\t\t\t\tcase 0: element = value\n\t\t\t\t\t\t\t\t\treturn sizeof(children) > 1 ? '' : value\n\t\t\t\t\t\t\t\tcase index = sizeof(children) - 1: case 2:\n\t\t\t\t\t\t\t\t\treturn index === 2 ? value + element + element : value + element\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t}\n}\n","function memoize(fn) {\n  var cache = Object.create(null);\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport { memoize as default };\n","import { StyleSheet } from '@emotion/sheet';\nimport { dealloc, alloc, next, token, from, peek, delimit, slice, position, RULESET, combine, match, serialize, copy, replace, WEBKIT, MOZ, MS, KEYFRAMES, DECLARATION, hash, charat, strlen, indexof, stringify, COMMENT, rulesheet, middleware, compile } from 'stylis';\nimport '@emotion/weak-memoize';\nimport '@emotion/memoize';\n\nvar identifierWithPointTracking = function identifierWithPointTracking(begin, points, index) {\n  var previous = 0;\n  var character = 0;\n\n  while (true) {\n    previous = character;\n    character = peek(); // &\\f\n\n    if (previous === 38 && character === 12) {\n      points[index] = 1;\n    }\n\n    if (token(character)) {\n      break;\n    }\n\n    next();\n  }\n\n  return slice(begin, position);\n};\n\nvar toRules = function toRules(parsed, points) {\n  // pretend we've started with a comma\n  var index = -1;\n  var character = 44;\n\n  do {\n    switch (token(character)) {\n      case 0:\n        // &\\f\n        if (character === 38 && peek() === 12) {\n          // this is not 100% correct, we don't account for literal sequences here - like for example quoted strings\n          // stylis inserts \\f after & to know when & where it should replace this sequence with the context selector\n          // and when it should just concatenate the outer and inner selectors\n          // it's very unlikely for this sequence to actually appear in a different context, so we just leverage this fact here\n          points[index] = 1;\n        }\n\n        parsed[index] += identifierWithPointTracking(position - 1, points, index);\n        break;\n\n      case 2:\n        parsed[index] += delimit(character);\n        break;\n\n      case 4:\n        // comma\n        if (character === 44) {\n          // colon\n          parsed[++index] = peek() === 58 ? '&\\f' : '';\n          points[index] = parsed[index].length;\n          break;\n        }\n\n      // fallthrough\n\n      default:\n        parsed[index] += from(character);\n    }\n  } while (character = next());\n\n  return parsed;\n};\n\nvar getRules = function getRules(value, points) {\n  return dealloc(toRules(alloc(value), points));\n}; // WeakSet would be more appropriate, but only WeakMap is supported in IE11\n\n\nvar fixedElements = /* #__PURE__ */new WeakMap();\nvar compat = function compat(element) {\n  if (element.type !== 'rule' || !element.parent || // positive .length indicates that this rule contains pseudo\n  // negative .length indicates that this rule has been already prefixed\n  element.length < 1) {\n    return;\n  }\n\n  var value = element.value,\n      parent = element.parent;\n  var isImplicitRule = element.column === parent.column && element.line === parent.line;\n\n  while (parent.type !== 'rule') {\n    parent = parent.parent;\n    if (!parent) return;\n  } // short-circuit for the simplest case\n\n\n  if (element.props.length === 1 && value.charCodeAt(0) !== 58\n  /* colon */\n  && !fixedElements.get(parent)) {\n    return;\n  } // if this is an implicitly inserted rule (the one eagerly inserted at the each new nested level)\n  // then the props has already been manipulated beforehand as they that array is shared between it and its \"rule parent\"\n\n\n  if (isImplicitRule) {\n    return;\n  }\n\n  fixedElements.set(element, true);\n  var points = [];\n  var rules = getRules(value, points);\n  var parentRules = parent.props;\n\n  for (var i = 0, k = 0; i < rules.length; i++) {\n    for (var j = 0; j < parentRules.length; j++, k++) {\n      element.props[k] = points[i] ? rules[i].replace(/&\\f/g, parentRules[j]) : parentRules[j] + \" \" + rules[i];\n    }\n  }\n};\nvar removeLabel = function removeLabel(element) {\n  if (element.type === 'decl') {\n    var value = element.value;\n\n    if ( // charcode for l\n    value.charCodeAt(0) === 108 && // charcode for b\n    value.charCodeAt(2) === 98) {\n      // this ignores label\n      element[\"return\"] = '';\n      element.value = '';\n    }\n  }\n};\nvar ignoreFlag = 'emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason';\n\nvar isIgnoringComment = function isIgnoringComment(element) {\n  return element.type === 'comm' && element.children.indexOf(ignoreFlag) > -1;\n};\n\nvar createUnsafeSelectorsAlarm = function createUnsafeSelectorsAlarm(cache) {\n  return function (element, index, children) {\n    if (element.type !== 'rule' || cache.compat) return;\n    var unsafePseudoClasses = element.value.match(/(:first|:nth|:nth-last)-child/g);\n\n    if (unsafePseudoClasses) {\n      var isNested = !!element.parent; // in nested rules comments become children of the \"auto-inserted\" rule and that's always the `element.parent`\n      //\n      // considering this input:\n      // .a {\n      //   .b /* comm */ {}\n      //   color: hotpink;\n      // }\n      // we get output corresponding to this:\n      // .a {\n      //   & {\n      //     /* comm */\n      //     color: hotpink;\n      //   }\n      //   .b {}\n      // }\n\n      var commentContainer = isNested ? element.parent.children : // global rule at the root level\n      children;\n\n      for (var i = commentContainer.length - 1; i >= 0; i--) {\n        var node = commentContainer[i];\n\n        if (node.line < element.line) {\n          break;\n        } // it is quite weird but comments are *usually* put at `column: element.column - 1`\n        // so we seek *from the end* for the node that is earlier than the rule's `element` and check that\n        // this will also match inputs like this:\n        // .a {\n        //   /* comm */\n        //   .b {}\n        // }\n        //\n        // but that is fine\n        //\n        // it would be the easiest to change the placement of the comment to be the first child of the rule:\n        // .a {\n        //   .b { /* comm */ }\n        // }\n        // with such inputs we wouldn't have to search for the comment at all\n        // TODO: consider changing this comment placement in the next major version\n\n\n        if (node.column < element.column) {\n          if (isIgnoringComment(node)) {\n            return;\n          }\n\n          break;\n        }\n      }\n\n      unsafePseudoClasses.forEach(function (unsafePseudoClass) {\n        console.error(\"The pseudo class \\\"\" + unsafePseudoClass + \"\\\" is potentially unsafe when doing server-side rendering. Try changing it to \\\"\" + unsafePseudoClass.split('-child')[0] + \"-of-type\\\".\");\n      });\n    }\n  };\n};\n\nvar isImportRule = function isImportRule(element) {\n  return element.type.charCodeAt(1) === 105 && element.type.charCodeAt(0) === 64;\n};\n\nvar isPrependedWithRegularRules = function isPrependedWithRegularRules(index, children) {\n  for (var i = index - 1; i >= 0; i--) {\n    if (!isImportRule(children[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}; // use this to remove incorrect elements from further processing\n// so they don't get handed to the `sheet` (or anything else)\n// as that could potentially lead to additional logs which in turn could be overhelming to the user\n\n\nvar nullifyElement = function nullifyElement(element) {\n  element.type = '';\n  element.value = '';\n  element[\"return\"] = '';\n  element.children = '';\n  element.props = '';\n};\n\nvar incorrectImportAlarm = function incorrectImportAlarm(element, index, children) {\n  if (!isImportRule(element)) {\n    return;\n  }\n\n  if (element.parent) {\n    console.error(\"`@import` rules can't be nested inside other rules. Please move it to the top level and put it before regular rules. Keep in mind that they can only be used within global styles.\");\n    nullifyElement(element);\n  } else if (isPrependedWithRegularRules(index, children)) {\n    console.error(\"`@import` rules can't be after other rules. Please put your `@import` rules before your other rules.\");\n    nullifyElement(element);\n  }\n};\n\n/* eslint-disable no-fallthrough */\n\nfunction prefix(value, length) {\n  switch (hash(value, length)) {\n    // color-adjust\n    case 5103:\n      return WEBKIT + 'print-' + value + value;\n    // animation, animation-(delay|direction|duration|fill-mode|iteration-count|name|play-state|timing-function)\n\n    case 5737:\n    case 4201:\n    case 3177:\n    case 3433:\n    case 1641:\n    case 4457:\n    case 2921: // text-decoration, filter, clip-path, backface-visibility, column, box-decoration-break\n\n    case 5572:\n    case 6356:\n    case 5844:\n    case 3191:\n    case 6645:\n    case 3005: // mask, mask-image, mask-(mode|clip|size), mask-(repeat|origin), mask-position, mask-composite,\n\n    case 6391:\n    case 5879:\n    case 5623:\n    case 6135:\n    case 4599:\n    case 4855: // background-clip, columns, column-(count|fill|gap|rule|rule-color|rule-style|rule-width|span|width)\n\n    case 4215:\n    case 6389:\n    case 5109:\n    case 5365:\n    case 5621:\n    case 3829:\n      return WEBKIT + value + value;\n    // appearance, user-select, transform, hyphens, text-size-adjust\n\n    case 5349:\n    case 4246:\n    case 4810:\n    case 6968:\n    case 2756:\n      return WEBKIT + value + MOZ + value + MS + value + value;\n    // flex, flex-direction\n\n    case 6828:\n    case 4268:\n      return WEBKIT + value + MS + value + value;\n    // order\n\n    case 6165:\n      return WEBKIT + value + MS + 'flex-' + value + value;\n    // align-items\n\n    case 5187:\n      return WEBKIT + value + replace(value, /(\\w+).+(:[^]+)/, WEBKIT + 'box-$1$2' + MS + 'flex-$1$2') + value;\n    // align-self\n\n    case 5443:\n      return WEBKIT + value + MS + 'flex-item-' + replace(value, /flex-|-self/, '') + value;\n    // align-content\n\n    case 4675:\n      return WEBKIT + value + MS + 'flex-line-pack' + replace(value, /align-content|flex-|-self/, '') + value;\n    // flex-shrink\n\n    case 5548:\n      return WEBKIT + value + MS + replace(value, 'shrink', 'negative') + value;\n    // flex-basis\n\n    case 5292:\n      return WEBKIT + value + MS + replace(value, 'basis', 'preferred-size') + value;\n    // flex-grow\n\n    case 6060:\n      return WEBKIT + 'box-' + replace(value, '-grow', '') + WEBKIT + value + MS + replace(value, 'grow', 'positive') + value;\n    // transition\n\n    case 4554:\n      return WEBKIT + replace(value, /([^-])(transform)/g, '$1' + WEBKIT + '$2') + value;\n    // cursor\n\n    case 6187:\n      return replace(replace(replace(value, /(zoom-|grab)/, WEBKIT + '$1'), /(image-set)/, WEBKIT + '$1'), value, '') + value;\n    // background, background-image\n\n    case 5495:\n    case 3959:\n      return replace(value, /(image-set\\([^]*)/, WEBKIT + '$1' + '$`$1');\n    // justify-content\n\n    case 4968:\n      return replace(replace(value, /(.+:)(flex-)?(.*)/, WEBKIT + 'box-pack:$3' + MS + 'flex-pack:$3'), /s.+-b[^;]+/, 'justify') + WEBKIT + value + value;\n    // (margin|padding)-inline-(start|end)\n\n    case 4095:\n    case 3583:\n    case 4068:\n    case 2532:\n      return replace(value, /(.+)-inline(.+)/, WEBKIT + '$1$2') + value;\n    // (min|max)?(width|height|inline-size|block-size)\n\n    case 8116:\n    case 7059:\n    case 5753:\n    case 5535:\n    case 5445:\n    case 5701:\n    case 4933:\n    case 4677:\n    case 5533:\n    case 5789:\n    case 5021:\n    case 4765:\n      // stretch, max-content, min-content, fill-available\n      if (strlen(value) - 1 - length > 6) switch (charat(value, length + 1)) {\n        // (m)ax-content, (m)in-content\n        case 109:\n          // -\n          if (charat(value, length + 4) !== 45) break;\n        // (f)ill-available, (f)it-content\n\n        case 102:\n          return replace(value, /(.+:)(.+)-([^]+)/, '$1' + WEBKIT + '$2-$3' + '$1' + MOZ + (charat(value, length + 3) == 108 ? '$3' : '$2-$3')) + value;\n        // (s)tretch\n\n        case 115:\n          return ~indexof(value, 'stretch') ? prefix(replace(value, 'stretch', 'fill-available'), length) + value : value;\n      }\n      break;\n    // position: sticky\n\n    case 4949:\n      // (s)ticky?\n      if (charat(value, length + 1) !== 115) break;\n    // display: (flex|inline-flex)\n\n    case 6444:\n      switch (charat(value, strlen(value) - 3 - (~indexof(value, '!important') && 10))) {\n        // stic(k)y\n        case 107:\n          return replace(value, ':', ':' + WEBKIT) + value;\n        // (inline-)?fl(e)x\n\n        case 101:\n          return replace(value, /(.+:)([^;!]+)(;|!.+)?/, '$1' + WEBKIT + (charat(value, 14) === 45 ? 'inline-' : '') + 'box$3' + '$1' + WEBKIT + '$2$3' + '$1' + MS + '$2box$3') + value;\n      }\n\n      break;\n    // writing-mode\n\n    case 5936:\n      switch (charat(value, length + 11)) {\n        // vertical-l(r)\n        case 114:\n          return WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'tb') + value;\n        // vertical-r(l)\n\n        case 108:\n          return WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'tb-rl') + value;\n        // horizontal(-)tb\n\n        case 45:\n          return WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'lr') + value;\n      }\n\n      return WEBKIT + value + MS + value + value;\n  }\n\n  return value;\n}\n\nvar prefixer = function prefixer(element, index, children, callback) {\n  if (element.length > -1) if (!element[\"return\"]) switch (element.type) {\n    case DECLARATION:\n      element[\"return\"] = prefix(element.value, element.length);\n      break;\n\n    case KEYFRAMES:\n      return serialize([copy(element, {\n        value: replace(element.value, '@', '@' + WEBKIT)\n      })], callback);\n\n    case RULESET:\n      if (element.length) return combine(element.props, function (value) {\n        switch (match(value, /(::plac\\w+|:read-\\w+)/)) {\n          // :read-(only|write)\n          case ':read-only':\n          case ':read-write':\n            return serialize([copy(element, {\n              props: [replace(value, /:(read-\\w+)/, ':' + MOZ + '$1')]\n            })], callback);\n          // :placeholder\n\n          case '::placeholder':\n            return serialize([copy(element, {\n              props: [replace(value, /:(plac\\w+)/, ':' + WEBKIT + 'input-$1')]\n            }), copy(element, {\n              props: [replace(value, /:(plac\\w+)/, ':' + MOZ + '$1')]\n            }), copy(element, {\n              props: [replace(value, /:(plac\\w+)/, MS + 'input-$1')]\n            })], callback);\n        }\n\n        return '';\n      });\n  }\n};\n\nvar defaultStylisPlugins = [prefixer];\n\nvar createCache = function createCache(options) {\n  var key = options.key;\n\n  if (process.env.NODE_ENV !== 'production' && !key) {\n    throw new Error(\"You have to configure `key` for your cache. Please make sure it's unique (and not equal to 'css') as it's used for linking styles to your cache.\\n\" + \"If multiple caches share the same key they might \\\"fight\\\" for each other's style elements.\");\n  }\n\n  if (key === 'css') {\n    var ssrStyles = document.querySelectorAll(\"style[data-emotion]:not([data-s])\"); // get SSRed styles out of the way of React's hydration\n    // document.head is a safe place to move them to(though note document.head is not necessarily the last place they will be)\n    // note this very very intentionally targets all style elements regardless of the key to ensure\n    // that creating a cache works inside of render of a React component\n\n    Array.prototype.forEach.call(ssrStyles, function (node) {\n      // we want to only move elements which have a space in the data-emotion attribute value\n      // because that indicates that it is an Emotion 11 server-side rendered style elements\n      // while we will already ignore Emotion 11 client-side inserted styles because of the :not([data-s]) part in the selector\n      // Emotion 10 client-side inserted styles did not have data-s (but importantly did not have a space in their data-emotion attributes)\n      // so checking for the space ensures that loading Emotion 11 after Emotion 10 has inserted some styles\n      // will not result in the Emotion 10 styles being destroyed\n      var dataEmotionAttribute = node.getAttribute('data-emotion');\n\n      if (dataEmotionAttribute.indexOf(' ') === -1) {\n        return;\n      }\n      document.head.appendChild(node);\n      node.setAttribute('data-s', '');\n    });\n  }\n\n  var stylisPlugins = options.stylisPlugins || defaultStylisPlugins;\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe\n    if (/[^a-z-]/.test(key)) {\n      throw new Error(\"Emotion key must only contain lower case alphabetical characters and - but \\\"\" + key + \"\\\" was passed\");\n    }\n  }\n\n  var inserted = {};\n  var container;\n  var nodesToHydrate = [];\n\n  {\n    container = options.container || document.head;\n    Array.prototype.forEach.call( // this means we will ignore elements which don't have a space in them which\n    // means that the style elements we're looking at are only Emotion 11 server-rendered style elements\n    document.querySelectorAll(\"style[data-emotion^=\\\"\" + key + \" \\\"]\"), function (node) {\n      var attrib = node.getAttribute(\"data-emotion\").split(' '); // $FlowFixMe\n\n      for (var i = 1; i < attrib.length; i++) {\n        inserted[attrib[i]] = true;\n      }\n\n      nodesToHydrate.push(node);\n    });\n  }\n\n  var _insert;\n\n  var omnipresentPlugins = [compat, removeLabel];\n\n  if (process.env.NODE_ENV !== 'production') {\n    omnipresentPlugins.push(createUnsafeSelectorsAlarm({\n      get compat() {\n        return cache.compat;\n      }\n\n    }), incorrectImportAlarm);\n  }\n\n  {\n    var currentSheet;\n    var finalizingPlugins = [stringify, process.env.NODE_ENV !== 'production' ? function (element) {\n      if (!element.root) {\n        if (element[\"return\"]) {\n          currentSheet.insert(element[\"return\"]);\n        } else if (element.value && element.type !== COMMENT) {\n          // insert empty rule in non-production environments\n          // so @emotion/jest can grab `key` from the (JS)DOM for caches without any rules inserted yet\n          currentSheet.insert(element.value + \"{}\");\n        }\n      }\n    } : rulesheet(function (rule) {\n      currentSheet.insert(rule);\n    })];\n    var serializer = middleware(omnipresentPlugins.concat(stylisPlugins, finalizingPlugins));\n\n    var stylis = function stylis(styles) {\n      return serialize(compile(styles), serializer);\n    };\n\n    _insert = function insert(selector, serialized, sheet, shouldCache) {\n      currentSheet = sheet;\n\n      if (process.env.NODE_ENV !== 'production' && serialized.map !== undefined) {\n        currentSheet = {\n          insert: function insert(rule) {\n            sheet.insert(rule + serialized.map);\n          }\n        };\n      }\n\n      stylis(selector ? selector + \"{\" + serialized.styles + \"}\" : serialized.styles);\n\n      if (shouldCache) {\n        cache.inserted[serialized.name] = true;\n      }\n    };\n  }\n\n  var cache = {\n    key: key,\n    sheet: new StyleSheet({\n      key: key,\n      container: container,\n      nonce: options.nonce,\n      speedy: options.speedy,\n      prepend: options.prepend,\n      insertionPoint: options.insertionPoint\n    }),\n    nonce: options.nonce,\n    inserted: inserted,\n    registered: {},\n    insert: _insert\n  };\n  cache.sheet.hydrate(nodesToHydrate);\n  return cache;\n};\n\nexport { createCache as default };\n","/* eslint-disable */\n// Inspired by https://github.com/garycourt/murmurhash-js\n// Ported from https://github.com/aappleby/smhasher/blob/61a0530f28277f2e850bfc39600ce61d02b518de/src/MurmurHash2.cpp#L37-L86\nfunction murmur2(str) {\n  // 'm' and 'r' are mixing constants generated offline.\n  // They're not really 'magic', they just happen to work well.\n  // const m = 0x5bd1e995;\n  // const r = 24;\n  // Initialize the hash\n  var h = 0; // Mix 4 bytes at a time into the hash\n\n  var k,\n      i = 0,\n      len = str.length;\n\n  for (; len >= 4; ++i, len -= 4) {\n    k = str.charCodeAt(i) & 0xff | (str.charCodeAt(++i) & 0xff) << 8 | (str.charCodeAt(++i) & 0xff) << 16 | (str.charCodeAt(++i) & 0xff) << 24;\n    k =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16);\n    k ^=\n    /* k >>> r: */\n    k >>> 24;\n    h =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16) ^\n    /* Math.imul(h, m): */\n    (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Handle the last few bytes of the input array\n\n\n  switch (len) {\n    case 3:\n      h ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n\n    case 2:\n      h ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n\n    case 1:\n      h ^= str.charCodeAt(i) & 0xff;\n      h =\n      /* Math.imul(h, m): */\n      (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Do a few final mixes of the hash to ensure the last few\n  // bytes are well-incorporated.\n\n\n  h ^= h >>> 13;\n  h =\n  /* Math.imul(h, m): */\n  (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  return ((h ^ h >>> 15) >>> 0).toString(36);\n}\n\nexport { murmur2 as default };\n","var unitlessKeys = {\n  animationIterationCount: 1,\n  aspectRatio: 1,\n  borderImageOutset: 1,\n  borderImageSlice: 1,\n  borderImageWidth: 1,\n  boxFlex: 1,\n  boxFlexGroup: 1,\n  boxOrdinalGroup: 1,\n  columnCount: 1,\n  columns: 1,\n  flex: 1,\n  flexGrow: 1,\n  flexPositive: 1,\n  flexShrink: 1,\n  flexNegative: 1,\n  flexOrder: 1,\n  gridRow: 1,\n  gridRowEnd: 1,\n  gridRowSpan: 1,\n  gridRowStart: 1,\n  gridColumn: 1,\n  gridColumnEnd: 1,\n  gridColumnSpan: 1,\n  gridColumnStart: 1,\n  msGridRow: 1,\n  msGridRowSpan: 1,\n  msGridColumn: 1,\n  msGridColumnSpan: 1,\n  fontWeight: 1,\n  lineHeight: 1,\n  opacity: 1,\n  order: 1,\n  orphans: 1,\n  tabSize: 1,\n  widows: 1,\n  zIndex: 1,\n  zoom: 1,\n  WebkitLineClamp: 1,\n  // SVG-related properties\n  fillOpacity: 1,\n  floodOpacity: 1,\n  stopOpacity: 1,\n  strokeDasharray: 1,\n  strokeDashoffset: 1,\n  strokeMiterlimit: 1,\n  strokeOpacity: 1,\n  strokeWidth: 1\n};\n\nexport { unitlessKeys as default };\n","import hashString from '@emotion/hash';\nimport unitless from '@emotion/unitless';\nimport memoize from '@emotion/memoize';\n\nvar ILLEGAL_ESCAPE_SEQUENCE_ERROR = \"You have illegal escape sequence in your template literal, most likely inside content's property value.\\nBecause you write your CSS inside a JavaScript string you actually have to do double escaping, so for example \\\"content: '\\\\00d7';\\\" should become \\\"content: '\\\\\\\\00d7';\\\".\\nYou can read more about this here:\\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences\";\nvar UNDEFINED_AS_OBJECT_KEY_ERROR = \"You have passed in falsy value as style object's key (can happen when in example you pass unexported component as computed key).\";\nvar hyphenateRegex = /[A-Z]|^ms/g;\nvar animationRegex = /_EMO_([^_]+?)_([^]*?)_EMO_/g;\n\nvar isCustomProperty = function isCustomProperty(property) {\n  return property.charCodeAt(1) === 45;\n};\n\nvar isProcessableValue = function isProcessableValue(value) {\n  return value != null && typeof value !== 'boolean';\n};\n\nvar processStyleName = /* #__PURE__ */memoize(function (styleName) {\n  return isCustomProperty(styleName) ? styleName : styleName.replace(hyphenateRegex, '-$&').toLowerCase();\n});\n\nvar processStyleValue = function processStyleValue(key, value) {\n  switch (key) {\n    case 'animation':\n    case 'animationName':\n      {\n        if (typeof value === 'string') {\n          return value.replace(animationRegex, function (match, p1, p2) {\n            cursor = {\n              name: p1,\n              styles: p2,\n              next: cursor\n            };\n            return p1;\n          });\n        }\n      }\n  }\n\n  if (unitless[key] !== 1 && !isCustomProperty(key) && typeof value === 'number' && value !== 0) {\n    return value + 'px';\n  }\n\n  return value;\n};\n\nif (process.env.NODE_ENV !== 'production') {\n  var contentValuePattern = /(var|attr|counters?|url|element|(((repeating-)?(linear|radial))|conic)-gradient)\\(|(no-)?(open|close)-quote/;\n  var contentValues = ['normal', 'none', 'initial', 'inherit', 'unset'];\n  var oldProcessStyleValue = processStyleValue;\n  var msPattern = /^-ms-/;\n  var hyphenPattern = /-(.)/g;\n  var hyphenatedCache = {};\n\n  processStyleValue = function processStyleValue(key, value) {\n    if (key === 'content') {\n      if (typeof value !== 'string' || contentValues.indexOf(value) === -1 && !contentValuePattern.test(value) && (value.charAt(0) !== value.charAt(value.length - 1) || value.charAt(0) !== '\"' && value.charAt(0) !== \"'\")) {\n        throw new Error(\"You seem to be using a value for 'content' without quotes, try replacing it with `content: '\\\"\" + value + \"\\\"'`\");\n      }\n    }\n\n    var processed = oldProcessStyleValue(key, value);\n\n    if (processed !== '' && !isCustomProperty(key) && key.indexOf('-') !== -1 && hyphenatedCache[key] === undefined) {\n      hyphenatedCache[key] = true;\n      console.error(\"Using kebab-case for css properties in objects is not supported. Did you mean \" + key.replace(msPattern, 'ms-').replace(hyphenPattern, function (str, _char) {\n        return _char.toUpperCase();\n      }) + \"?\");\n    }\n\n    return processed;\n  };\n}\n\nvar noComponentSelectorMessage = 'Component selectors can only be used in conjunction with ' + '@emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware ' + 'compiler transform.';\n\nfunction handleInterpolation(mergedProps, registered, interpolation) {\n  if (interpolation == null) {\n    return '';\n  }\n\n  if (interpolation.__emotion_styles !== undefined) {\n    if (process.env.NODE_ENV !== 'production' && interpolation.toString() === 'NO_COMPONENT_SELECTOR') {\n      throw new Error(noComponentSelectorMessage);\n    }\n\n    return interpolation;\n  }\n\n  switch (typeof interpolation) {\n    case 'boolean':\n      {\n        return '';\n      }\n\n    case 'object':\n      {\n        if (interpolation.anim === 1) {\n          cursor = {\n            name: interpolation.name,\n            styles: interpolation.styles,\n            next: cursor\n          };\n          return interpolation.name;\n        }\n\n        if (interpolation.styles !== undefined) {\n          var next = interpolation.next;\n\n          if (next !== undefined) {\n            // not the most efficient thing ever but this is a pretty rare case\n            // and there will be very few iterations of this generally\n            while (next !== undefined) {\n              cursor = {\n                name: next.name,\n                styles: next.styles,\n                next: cursor\n              };\n              next = next.next;\n            }\n          }\n\n          var styles = interpolation.styles + \";\";\n\n          if (process.env.NODE_ENV !== 'production' && interpolation.map !== undefined) {\n            styles += interpolation.map;\n          }\n\n          return styles;\n        }\n\n        return createStringFromObject(mergedProps, registered, interpolation);\n      }\n\n    case 'function':\n      {\n        if (mergedProps !== undefined) {\n          var previousCursor = cursor;\n          var result = interpolation(mergedProps);\n          cursor = previousCursor;\n          return handleInterpolation(mergedProps, registered, result);\n        } else if (process.env.NODE_ENV !== 'production') {\n          console.error('Functions that are interpolated in css calls will be stringified.\\n' + 'If you want to have a css call based on props, create a function that returns a css call like this\\n' + 'let dynamicStyle = (props) => css`color: ${props.color}`\\n' + 'It can be called directly with props or interpolated in a styled call like this\\n' + \"let SomeComponent = styled('div')`${dynamicStyle}`\");\n        }\n\n        break;\n      }\n\n    case 'string':\n      if (process.env.NODE_ENV !== 'production') {\n        var matched = [];\n        var replaced = interpolation.replace(animationRegex, function (match, p1, p2) {\n          var fakeVarName = \"animation\" + matched.length;\n          matched.push(\"const \" + fakeVarName + \" = keyframes`\" + p2.replace(/^@keyframes animation-\\w+/, '') + \"`\");\n          return \"${\" + fakeVarName + \"}\";\n        });\n\n        if (matched.length) {\n          console.error('`keyframes` output got interpolated into plain string, please wrap it with `css`.\\n\\n' + 'Instead of doing this:\\n\\n' + [].concat(matched, [\"`\" + replaced + \"`\"]).join('\\n') + '\\n\\nYou should wrap it with `css` like this:\\n\\n' + (\"css`\" + replaced + \"`\"));\n        }\n      }\n\n      break;\n  } // finalize string values (regular strings and functions interpolated into css calls)\n\n\n  if (registered == null) {\n    return interpolation;\n  }\n\n  var cached = registered[interpolation];\n  return cached !== undefined ? cached : interpolation;\n}\n\nfunction createStringFromObject(mergedProps, registered, obj) {\n  var string = '';\n\n  if (Array.isArray(obj)) {\n    for (var i = 0; i < obj.length; i++) {\n      string += handleInterpolation(mergedProps, registered, obj[i]) + \";\";\n    }\n  } else {\n    for (var _key in obj) {\n      var value = obj[_key];\n\n      if (typeof value !== 'object') {\n        if (registered != null && registered[value] !== undefined) {\n          string += _key + \"{\" + registered[value] + \"}\";\n        } else if (isProcessableValue(value)) {\n          string += processStyleName(_key) + \":\" + processStyleValue(_key, value) + \";\";\n        }\n      } else {\n        if (_key === 'NO_COMPONENT_SELECTOR' && process.env.NODE_ENV !== 'production') {\n          throw new Error(noComponentSelectorMessage);\n        }\n\n        if (Array.isArray(value) && typeof value[0] === 'string' && (registered == null || registered[value[0]] === undefined)) {\n          for (var _i = 0; _i < value.length; _i++) {\n            if (isProcessableValue(value[_i])) {\n              string += processStyleName(_key) + \":\" + processStyleValue(_key, value[_i]) + \";\";\n            }\n          }\n        } else {\n          var interpolated = handleInterpolation(mergedProps, registered, value);\n\n          switch (_key) {\n            case 'animation':\n            case 'animationName':\n              {\n                string += processStyleName(_key) + \":\" + interpolated + \";\";\n                break;\n              }\n\n            default:\n              {\n                if (process.env.NODE_ENV !== 'production' && _key === 'undefined') {\n                  console.error(UNDEFINED_AS_OBJECT_KEY_ERROR);\n                }\n\n                string += _key + \"{\" + interpolated + \"}\";\n              }\n          }\n        }\n      }\n    }\n  }\n\n  return string;\n}\n\nvar labelPattern = /label:\\s*([^\\s;\\n{]+)\\s*(;|$)/g;\nvar sourceMapPattern;\n\nif (process.env.NODE_ENV !== 'production') {\n  sourceMapPattern = /\\/\\*#\\ssourceMappingURL=data:application\\/json;\\S+\\s+\\*\\//g;\n} // this is the cursor for keyframes\n// keyframes are stored on the SerializedStyles object as a linked list\n\n\nvar cursor;\nvar serializeStyles = function serializeStyles(args, registered, mergedProps) {\n  if (args.length === 1 && typeof args[0] === 'object' && args[0] !== null && args[0].styles !== undefined) {\n    return args[0];\n  }\n\n  var stringMode = true;\n  var styles = '';\n  cursor = undefined;\n  var strings = args[0];\n\n  if (strings == null || strings.raw === undefined) {\n    stringMode = false;\n    styles += handleInterpolation(mergedProps, registered, strings);\n  } else {\n    if (process.env.NODE_ENV !== 'production' && strings[0] === undefined) {\n      console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n    }\n\n    styles += strings[0];\n  } // we start at 1 since we've already handled the first arg\n\n\n  for (var i = 1; i < args.length; i++) {\n    styles += handleInterpolation(mergedProps, registered, args[i]);\n\n    if (stringMode) {\n      if (process.env.NODE_ENV !== 'production' && strings[i] === undefined) {\n        console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n      }\n\n      styles += strings[i];\n    }\n  }\n\n  var sourceMap;\n\n  if (process.env.NODE_ENV !== 'production') {\n    styles = styles.replace(sourceMapPattern, function (match) {\n      sourceMap = match;\n      return '';\n    });\n  } // using a global regex with .exec is stateful so lastIndex has to be reset each time\n\n\n  labelPattern.lastIndex = 0;\n  var identifierName = '';\n  var match; // https://esbench.com/bench/5b809c2cf2949800a0f61fb5\n\n  while ((match = labelPattern.exec(styles)) !== null) {\n    identifierName += '-' + // $FlowFixMe we know it's not null\n    match[1];\n  }\n\n  var name = hashString(styles) + identifierName;\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe SerializedStyles type doesn't have toString property (and we don't want to add it)\n    return {\n      name: name,\n      styles: styles,\n      map: sourceMap,\n      next: cursor,\n      toString: function toString() {\n        return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";\n      }\n    };\n  }\n\n  return {\n    name: name,\n    styles: styles,\n    next: cursor\n  };\n};\n\nexport { serializeStyles };\n","var isBrowser = \"object\" !== 'undefined';\nfunction getRegisteredStyles(registered, registeredStyles, classNames) {\n  var rawClassName = '';\n  classNames.split(' ').forEach(function (className) {\n    if (registered[className] !== undefined) {\n      registeredStyles.push(registered[className] + \";\");\n    } else {\n      rawClassName += className + \" \";\n    }\n  });\n  return rawClassName;\n}\nvar registerStyles = function registerStyles(cache, serialized, isStringTag) {\n  var className = cache.key + \"-\" + serialized.name;\n\n  if ( // we only need to add the styles to the registered cache if the\n  // class name could be used further down\n  // the tree but if it's a string tag, we know it won't\n  // so we don't have to add it to registered cache.\n  // this improves memory usage since we can avoid storing the whole style string\n  (isStringTag === false || // we need to always store it if we're in compat mode and\n  // in node since emotion-server relies on whether a style is in\n  // the registered cache to know whether a style is global or not\n  // also, note that this check will be dead code eliminated in the browser\n  isBrowser === false ) && cache.registered[className] === undefined) {\n    cache.registered[className] = serialized.styles;\n  }\n};\nvar insertStyles = function insertStyles(cache, serialized, isStringTag) {\n  registerStyles(cache, serialized, isStringTag);\n  var className = cache.key + \"-\" + serialized.name;\n\n  if (cache.inserted[serialized.name] === undefined) {\n    var current = serialized;\n\n    do {\n      cache.insert(serialized === current ? \".\" + className : '', current, cache.sheet, true);\n\n      current = current.next;\n    } while (current !== undefined);\n  }\n};\n\nexport { getRegisteredStyles, insertStyles, registerStyles };\n","import createCache from '@emotion/cache';\nimport { serializeStyles } from '@emotion/serialize';\nimport { getRegisteredStyles, insertStyles } from '@emotion/utils';\n\nfunction insertWithoutScoping(cache, serialized) {\n  if (cache.inserted[serialized.name] === undefined) {\n    return cache.insert('', serialized, cache.sheet, true);\n  }\n}\n\nfunction merge(registered, css, className) {\n  var registeredStyles = [];\n  var rawClassName = getRegisteredStyles(registered, registeredStyles, className);\n\n  if (registeredStyles.length < 2) {\n    return className;\n  }\n\n  return rawClassName + css(registeredStyles);\n}\n\nvar createEmotion = function createEmotion(options) {\n  var cache = createCache(options); // $FlowFixMe\n\n  cache.sheet.speedy = function (value) {\n    if (process.env.NODE_ENV !== 'production' && this.ctr !== 0) {\n      throw new Error('speedy must be changed before any rules are inserted');\n    }\n\n    this.isSpeedy = value;\n  };\n\n  cache.compat = true;\n\n  var css = function css() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var serialized = serializeStyles(args, cache.registered, undefined);\n    insertStyles(cache, serialized, false);\n    return cache.key + \"-\" + serialized.name;\n  };\n\n  var keyframes = function keyframes() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    var serialized = serializeStyles(args, cache.registered);\n    var animation = \"animation-\" + serialized.name;\n    insertWithoutScoping(cache, {\n      name: serialized.name,\n      styles: \"@keyframes \" + animation + \"{\" + serialized.styles + \"}\"\n    });\n    return animation;\n  };\n\n  var injectGlobal = function injectGlobal() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    var serialized = serializeStyles(args, cache.registered);\n    insertWithoutScoping(cache, serialized);\n  };\n\n  var cx = function cx() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    return merge(cache.registered, css, classnames(args));\n  };\n\n  return {\n    css: css,\n    cx: cx,\n    injectGlobal: injectGlobal,\n    keyframes: keyframes,\n    hydrate: function hydrate(ids) {\n      ids.forEach(function (key) {\n        cache.inserted[key] = true;\n      });\n    },\n    flush: function flush() {\n      cache.registered = {};\n      cache.inserted = {};\n      cache.sheet.flush();\n    },\n    // $FlowFixMe\n    sheet: cache.sheet,\n    cache: cache,\n    getRegisteredStyles: getRegisteredStyles.bind(null, cache.registered),\n    merge: merge.bind(null, cache.registered, css)\n  };\n};\n\nvar classnames = function classnames(args) {\n  var cls = '';\n\n  for (var i = 0; i < args.length; i++) {\n    var arg = args[i];\n    if (arg == null) continue;\n    var toAdd = void 0;\n\n    switch (typeof arg) {\n      case 'boolean':\n        break;\n\n      case 'object':\n        {\n          if (Array.isArray(arg)) {\n            toAdd = classnames(arg);\n          } else {\n            toAdd = '';\n\n            for (var k in arg) {\n              if (arg[k] && k) {\n                toAdd && (toAdd += ' ');\n                toAdd += k;\n              }\n            }\n          }\n\n          break;\n        }\n\n      default:\n        {\n          toAdd = arg;\n        }\n    }\n\n    if (toAdd) {\n      cls && (cls += ' ');\n      cls += toAdd;\n    }\n  }\n\n  return cls;\n};\n\nexport { createEmotion as default };\n","import createEmotion from '../create-instance/dist/emotion-css-create-instance.esm.js';\nimport '@emotion/cache';\nimport '@emotion/serialize';\nimport '@emotion/utils';\n\nvar _createEmotion = createEmotion({\n  key: 'css'\n}),\n    flush = _createEmotion.flush,\n    hydrate = _createEmotion.hydrate,\n    cx = _createEmotion.cx,\n    merge = _createEmotion.merge,\n    getRegisteredStyles = _createEmotion.getRegisteredStyles,\n    injectGlobal = _createEmotion.injectGlobal,\n    keyframes = _createEmotion.keyframes,\n    css = _createEmotion.css,\n    sheet = _createEmotion.sheet,\n    cache = _createEmotion.cache;\n\nexport { cache, css, cx, flush, getRegisteredStyles, hydrate, injectGlobal, keyframes, merge, sheet };\n","import React, { Ref, PropsWithChildren } from \"react\";\nimport { cx, css } from \"@emotion/css\";\n\ninterface BaseProps {\n  className: string;\n  [key: string]: unknown;\n}\n\nexport const Button = React.forwardRef(\n  (\n    {\n      className,\n      active,\n      reversed,\n      ...props\n    }: PropsWithChildren<\n      {\n        active: boolean;\n        reversed: boolean;\n      } & BaseProps\n    >,\n    ref: Ref<HTMLSpanElement>\n  ) => (\n    <span\n      {...props}\n      ref={ref}\n      className={cx(\n        className,\n        css`\n          cursor: pointer;\n          color: ${reversed\n            ? active\n              ? \"white\"\n              : \"#aaa\"\n            : active\n            ? \"black\"\n            : \"#ccc\"};\n        `\n      )}\n    />\n  )\n);\n\nexport const Icon = React.forwardRef(\n  (\n    { className, ...props }: PropsWithChildren<BaseProps>,\n    ref: Ref<HTMLSpanElement>\n  ) => (\n    <span\n      {...props}\n      ref={ref}\n      className={cx(\n        \"material-icons\",\n        className,\n        css`\n          font-size: 18px;\n          vertical-align: text-bottom;\n        `\n      )}\n    />\n  )\n);\n\nexport const Menu = React.forwardRef(\n  (\n    { className, ...props }: PropsWithChildren<BaseProps>,\n    ref: Ref<HTMLDivElement>\n  ) => (\n    <div\n      {...props}\n      data-test-id=\"menu\"\n      ref={ref}\n      className={cx(\n        className,\n        css`\n          & > * {\n            display: inline-block;\n          }\n\n          & > * + * {\n            margin-left: 15px;\n          }\n        `\n      )}\n    />\n  )\n);\n\nexport const Toolbar = React.forwardRef(\n  (\n    { className, ...props }: PropsWithChildren<BaseProps>,\n    ref: Ref<HTMLDivElement>\n  ) => (\n    <Menu\n      {...props}\n      ref={ref}\n      className={cx(\n        className,\n        css`\n          position: relative;\n          padding: 1px 18px 17px;\n          margin: 0 -20px;\n          border-bottom: 2px solid #eee;\n          margin-bottom: 20px;\n        `\n      )}\n    />\n  )\n);\n","import { BaseEditor, Editor, Element } from \"slate\";\n\nexport const isBlockActive = (\n  editor: BaseEditor,\n  format: any,\n  blockType = \"type\"\n) => {\n  const { selection } = editor;\n  if (!selection) return false;\n\n  const [match] = Array.from(\n    Editor.nodes(editor, {\n      at: Editor.unhangRange(editor, selection),\n      match: (n) =>\n        !Editor.isEditor(n) &&\n        Element.isElement(n) &&\n        // @ts-ignore\n        n[blockType] === format,\n    })\n  );\n\n  return !!match;\n};\n","import { Editor, Path } from \"slate\";\nimport { TableElement } from \"../table-types\";\n\nexport function getSelectedTablePath(editor: Editor): Path | null {\n  const selection = editor.selection;\n\n  if (!selection) {\n    return null;\n  }\n\n  // copy from https://docs.slatejs.org/concepts/03-locations#path\n  const range = Editor.unhangRange(editor, selection, { voids: true });\n\n  // @ts-ignore\n  const [tableAbove, path] =\n    Editor.above<TableElement>(editor, {\n      at: range,\n      // @ts-ignore\n      match: (n) => n.type === \"table\",\n    }) ?? [];\n\n  if (!tableAbove || !path) {\n    // when the selection crosses root elements\n    return null;\n  }\n\n  return [path[0]!];\n}\n","import { Editor, NodeEntry } from \"slate\";\nimport { TableElement } from \"../table-types\";\n\n// Assumption: no nested table\nexport const getTableInfo = (editor: Editor, tableIdx: number) => {\n  const [tableNode] = Editor.node(editor, [\n    tableIdx,\n  ]) as NodeEntry<TableElement>;\n\n  if (\n    !tableNode ||\n    // @ts-ignore\n    tableNode.type !== \"table\"\n  ) {\n    return null;\n  }\n\n  // @ts-ignore\n  const numberOfRows = tableNode.children.length;\n  // @ts-ignore\n  const numberOfCols = tableNode.children[0].children.length;\n\n  return { tableNode, numberOfRows, numberOfCols };\n};\n","export const MinCellWidth = 50;\nexport const MinCellHeight = 30;\n\nexport const DefaultCellWidth = MinCellWidth + 100;\nexport const DefaultCellHeight = MinCellHeight + 29.5;\n","import { DefaultCellWidth, DefaultCellHeight } from \"../table-constants\";\nimport { CellElement, RowElement, TableElement } from \"../table-types\";\n\ntype InitTableProps = {\n  rows?: number;\n  cols?: number;\n};\n\nexport const initTable = ({\n  rows = 3,\n  cols = 3,\n}: InitTableProps): TableElement => {\n  const table = {\n    type: \"table\" as const,\n    settings: {\n      colSizes: Array.from({ length: cols }, () => DefaultCellWidth),\n      rowSizes: Array.from({ length: rows }, () => DefaultCellHeight),\n    },\n    children: [] as RowElement[],\n  };\n\n  for (let rowIdx = 0; rowIdx < rows; rowIdx++) {\n    // @ts-ignore\n    table.children.push(initRow(cols));\n  }\n\n  return table;\n};\n\nexport const initRow = (cols: number): RowElement => {\n  const row = {\n    type: \"table-row\" as const,\n    children: [],\n  };\n\n  for (let colIdx = 0; colIdx < cols; colIdx++) {\n    // @ts-ignore\n    row.children.push(initCell());\n  }\n\n  return row;\n};\n\nexport const initCell = (): CellElement => {\n  const cell = {\n    type: \"table-cell\" as const,\n    rowSpan: 1,\n    colSpan: 1,\n    children: [\n      {\n        // @ts-ignore\n        type: \"paragraph\",\n        children: [{ text: \"\" }],\n      },\n    ],\n  };\n\n  return cell;\n};\n","import { TableElement } from \"../table-types\";\n\nexport const getSpannedRowIndexesOfCol = (\n  tableNode: TableElement,\n  insertAt: number\n) => {\n  const colSpannedAt = new Set<number>();\n  const numberOfRows = tableNode.children.length;\n\n  for (let rowIdx = 0; rowIdx < numberOfRows; rowIdx++) {\n    const checkCell = tableNode.children[rowIdx]?.children[insertAt]!;\n\n    if (!checkCell) {\n      // malformed table\n      console.error(\"checkCell not found\", tableNode, [rowIdx, insertAt]);\n      continue;\n    }\n\n    if (checkCell.rowSpan === 0) {\n      colSpannedAt.add(rowIdx);\n    } else {\n      // skip rowSpanned cells\n      rowIdx += checkCell.rowSpan - 1;\n    }\n  }\n  return colSpannedAt;\n};\n","import { TableElement } from \"../table-types\";\n\n// span root must be the top-left cell of the spanned area\nexport const findSpanRootLocation = (\n  tableNode: TableElement,\n  currentLocation: [number, number]\n): [number, number] | null => {\n  if (currentLocation.length !== 2) {\n    // malformed target\n    console.error(\"currentLocation is malformed\", currentLocation);\n\n    return null;\n  }\n\n  const cell =\n    tableNode.children[currentLocation[0]]?.children[currentLocation[1]];\n\n  if (!cell) {\n    return null;\n  }\n\n  if (cell.rowSpan > 0 && cell.colSpan > 0) {\n    return currentLocation;\n  }\n\n  if (cell.rowSpan > 0 || cell.colSpan > 0) {\n    // malformed, should not happen\n    console.error(\"cell is spanned but not a root cell\", cell);\n\n    return null;\n  }\n\n  // the rowSpan and colSpan are both 0 here\n  // root of spanned cell must be the top-left cell of the spanned area\n  // so traversing the table of the left-up part of the table from the current cell\n  for (let row = currentLocation[0]; row >= 0; row--) {\n    for (let col = currentLocation[1]; col >= 0; col--) {\n      const checkCell = tableNode.children[row]?.children[col];\n\n      if (!checkCell) {\n        // malformed, should not happen\n        console.error(\"cell is not found\", tableNode, currentLocation);\n\n        return null;\n      }\n\n      if (\n        checkCell.rowSpan > 0 &&\n        checkCell.colSpan > 0 &&\n        row + checkCell.rowSpan > currentLocation[0] &&\n        col + checkCell.colSpan > currentLocation[1]\n      ) {\n        return [row, col];\n      }\n    }\n  }\n\n  return null;\n};\n","import { Editor, Transforms } from \"slate\";\nimport { getTableInfo } from \"../getTableInfo\";\nimport { getSpannedRowIndexesOfCol } from \"../getSpannedRowIndexesOfCol\";\nimport { CellElement, TableElement } from \"../../table-types\";\nimport { findSpanRootLocation } from \"../findSpanRootLocation\";\n\nexport const deleteCol = (editor: Editor, target: [number, number]) => {\n  if (target.length !== 2) {\n    // malformed target\n    return;\n  }\n\n  const [tableIdx, deleteAt] = target;\n  const tableInfo = getTableInfo(editor, tableIdx);\n\n  if (!tableInfo) {\n    // target is not inside a table\n    return;\n  }\n\n  const { tableNode, numberOfRows, numberOfCols } = tableInfo;\n\n  if (deleteAt < 0 || deleteAt >= numberOfCols) {\n    // out of range\n    return;\n  }\n\n  if (tableInfo.numberOfCols === 1) {\n    // cannot delete the last col\n    return;\n  }\n\n  // decrement colSpan of cells that span over the deleted col\n  const colSpannedAt = getSpannedRowIndexesOfCol(tableNode, deleteAt);\n\n  for (let rowIdx = 0; rowIdx < numberOfRows; rowIdx++) {\n    breakCondition: if (colSpannedAt.has(rowIdx)) {\n      const spanRootAt = findSpanRootLocation(tableNode, [rowIdx, deleteAt]);\n\n      if (!spanRootAt) {\n        // malformed table\n        break breakCondition;\n      }\n\n      const [, colSpannedFrom] = spanRootAt;\n      const colSpanCell = tableNode.children[rowIdx]?.children[colSpannedFrom];\n\n      if (!colSpanCell) {\n        // malformed table\n        console.error(\"colSpanCell not found\", tableNode, [\n          rowIdx,\n          colSpannedFrom,\n        ]);\n\n        break breakCondition;\n      }\n\n      if (colSpanCell.colSpan === 0) {\n        // border cell\n        break breakCondition;\n      }\n\n      if (colSpannedFrom + colSpanCell.colSpan > deleteAt) {\n        // decrement the colSpanned cell\n        Transforms.setNodes<CellElement>(\n          editor,\n          {\n            colSpan: colSpanCell.colSpan - 1,\n          },\n          {\n            at: [tableIdx, rowIdx, colSpannedFrom],\n          }\n        );\n      }\n    } else {\n      // not a spanned cell, but may be a span root cell\n      const spanRoot = tableNode.children[rowIdx]?.children[deleteAt];\n\n      // move span root cells to the next col and decrement colSpan\n      if (spanRoot && spanRoot.colSpan > 1) {\n        // span root cell\n        // move the content of the span root cell to the next col when deleting it\n        Transforms.moveNodes(editor, {\n          at: [tableIdx, rowIdx, deleteAt],\n          to: [tableIdx, rowIdx, deleteAt + 1],\n        });\n\n        // set span root cells to the next row and decrement rowSpan\n        Transforms.setNodes<CellElement>(\n          editor,\n          {\n            rowSpan: spanRoot.rowSpan,\n            colSpan: spanRoot.colSpan - 1,\n          },\n          {\n            at: [tableIdx, rowIdx, deleteAt + 1],\n          }\n        );\n      }\n    }\n\n    Transforms.removeNodes(editor, { at: [tableIdx, rowIdx, deleteAt] });\n  }\n\n  Transforms.setNodes<TableElement>(\n    editor,\n    {\n      settings: {\n        colSizes: [\n          ...tableNode.settings.colSizes.slice(0, deleteAt),\n          ...tableNode.settings.colSizes.slice(deleteAt + 1),\n        ],\n        rowSizes: tableNode.settings.rowSizes,\n      },\n    },\n    { at: [tableIdx] }\n  );\n};\n","import { TableElement } from \"../table-types\";\n\nexport const getSpannedColIndexesOfRow = (\n  tableNode: TableElement,\n  rowIdx: number\n) => {\n  const rowSpannedAt = new Set<number>();\n  const numberOfCols = tableNode.children[rowIdx]?.children.length;\n\n  if (!numberOfCols) {\n    // malformed table\n    console.error(\"malformed table\", tableNode, rowIdx);\n\n    return rowSpannedAt;\n  }\n\n  for (let colIdx = 0; colIdx < numberOfCols; colIdx++) {\n    // @ts-ignore\n    const checkCell = tableNode.children[rowIdx].children[colIdx]!;\n\n    if (checkCell.colSpan === 0) {\n      rowSpannedAt.add(colIdx);\n    } else {\n      // skip colSpanned cells\n      colIdx += checkCell.colSpan - 1;\n    }\n  }\n\n  return rowSpannedAt;\n};\n","import { Editor, Transforms } from \"slate\";\nimport { getTableInfo } from \"../getTableInfo\";\nimport { getSpannedColIndexesOfRow } from \"../getSpannedColIndexesOfRow\";\nimport { findSpanRootLocation } from \"../findSpanRootLocation\";\nimport { CellElement, TableElement } from \"../../table-types\";\n\nexport const deleteRow = (editor: Editor, target: [number, number]) => {\n  if (target.length !== 2) {\n    // malformed target\n    return;\n  }\n\n  const [tableIdx, deleteAt] = target;\n  const tableInfo = getTableInfo(editor, tableIdx);\n\n  if (!tableInfo) {\n    // target is not inside a table\n    return;\n  }\n\n  const { tableNode, numberOfRows, numberOfCols } = tableInfo;\n\n  if (deleteAt < 0 || deleteAt >= numberOfRows) {\n    // out of range\n    return;\n  }\n\n  if (numberOfRows === 1) {\n    // cannot delete the last row\n    return;\n  }\n\n  // decrement rowSpan of cells that span over the deleted row\n  const rowSpannedAt = getSpannedColIndexesOfRow(tableNode, deleteAt);\n\n  for (let colIdx = 0; colIdx < numberOfCols; colIdx++) {\n    if (!rowSpannedAt.has(colIdx)) {\n      // not a spanned cell, but may be a span root cell\n      const spanRoot = tableNode.children[deleteAt]?.children[colIdx];\n\n      if (spanRoot && spanRoot.rowSpan > 1) {\n        // span root cell\n\n        // move the content of the span root cell to the next row when deleting it\n        Transforms.moveNodes(editor, {\n          at: [tableIdx, deleteAt, colIdx],\n          to: [tableIdx, deleteAt + 1, colIdx],\n        });\n\n        // exchange the spanned cell below to the span root cell\n        Transforms.moveNodes(editor, {\n          at: [tableIdx, deleteAt + 1, colIdx + 1],\n          to: [tableIdx, deleteAt, colIdx],\n        });\n\n        // set span root cells to the next row and decrement rowSpan\n        Transforms.setNodes<CellElement>(\n          editor,\n          {\n            rowSpan: spanRoot.rowSpan - 1,\n            colSpan: spanRoot.colSpan,\n          },\n          {\n            at: [tableIdx, deleteAt + 1, colIdx],\n          }\n        );\n      }\n\n      continue;\n    }\n\n    const spanRootAt = findSpanRootLocation(tableNode, [deleteAt, colIdx]);\n\n    if (!spanRootAt) {\n      // malformed table\n      continue;\n    }\n\n    const [rowSpannedFrom] = spanRootAt;\n    const rowSpanCell = tableNode.children[rowSpannedFrom]?.children[colIdx];\n\n    if (!rowSpanCell) {\n      // malformed table\n      console.error(\"rowSpanCell not found\", tableNode, [\n        rowSpannedFrom,\n        colIdx,\n      ]);\n      continue;\n    }\n\n    if (rowSpannedFrom + rowSpanCell.rowSpan > deleteAt) {\n      // decrement the rowSpanned cell\n      Transforms.setNodes<CellElement>(\n        editor,\n        {\n          rowSpan: rowSpanCell.rowSpan - 1,\n        },\n        {\n          at: [tableIdx, rowSpannedFrom, colIdx],\n        }\n      );\n    }\n  }\n\n  Transforms.setNodes<TableElement>(\n    editor,\n    {\n      settings: {\n        colSizes: tableNode.settings.colSizes,\n        rowSizes: [\n          ...tableNode.settings.rowSizes.slice(0, deleteAt),\n          ...tableNode.settings.rowSizes.slice(deleteAt + 1),\n        ],\n      },\n    },\n    { at: [tableIdx] }\n  );\n  Transforms.removeNodes(editor, { at: target });\n};\n","import { Editor, Transforms } from \"slate\";\nimport { initCell } from \"../initTableElements\";\nimport { getTableInfo } from \"../getTableInfo\";\nimport { CellElement, TableElement } from \"../../table-types\";\nimport { findSpanRootLocation } from \"../findSpanRootLocation\";\nimport { getSpannedRowIndexesOfCol } from \"../getSpannedRowIndexesOfCol\";\nimport { DefaultCellWidth } from \"../../table-constants\";\n\n// target should in the form of [tableIdxAtRoot, colIdx]\nexport const insertCol = (editor: Editor, target: [number, number]) => {\n  if (target.length !== 2) {\n    // malformed target\n    return;\n  }\n\n  const [tableIdx, insertAt] = target;\n  const tableInfo = getTableInfo(editor, tableIdx);\n\n  if (!tableInfo) {\n    // target is not inside a table\n    return;\n  }\n\n  const { tableNode, numberOfRows, numberOfCols } = tableInfo;\n\n  if (insertAt < 0 || insertAt > numberOfCols) {\n    // out of range\n    return;\n  }\n\n  const colSpannedAt = getSpannedRowIndexesOfCol(tableNode, insertAt);\n\n  for (let rowIdx = 0; rowIdx < numberOfRows; rowIdx++) {\n    const newCell = initCell();\n\n    breakCondition: if (colSpannedAt.has(rowIdx)) {\n      newCell.rowSpan = 0;\n      newCell.colSpan = 0;\n\n      // extend the colSpanned cell\n      const spanRootAt = findSpanRootLocation(tableNode, [rowIdx, insertAt]);\n\n      if (!spanRootAt) {\n        // malformed table\n        break breakCondition;\n      }\n\n      const [, colSpannedFrom] = spanRootAt;\n      const colSpanCell = tableNode.children[rowIdx]?.children[colSpannedFrom];\n\n      if (!colSpanCell) {\n        // malformed table\n        console.error(\"colSpanCell not found\", tableNode, [\n          rowIdx,\n          colSpannedFrom,\n        ]);\n\n        break breakCondition;\n      }\n\n      if (colSpanCell.colSpan === 0) {\n        // border cell\n        break breakCondition;\n      }\n\n      if (colSpannedFrom + colSpanCell.colSpan - 1 >= insertAt) {\n        // extend the colSpanned cell\n        Transforms.setNodes<CellElement>(\n          editor,\n          {\n            colSpan: colSpanCell.colSpan + 1,\n          },\n          {\n            at: [tableIdx, rowIdx, colSpannedFrom],\n          }\n        );\n      }\n    }\n\n    Transforms.insertNodes(editor, newCell, {\n      at: [tableIdx, rowIdx, insertAt],\n    });\n  }\n\n  Transforms.setNodes<TableElement>(\n    editor,\n    {\n      settings: {\n        colSizes: [\n          ...tableNode.settings.colSizes.slice(0, insertAt),\n          DefaultCellWidth,\n          ...tableNode.settings.colSizes.slice(insertAt),\n        ],\n        rowSizes: tableNode.settings.rowSizes,\n      },\n    },\n    { at: [tableIdx] }\n  );\n};\n","import { Editor, Transforms } from \"slate\";\nimport { CellElement, TableElement } from \"../../table-types\";\nimport { initRow } from \"../initTableElements\";\nimport { getTableInfo } from \"../getTableInfo\";\nimport { findSpanRootLocation } from \"../findSpanRootLocation\";\nimport { getSpannedColIndexesOfRow } from \"../getSpannedColIndexesOfRow\";\n\n// target should in the form of [tableIdxAtRoot, rowIdx]\nexport const insertRow = (editor: Editor, target: [number, number]) => {\n  if (target.length !== 2) {\n    // malformed target\n    return;\n  }\n\n  const [tableIdx, insertAt] = target;\n  const tableInfo = getTableInfo(editor, tableIdx);\n\n  if (!tableInfo) {\n    // target is not inside a table\n    return;\n  }\n\n  const { tableNode, numberOfRows, numberOfCols } = tableInfo;\n\n  if (insertAt < 0 || insertAt > numberOfRows) {\n    // out of range\n    return;\n  }\n\n  const rowSpannedAt = getSpannedColIndexesOfRow(tableNode, insertAt);\n\n  const newRow = initRow(numberOfCols);\n\n  for (let colIdx = 0; colIdx < numberOfCols; colIdx++) {\n    // existence is ensured by initRow\n    const newCell = newRow.children[colIdx] as CellElement;\n\n    if (!rowSpannedAt.has(colIdx)) {\n      continue;\n    }\n\n    newCell.rowSpan = 0;\n    newCell.colSpan = 0;\n\n    // find the root span cell if it is in the same column\n    const spanRootAt = findSpanRootLocation(tableNode, [insertAt, colIdx]);\n\n    if (!spanRootAt) {\n      // malformed table\n      continue;\n    }\n\n    const [rowSpannedFrom] = spanRootAt;\n    const rowSpanCell = tableNode.children[rowSpannedFrom]!.children[colIdx]!;\n\n    if (rowSpanCell.rowSpan === 0) {\n      continue;\n    }\n\n    if (rowSpannedFrom + rowSpanCell.rowSpan - 1 >= insertAt) {\n      // extend the rowSpanned cell\n      Transforms.setNodes<CellElement>(\n        editor,\n        {\n          rowSpan: rowSpanCell.rowSpan + 1,\n        },\n        {\n          at: [tableIdx, rowSpannedFrom, colIdx],\n        }\n      );\n    }\n  }\n\n  Transforms.setNodes<TableElement>(\n    editor,\n    {\n      settings: {\n        colSizes: tableNode.settings.colSizes,\n        rowSizes: [\n          ...tableNode.settings.rowSizes.slice(0, insertAt),\n          0,\n          ...tableNode.settings.rowSizes.slice(insertAt),\n        ],\n      },\n    },\n    { at: [tableIdx] }\n  );\n  Transforms.insertNodes(editor, newRow, { at: target });\n};\n","import { Editor, Transforms } from \"slate\";\nimport { isBlockActive } from \"../../common-utils\";\nimport { initTable } from \"../initTableElements\";\n\nexport const insertTable = (editor: Editor) => {\n  const isActive = isBlockActive(editor, \"table\");\n\n  if (isActive) {\n    return;\n  }\n\n  const table = initTable({ rows: 3, cols: 3 });\n  Transforms.insertNodes(editor, table);\n};\n","import { Editor, Node, NodeEntry, Transforms } from \"slate\";\nimport { CellElement, CellsRange } from \"../../table-types\";\nimport { getTableInfo } from \"../getTableInfo\";\nimport { initCell } from \"../initTableElements\";\n\nexport const mergeCells = (\n  editor: Editor,\n  tableIdx: number,\n  selectedRange: CellsRange | null\n) => {\n  if (!Number.isInteger(tableIdx) || !selectedRange) {\n    // no selection\n    return;\n  }\n\n  const tableInfo = getTableInfo(editor, tableIdx);\n\n  if (!tableInfo) {\n    // target is not inside a table\n    return;\n  }\n\n  const [[startRow, startCol], [endRow, endCol]] = selectedRange;\n\n  if (startRow === endRow && startCol === endCol) {\n    // no cell selected\n    return;\n  }\n\n  // merge cells\n\n  // Operations need to batched to avoid normalization in the middle of the operation\n  Editor.withoutNormalizing(editor, () => {\n    for (let rowIdx = startRow; rowIdx <= endRow; rowIdx++) {\n      for (let colIdx = startCol; colIdx <= endCol; colIdx++) {\n        if (rowIdx === startRow && colIdx === startCol) {\n          Transforms.setNodes<CellElement>(\n            editor,\n            {\n              rowSpan: endRow - startRow + 1,\n              colSpan: endCol - startCol + 1,\n            },\n            {\n              at: [tableIdx, rowIdx, colIdx],\n            }\n          );\n\n          // skip the first cell\n          continue;\n        }\n\n        // remove the children content of the merged cells\n        Transforms.removeNodes(editor, {\n          at: [tableIdx, rowIdx, colIdx],\n        });\n\n        Transforms.insertNodes<CellElement>(\n          editor,\n          {\n            ...initCell(),\n            rowSpan: 0,\n            colSpan: 0,\n          } as NodeEntry<CellElement>[0],\n          {\n            at: [tableIdx, rowIdx, colIdx],\n          }\n        );\n      }\n    }\n\n    // select the root of the merged cells, last \"0, 0\" is for focusing to the first text node of the first element in the cell\n    // FIXME: not work as expected\n    console.info(\n      \"expect the selection to be focused on the first cell after merge, but it becomes a range selection\"\n    );\n\n    Transforms.select(\n      editor,\n      Editor.start(editor, [tableIdx, startRow, startCol, 0, 0])\n    );\n  });\n};\n","import { Editor, Transforms } from \"slate\";\nimport { getTableInfo } from \"../getTableInfo\";\nimport { CellElement } from \"../../table-types\";\n\nexport const splitCell = (editor: Editor, target: [number, number, number]) => {\n  const [tableIdx, rowIdx, colIdx] = target;\n  const tableInfo = getTableInfo(editor, tableIdx);\n\n  if (!tableInfo) {\n    // target is not inside a table\n    return;\n  }\n\n  const { tableNode } = tableInfo;\n\n  const targetCell = tableNode.children[rowIdx]?.children[\n    colIdx\n  ] as CellElement;\n\n  if (!targetCell) {\n    // malformed target\n    console.error(\"Invalid target cell\", tableNode, target);\n    return;\n  }\n\n  const { rowSpan, colSpan } = targetCell;\n\n  if (rowSpan <= 1 && colSpan <= 1) {\n    // single cell\n    return;\n  }\n\n  // split the cell\n  for (let i = rowIdx; i < rowIdx + rowSpan; i++) {\n    for (let j = colIdx; j < colIdx + colSpan; j++) {\n      // reset rowSpan and colSpan for all spanned cells\n      Transforms.setNodes<CellElement>(\n        editor,\n        {\n          rowSpan: 1,\n          colSpan: 1,\n        },\n        { at: [tableIdx, i, j] }\n      );\n    }\n  }\n};\n","import { Editor, Element, Point, Range } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\n\nexport const withDeleteTableBackward = (editor: ReactEditor) => {\n  const { deleteBackward } = editor;\n\n  editor.deleteBackward = (unit) => {\n    console.log(\"deleteBackward\");\n    // copy from slate table example\n    const { selection } = editor;\n\n    if (selection && Range.isCollapsed(selection)) {\n      const [cell] = Editor.nodes(editor, {\n        match: (n) =>\n          !Editor.isEditor(n) &&\n          Element.isElement(n) &&\n          // @ts-ignore\n          n.type === \"table-cell\",\n      });\n\n      if (cell) {\n        const [, cellPath] = cell;\n        const start = Editor.start(editor, cellPath);\n\n        if (Point.equals(selection.anchor, start)) {\n          return;\n        }\n      }\n    }\n\n    deleteBackward(unit);\n  };\n\n  return editor;\n};\n\nexport const withDeleteTableForward = (editor: ReactEditor) => {\n  const { deleteForward } = editor;\n\n  editor.deleteForward = (unit) => {\n    console.log(\"deleteForward\");\n    // copy from slate table example\n    const { selection } = editor;\n\n    if (selection && Range.isCollapsed(selection)) {\n      const [cell] = Editor.nodes(editor, {\n        match: (n) =>\n          !Editor.isEditor(n) &&\n          Element.isElement(n) &&\n          // @ts-ignore\n          n.type === \"table-cell\",\n      });\n\n      if (cell) {\n        const [, cellPath] = cell;\n        const end = Editor.end(editor, cellPath);\n\n        if (Point.equals(selection.anchor, end)) {\n          return;\n        }\n      }\n    }\n\n    deleteForward(unit);\n  };\n\n  return editor;\n};\n","import { Editor, Transforms } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\n\nexport const withNormalizeTable = (editor: ReactEditor) => {\n  const { normalizeNode } = editor;\n\n  editor.normalizeNode = (entry) => {\n    // edit from ref: https://github.dev/udecode/plate/blob/main/packages/table/src/withNormalizeTable.ts\n    const [node, path] = entry;\n\n    // @ts-ignore\n    if (node.type === \"table\") {\n      const tableEntry = Editor.above(editor, {\n        at: path,\n        // @ts-ignore\n        match: (node) => node.type === \"table\",\n      });\n\n      if (tableEntry) {\n        // remove table parent of a table\n        Transforms.unwrapNodes(editor, {\n          at: path,\n        });\n        return;\n      }\n\n      // const initialTableWidth = 630; // full width of an element in cms\n      // // @ts-ignore\n      // const tableNode = node;\n      // const colCount = (\n      //       // @ts-ignore\n      //   tableNode.children[0]?.children\n      // )?.length;\n\n      // if (colCount) {\n      //   const colSizes: number[] = [];\n\n      //   if (!tableNode.data.colSizes) {\n      //     for (let i = 0; i < colCount; i++) {\n      //       colSizes.push(initialTableWidth / colCount);\n      //     }\n      //   } else if (tableNode.data.colSizes.some((size) => !size)) {\n      //     tableNode.data.colSizes.forEach((colSize) => {\n      //       colSizes.push(colSize || initialTableWidth / colCount);\n      //     });\n      //   }\n\n      //   if (colSizes.length > 0) {\n      //     Transforms.setNodes(\n      //       editor,\n      //       { data: { ...tableNode.data, colSizes } },\n      //       { at: path }\n      //     );\n      //     return;\n      //   }\n      // }\n    }\n\n    // @ts-ignore\n    if (node.type === \"table-row\") {\n      const parentEntry = Editor.parent(editor, path);\n\n      if (\n        // @ts-ignore\n        parentEntry?.[0].type !== \"table\"\n      ) {\n        // remove non table parent of tr\n        Transforms.unwrapNodes(editor, {\n          at: path,\n        });\n        return;\n      }\n    }\n\n    // @ts-ignore\n    if (node.type === \"table-cell\") {\n      const parentEntry = Editor.parent(editor, path);\n\n      if (\n        // @ts-ignore\n        parentEntry?.[0].type !== \"table-row\"\n      ) {\n        // remove non tr parent of td\n        Transforms.unwrapNodes(editor, {\n          at: path,\n        });\n        return;\n      }\n\n      normalizeNode(entry);\n    }\n  };\n\n  return editor;\n};\n","import { Editor, Path, Range, Transforms } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport { getSelectedTablePath } from \"./getSelectedTablePath\";\n\nexport const withInsertTextInTable = (editor: ReactEditor) => {\n  const { insertText } = editor;\n\n  editor.insertText = (text) => {\n    const { selection } = editor;\n\n    if (!selection) {\n      // should not insert anything when there is no selection\n      return;\n    }\n\n    if (Range.isCollapsed(selection)) {\n      // not range selection\n      // inset text to the focus\n      insertText(text);\n\n      return;\n    }\n\n    const selectedTablePath = getSelectedTablePath(editor);\n\n    if (selectedTablePath !== null) {\n      // selection is inside a table\n\n      // FIXME: the focus is not correct when the selection is backward, but Range.isBackward is always false, the selection looks always forward\n      // plate.js has the same issue\n\n      const anchorCellPath = selection.anchor.path.slice(0, 3);\n      const focusCellPath = selection.focus.path.slice(0, 3);\n      const isOnlyOneCellSelected =\n        anchorCellPath.length === 3 &&\n        focusCellPath.length === 3 &&\n        Path.equals(anchorCellPath, focusCellPath);\n\n      if (isOnlyOneCellSelected) {\n        insertText(text);\n      } else {\n        // selection is inside a table and cross cells\n        // reset the selection to the focus\n        Transforms.select(editor, {\n          anchor: selection.focus,\n          focus: selection.focus,\n        });\n\n        // insert text to the focused cell\n        insertText(text, { at: selection.focus });\n      }\n\n      return;\n    }\n\n    const cellsGenerator = Editor.nodes(editor, {\n      at: selection,\n      match: (n) => {\n        // @ts-ignore\n        return n.type === \"table-cell\";\n      },\n    });\n\n    if (!cellsGenerator.next().done) {\n      // cross table selection with non table elements\n      // TODO: behavior TBD\n      console.info(\n        \"unhandled case: cross table selection with non table elements\"\n      );\n\n      return;\n    }\n\n    // no table in the selection\n    insertText(text);\n\n    return;\n  };\n\n  return editor;\n};\n","import { ReactEditor } from \"slate-react\";\nimport {\n  withDeleteTableBackward,\n  withDeleteTableForward,\n} from \"./withDeleteTable\";\nimport { withNormalizeTable } from \"./withNormalizeTable\";\nimport { withInsertTextInTable } from \"./withInsertTextInTable\";\n\nexport const withTable = (editor: ReactEditor) => {\n  // using their side effect to modify the editor, so don't need nested calls of withXXX\n  [\n    withDeleteTableBackward,\n    withDeleteTableForward,\n    withNormalizeTable,\n    withInsertTextInTable,\n  ].forEach((fn) => fn(editor));\n\n  // FIXME: cross table setNodes does not work\n\n  return editor;\n};\n","import { TableElement } from \"../table-types\";\nimport { findSpanRootLocation } from \"./findSpanRootLocation\";\n\n// corner must be the bottom-right cell of the spanned area\nexport const findSpanCornerLocation = (\n  tableNode: TableElement,\n  currentLocation: [number, number]\n): [number, number] | null => {\n  const spanRootAt = findSpanRootLocation(tableNode, currentLocation);\n\n  if (!spanRootAt) {\n    return null;\n  }\n\n  const spanRoot = tableNode.children[spanRootAt[0]]?.children[spanRootAt[1]];\n\n  if (!spanRoot) {\n    return null;\n  }\n\n  return [\n    spanRootAt[0] + spanRoot.rowSpan - 1,\n    spanRootAt[1] + spanRoot.colSpan - 1,\n  ];\n};\n","import React, {\n  createContext,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { ReactEditor, useSelected, useSlate } from \"slate-react\";\nimport { isBlockActive } from \"./common-utils\";\nimport { Button, Icon } from \"./components\";\nimport {\n  deleteCol,\n  deleteRow,\n  getSelectedTablePath,\n  getTableInfo,\n  insertCol,\n  insertRow,\n  insertTable,\n  mergeCells,\n  splitCell,\n} from \"./table-utils\";\nimport { Path, Range, Transforms } from \"slate\";\n\nimport \"./table.css\";\nimport { CellsRange, ResizeDirection, TableElement } from \"./table-types\";\nimport { findSpanRootLocation } from \"./table-utils/findSpanRootLocation\";\nimport { findSpanCornerLocation } from \"./table-utils/findSpanCornerLocation\";\nimport { MinCellHeight, MinCellWidth } from \"./table-constants\";\n\n// only use this hook in table element, since `isSelected` is false when the selection does not include the current cell\nconst useTableSelection = (element: any) => {\n  const [selectedRange, setSelectedRange] = React.useState<CellsRange | null>(\n    null\n  );\n\n  const editor = useSlate();\n\n  // true when selection crosses the table\n  const isSelected = useSelected();\n  const selection = editor.selection;\n  const isTable = element?.type === \"table\";\n\n  if (!isTable) {\n    return null;\n  }\n\n  useEffect(() => {\n    // FIXME: if the cells are empty, the selection crosses two cells in a row will not be detected\n    if (!isSelected || !selection) {\n      setSelectedRange(null);\n      return;\n    }\n    // True when start and end points of the selection equals\n    // const collapsed = Range.isCollapsed(selection);\n\n    const tableRootPath = getSelectedTablePath(editor);\n\n    // Assumption: no nested table\n    if (tableRootPath === null) {\n      // when the selection is inside a table cell\n      setSelectedRange(null);\n      return;\n    }\n\n    // edges must be forward direction of selection\n    const [startPoint, endPoint] = Range.edges(selection); // equals to `Editor.edges(editor, selection)`\n\n    const currentSelectedRange: CellsRange = [\n      Path.relative(startPoint.path, tableRootPath).slice(\n        0,\n        2\n      ) as CellsRange[number],\n      Path.relative(endPoint.path, tableRootPath).slice(\n        0,\n        2\n      ) as CellsRange[number],\n    ];\n\n    // normalize selection range, ensure the selection is from the top-left corner to the bottom-right corner\n    const normalizedSelectedRange: CellsRange = [\n      [\n        Math.min(currentSelectedRange[0][0], currentSelectedRange[1][0]),\n        Math.min(currentSelectedRange[0][1], currentSelectedRange[1][1]),\n      ],\n      [\n        Math.max(currentSelectedRange[0][0], currentSelectedRange[1][0]),\n        Math.max(currentSelectedRange[0][1], currentSelectedRange[1][1]),\n      ],\n    ];\n\n    if (\n      normalizedSelectedRange[0][0] === normalizedSelectedRange[1][0] &&\n      normalizedSelectedRange[0][1] === normalizedSelectedRange[1][1]\n    ) {\n      // single cell selected\n      setSelectedRange(null);\n      return;\n    }\n\n    // TODO: scan the border, see if any cell is merged and expand the range if necessary\n    const tableInfo = getTableInfo(editor, tableRootPath[0]!);\n\n    if (!tableInfo) {\n      // should not happen\n      return;\n    }\n\n    const { tableNode, numberOfRows, numberOfCols } = tableInfo;\n\n    // expand the range if any cell is merged at the border of the selected range\n    let expansionDetected = false;\n\n    // prevent infinite loop, just in case\n    let breaker = 0;\n\n    // limit the number of iterations, should cover all the cells in the table once\n    let limit =\n      // table size\n      numberOfRows * numberOfCols +\n      // 4 corners are counted twice in each iteration below\n      numberOfRows +\n      numberOfCols;\n\n    do {\n      breaker++;\n      expansionDetected = false;\n      const [[startRow, startCol], [endRow, endCol]] = normalizedSelectedRange;\n\n      // expand vertically\n      for (let row = startRow; row <= endRow; row++) {\n        // extend the selected range with the root location of the spanned cell\n        leftBorder: {\n          const rootLocation = findSpanRootLocation(tableNode, [row, startCol]);\n\n          if (!rootLocation) {\n            // impossible\n            console.error(\"rootLocation not found\", tableNode, [row, startCol]);\n\n            break leftBorder;\n          }\n\n          if (rootLocation[0] === row && rootLocation[1] === startCol) {\n            // not a spanned cell\n\n            break leftBorder;\n          }\n\n          const newLocation: CellsRange[number] = [\n            Math.min(normalizedSelectedRange[0][0], rootLocation[0]),\n            Math.min(normalizedSelectedRange[0][1], rootLocation[1]),\n          ];\n\n          if (\n            newLocation[0] !== normalizedSelectedRange[0][0] ||\n            newLocation[1] !== normalizedSelectedRange[0][1]\n          ) {\n            normalizedSelectedRange[0] = newLocation;\n            expansionDetected = true;\n          }\n        }\n\n        rightBorder: {\n          const cornerLocation = findSpanCornerLocation(tableNode, [\n            row,\n            endCol,\n          ]);\n\n          if (!cornerLocation) {\n            // impossible\n            console.error(\"cornerLocation not found\", tableNode, [row, endCol]);\n\n            break rightBorder;\n          }\n\n          if (cornerLocation[0] === row && cornerLocation[1] === endCol) {\n            // not a spanned cell\n\n            break rightBorder;\n          }\n\n          const newLocation: CellsRange[number] = [\n            Math.max(normalizedSelectedRange[1][0], cornerLocation[0]),\n            Math.max(normalizedSelectedRange[1][1], cornerLocation[1]),\n          ];\n\n          if (\n            newLocation[0] !== normalizedSelectedRange[1][0] ||\n            newLocation[1] !== normalizedSelectedRange[1][1]\n          ) {\n            normalizedSelectedRange[1] = newLocation;\n            expansionDetected = true;\n          }\n        }\n      }\n\n      // expand horizontally\n      for (let col = startCol; col <= endCol; col++) {\n        topBorder: {\n          const rootLocation = findSpanRootLocation(tableNode, [startRow, col]);\n\n          if (!rootLocation) {\n            // impossible\n            console.error(\"rootLocation not found\", tableNode, [startRow, col]);\n\n            break topBorder;\n          }\n\n          if (rootLocation[0] === startRow && rootLocation[1] === col) {\n            // not a spanned cell\n\n            break topBorder;\n          }\n\n          const newLocation: CellsRange[number] = [\n            Math.min(normalizedSelectedRange[0][0], rootLocation[0]),\n            Math.min(normalizedSelectedRange[0][1], rootLocation[1]),\n          ];\n\n          if (\n            newLocation[0] !== normalizedSelectedRange[0][0] ||\n            newLocation[1] !== normalizedSelectedRange[0][1]\n          ) {\n            normalizedSelectedRange[0] = newLocation;\n            expansionDetected = true;\n          }\n        }\n\n        bottomBorder: {\n          const cornerLocation = findSpanCornerLocation(tableNode, [\n            endRow,\n            col,\n          ]);\n\n          if (!cornerLocation) {\n            // impossible\n            console.error(\"cornerLocation not found\", tableNode, [endRow, col]);\n\n            break bottomBorder;\n          }\n\n          if (cornerLocation[0] === endRow && cornerLocation[1] === col) {\n            // not a spanned cell\n\n            break bottomBorder;\n          }\n\n          const newLocation: CellsRange[number] = [\n            Math.max(normalizedSelectedRange[1][0], cornerLocation[0]),\n            Math.max(normalizedSelectedRange[1][1], cornerLocation[1]),\n          ];\n\n          if (\n            newLocation[0] !== normalizedSelectedRange[1][0] ||\n            newLocation[1] !== normalizedSelectedRange[1][1]\n          ) {\n            normalizedSelectedRange[1] = newLocation;\n            expansionDetected = true;\n          }\n        }\n      }\n    } while (expansionDetected && breaker < limit);\n\n    setSelectedRange(normalizedSelectedRange);\n  }, [editor, isSelected, selection]);\n\n  return selectedRange;\n};\n\nconst TableContext = createContext({\n  selectedRange: null as CellsRange | null,\n  settings: {\n    colSizes: [],\n    rowSizes: [],\n  } as TableElement[\"settings\"],\n  resizeInfo: {\n    resizing: false,\n    direction: \"\",\n    idx: -1,\n    start: 0,\n    end: 0,\n    startResize: (\n      idx: number,\n      span: number,\n      direction: \"\" | ResizeDirection,\n      position: number\n    ) => {},\n    updateResize: (position: number) => {},\n    endResize: () => {},\n  },\n});\n\nconst useCellSelection = (range: CellsRange) => {\n  const { selectedRange } = useContext(TableContext);\n\n  if (!selectedRange) {\n    return false;\n  }\n\n  const [[startRow, startCol], [endRow, endCol]] = selectedRange;\n\n  if (\n    // bottom-right corner of range is inside the selected range\n    range[0][0] >= startRow &&\n    range[0][1] >= startCol &&\n    range[0][0] <= endRow &&\n    range[0][1] <= endCol\n  ) {\n    return true;\n  }\n\n  if (\n    // top-left corner of range is inside the selected range\n    range[1][0] >= startRow &&\n    range[1][1] >= startCol &&\n    range[1][0] <= endRow &&\n    range[1][1] <= endCol\n  ) {\n    return true;\n  }\n\n  return false;\n};\n\nconst useResizeHandle = (editor: ReactEditor, element: TableElement) => {\n  const [resizing, setResizing] = useState(false);\n  const [direction, setDirection] = useState<\"\" | ResizeDirection>(\"\");\n  const [idx, setIdx] = useState(-1);\n  const [span, setSpan] = useState(1);\n  const [start, setStart] = useState(0);\n  const [end, setEnd] = useState(0);\n\n  const [tableIdx] = ReactEditor.findPath(editor, element) as [number];\n  const targetIdx = idx + span - 1;\n\n  const startResize = (\n    idx: number,\n    span: number,\n    direction: \"\" | ResizeDirection,\n    position: number\n  ) => {\n    setResizing(true);\n    setDirection(direction);\n    setIdx(idx);\n    setSpan(span);\n    setStart(position);\n    setEnd(position);\n  };\n\n  const updateResize = (position: number) => {\n    let end = position;\n    let invariant: number | null = null;\n    const minSize = direction === \"horizontal\" ? MinCellWidth : MinCellHeight;\n    const sizes =\n      direction === \"horizontal\"\n        ? element.settings.colSizes\n        : element.settings.rowSizes;\n\n    if (direction === \"horizontal\" && sizes[targetIdx + 1] !== undefined) {\n      invariant = sizes[targetIdx]! + sizes[targetIdx + 1]!;\n    }\n\n    const diff = end - start;\n    let newSize = sizes[targetIdx]! + diff;\n\n    if (newSize < minSize) {\n      end = minSize - sizes[targetIdx]! + start;\n    }\n\n    if (invariant !== null) {\n      let newNextSize = sizes[targetIdx + 1]! - diff;\n\n      if (newNextSize < minSize) {\n        end = invariant - minSize - sizes[targetIdx]! + start;\n      }\n    }\n\n    setEnd(end);\n  };\n\n  const endResize = () => {\n    Transforms.setNodes<TableElement>(\n      editor,\n      {\n        settings:\n          direction === \"horizontal\"\n            ? {\n                ...element.settings,\n                colSizes: element.settings.colSizes.map((size, i) => {\n                  if (i === idx + span - 1) {\n                    return size + end - start;\n                  }\n\n                  if (i === idx + span) {\n                    return size - end + start;\n                  }\n\n                  return size;\n                }),\n              }\n            : {\n                ...element.settings,\n                rowSizes: element.settings.rowSizes.map((size, i) => {\n                  if (i === idx + span - 1) {\n                    return size + end - start;\n                  }\n\n                  return size;\n                }),\n              },\n      },\n      { at: [tableIdx] }\n    );\n\n    // reset initial state\n    setResizing(false);\n    setDirection(\"\");\n    setIdx(-1);\n    setSpan(1);\n    setStart(0);\n    setEnd(0);\n  };\n\n  return {\n    resizing,\n    direction,\n    idx: targetIdx,\n    start,\n    end,\n    startResize,\n    updateResize,\n    endResize,\n  };\n};\n\nexport const Table = ({\n  style = {},\n  // @ts-ignore\n  attributes,\n  // @ts-ignore\n  children,\n  // @ts-ignore\n  element,\n}) => {\n  const editor = useSlate() as ReactEditor;\n  const selectedRange = useTableSelection(element);\n  const isSelected = useSelected();\n  const resizeInfo = useResizeHandle(editor, element);\n\n  const focusedPath = editor.selection?.focus.path;\n\n  return (\n    <TableContext.Provider\n      value={{\n        selectedRange,\n        settings: element.settings,\n        resizeInfo,\n      }}\n    >\n      {/* wrapper of table */}\n      <div\n        style={{\n          width: \"100%\",\n        }}\n        onMouseUp={() => {\n          if (resizeInfo.resizing) {\n            resizeInfo.endResize();\n          }\n        }}\n        onMouseMove={(event) => {\n          if (resizeInfo.resizing) {\n            resizeInfo.updateResize(\n              resizeInfo.direction === \"horizontal\"\n                ? event.clientX\n                : event.clientY\n            );\n          }\n        }}\n      >\n        <table\n          style={{\n            ...style,\n            borderCollapse: \"collapse\",\n            tableLayout: \"fixed\",\n          }}\n          className={selectedRange ? \"table-in-selection\" : \"\"}\n          {...attributes}\n        >\n          <colgroup>\n            {(element as TableElement).settings.colSizes.map((colSize, idx) => {\n              let minWidth = colSize;\n\n              if (\n                resizeInfo.resizing &&\n                resizeInfo.direction === \"horizontal\"\n              ) {\n                const diff = resizeInfo.end - resizeInfo.start;\n\n                if (idx === resizeInfo.idx) {\n                  minWidth = minWidth + diff;\n                } else if (idx === resizeInfo.idx + 1) {\n                  minWidth = minWidth - diff;\n                }\n              }\n\n              return (\n                <col\n                  key={idx}\n                  style={{\n                    minWidth: `${minWidth}px`,\n                  }}\n                />\n              );\n            })}\n          </colgroup>\n          <tbody>{children}</tbody>\n        </table>\n      </div>\n      <div contentEditable={false}>\n        <button\n          onClick={() => {\n            const targetPath = focusedPath?.slice(0, 2) ?? [];\n\n            if (targetPath.length !== 2) {\n              return;\n            }\n\n            insertRow(editor, targetPath as [number, number]);\n          }}\n          disabled={!isSelected}\n        >\n          Insert row\n        </button>\n        <button\n          onClick={() => {\n            const targetPath = focusedPath?.slice(0, 3) ?? [];\n\n            if (targetPath.length !== 3) {\n              return;\n            }\n\n            insertCol(editor, [targetPath[0], targetPath[2]] as [\n              number,\n              number\n            ]);\n          }}\n          disabled={!isSelected}\n        >\n          Insert col\n        </button>\n        <button\n          onClick={() => {\n            const targetPath = focusedPath?.slice(0, 2) ?? [];\n\n            if (targetPath.length !== 2) {\n              return;\n            }\n\n            deleteRow(editor, targetPath as [number, number]);\n          }}\n        >\n          Delete row\n        </button>\n        <button\n          onClick={() => {\n            const targetPath = focusedPath?.slice(0, 3) ?? [];\n\n            if (targetPath.length !== 3) {\n              return;\n            }\n\n            deleteCol(editor, [targetPath[0], targetPath[2]] as [\n              number,\n              number\n            ]);\n          }}\n        >\n          Delete col\n        </button>\n        <button\n          onClick={() => {\n            // ensured by disabled prop\n            const [tableIdx] = ReactEditor.findPath(editor, element) as [\n              number\n            ];\n\n            mergeCells(\n              editor,\n              tableIdx,\n              // ensured by disabled prop\n              selectedRange!\n            );\n          }}\n          disabled={!isSelected || !selectedRange}\n        >\n          Merge cells\n        </button>\n        <button\n          onClick={() => {\n            const [tableIdx, rowIdx, colIdx] = focusedPath?.slice(0, 3) ?? [];\n\n            if (\n              tableIdx === undefined ||\n              rowIdx === undefined ||\n              colIdx === undefined\n            ) {\n              return;\n            }\n\n            splitCell(editor, [tableIdx, rowIdx, colIdx]);\n          }}\n        >\n          Split cell\n        </button>\n      </div>\n    </TableContext.Provider>\n  );\n};\n\nexport const TableRow = ({\n  style = {},\n  // @ts-ignore\n  attributes,\n  // @ts-ignore\n  children,\n  // @ts-ignore\n  element,\n}) => {\n  return (\n    <tr style={style} {...attributes}>\n      {children}\n    </tr>\n  );\n};\n\nexport const TableCell = ({\n  style = {},\n  // @ts-ignore\n  attributes,\n  // @ts-ignore\n  children,\n  // @ts-ignore\n  element,\n}) => {\n  const editor = useSlate() as ReactEditor;\n  const {\n    settings,\n    resizeInfo: { resizing, direction, idx: resizeIdx, start, end },\n  } = useContext(TableContext);\n\n  // Assumption: no nested table, so the path is always [tableIdxAtRoot, rowIdx, colIdx]\n  const [, rowIdx, colIdx] = ReactEditor.findPath(editor, element) as [\n    number,\n    number,\n    number\n  ];\n\n  const { rowSpan = 1, colSpan = 1 } = element as {\n    rowSpan: number;\n    colSpan: number;\n  };\n\n  const isCellSelected = useCellSelection([\n    [rowIdx, colIdx],\n    [rowIdx + rowSpan - 1, colIdx + colSpan - 1],\n  ]);\n\n  let minHeight = settings.rowSizes[rowIdx]!;\n\n  if (resizing && direction === \"vertical\" && resizeIdx === rowIdx) {\n    minHeight += end - start;\n  }\n\n  const domNode = useMemo(() => {\n    try {\n      return ReactEditor.toDOMNode(editor, element) as HTMLTableCellElement;\n    } catch (error) {\n      // spanned cell has no dom node\n      return null;\n    }\n  }, [editor, element]);\n\n  useEffect(() => {\n    if (domNode !== null) {\n      // console.log(domNode.getBoundingClientRect());\n    }\n  }, [domNode]);\n\n  if (element.colSpan === 0 || element.rowSpan === 0) {\n    return null;\n  }\n\n  return (\n    <td\n      style={{\n        ...style,\n        border: \"1px solid\",\n        padding: \"4px 8px\",\n        verticalAlign: \"top\",\n        position: \"relative\",\n        // height for cell works as min-height in div\n        height: `${minHeight ?? 0}px`,\n      }}\n      className={isCellSelected ? \"cell-selected\" : \"\"}\n      rowSpan={rowSpan}\n      colSpan={colSpan}\n      {...attributes}\n    >\n      {children}\n      <ResizeHandle\n        direction=\"horizontal\"\n        idx={colIdx}\n        span={element.colSpan}\n      />\n      <ResizeHandle direction=\"vertical\" idx={rowIdx} span={element.rowSpan} />\n    </td>\n  );\n};\n\ntype ResizeHandleProps = {\n  idx: number;\n  direction: ResizeDirection;\n  span: number;\n};\n\nconst ResizeHandle = ({ idx, direction, span }: ResizeHandleProps) => {\n  const {\n    resizeInfo: {\n      resizing,\n      idx: targetIdx,\n      direction: resizeDirection,\n      startResize,\n    },\n  } = useContext(TableContext);\n\n  const active =\n    resizing && resizeDirection === direction && idx + span - 1 === targetIdx;\n\n  return (\n    <div\n      className={`table-resize-handle ${\n        direction === \"horizontal\"\n          ? \"column-resize-handle\"\n          : \"row-resize-handle\"\n      }`}\n      style={{\n        ...(active ? { backgroundColor: \"blue\", opacity: 1 } : {}),\n      }}\n      onMouseDown={(event) => {\n        event.preventDefault();\n\n        startResize(\n          idx,\n          span,\n          direction,\n          direction === \"horizontal\" ? event.clientX : event.clientY\n        );\n      }}\n    />\n  );\n};\n\n// @ts-ignore\nexport const TableButton = ({ icon }) => {\n  const editor = useSlate();\n\n  return (\n    <Button\n      active={isBlockActive(editor, \"table\")}\n      onMouseDown={(event: { preventDefault: () => void }) => {\n        event.preventDefault();\n        insertTable(editor);\n      }}\n    >\n      <Icon>{icon}</Icon>\n    </Button>\n  );\n};\n","// https://github.com/ianstormtaylor/slate/blob/main/site/examples/richtext.tsx\n\nimport React, { useCallback, useMemo } from \"react\";\nimport isHotkey from \"is-hotkey\";\nimport { Editable, withReact, useSlate, Slate } from \"slate-react\";\nimport {\n  Editor,\n  Transforms,\n  createEditor,\n  Descendant,\n  Element as SlateElement,\n  BaseEditor,\n} from \"slate\";\nimport { withHistory } from \"slate-history\";\n\nimport { Button, Icon, Toolbar } from \"./components\";\nimport { isBlockActive } from \"./common-utils\";\nimport { TableButton, TableCell, Table, TableRow } from \"./TableComponents\";\nimport { withTable } from \"./table-utils\";\nimport { DefaultCellHeight, DefaultCellWidth } from \"./table-constants\";\n\nconst HOTKEYS = {\n  \"mod+b\": \"bold\",\n  \"mod+i\": \"italic\",\n  \"mod+u\": \"underline\",\n  \"mod+`\": \"code\",\n};\n\nconst LIST_TYPES = [\"numbered-list\", \"bulleted-list\"];\nconst TEXT_ALIGN_TYPES = [\"left\", \"center\", \"right\", \"justify\"];\n\nconst RichTextExample = ({\n  handleUpdate,\n}: {\n  handleUpdate?: (arg: any) => void;\n}) => {\n  const renderElement = useCallback((props: any) => <Element {...props} />, []);\n  const renderLeaf = useCallback((props: any) => <Leaf {...props} />, []);\n  const editor = useMemo(\n    () => withTable(withHistory(withReact(createEditor()))),\n    []\n  );\n\n  return (\n    <Slate editor={editor} initialValue={initialValue} onChange={handleUpdate}>\n      <link\n        rel=\"stylesheet\"\n        href=\"https://fonts.googleapis.com/icon?family=Material+Icons\"\n      />\n      <Toolbar>\n        <MarkButton format=\"bold\" icon=\"format_bold\" />\n        <MarkButton format=\"italic\" icon=\"format_italic\" />\n        <MarkButton format=\"underline\" icon=\"format_underlined\" />\n        <MarkButton format=\"code\" icon=\"code\" />\n        <BlockButton format=\"heading-one\" icon=\"looks_one\" />\n        <BlockButton format=\"heading-two\" icon=\"looks_two\" />\n        <BlockButton format=\"block-quote\" icon=\"format_quote\" />\n        <BlockButton format=\"numbered-list\" icon=\"format_list_numbered\" />\n        <BlockButton format=\"bulleted-list\" icon=\"format_list_bulleted\" />\n        <BlockButton format=\"left\" icon=\"format_align_left\" />\n        <BlockButton format=\"center\" icon=\"format_align_center\" />\n        <BlockButton format=\"right\" icon=\"format_align_right\" />\n        <BlockButton format=\"justify\" icon=\"format_align_justify\" />\n        <TableButton icon=\"table_view\" />\n      </Toolbar>\n      <Editable\n        style={{ padding: \"8px 30px\" }}\n        renderElement={renderElement}\n        renderLeaf={renderLeaf}\n        placeholder=\"Enter some rich text\"\n        spellCheck\n        autoFocus\n        onKeyDown={(event) => {\n          for (const [hotkey, mark] of Object.entries(HOTKEYS)) {\n            if (isHotkey(hotkey, event as any)) {\n              event.preventDefault();\n              toggleMark(editor, mark);\n            }\n          }\n        }}\n      />\n    </Slate>\n  );\n};\n\nconst toggleBlock = (editor: Editor, format: string) => {\n  const isActive = isBlockActive(\n    editor,\n    format,\n    TEXT_ALIGN_TYPES.includes(format) ? \"align\" : \"type\"\n  );\n  const isList = LIST_TYPES.includes(format);\n\n  Transforms.unwrapNodes(editor, {\n    match: (n) =>\n      !Editor.isEditor(n) &&\n      SlateElement.isElement(n) &&\n      // @ts-ignore\n      LIST_TYPES.includes(n.type) &&\n      !TEXT_ALIGN_TYPES.includes(format),\n    split: true,\n  });\n\n  let newProperties: Partial<SlateElement>;\n  if (TEXT_ALIGN_TYPES.includes(format)) {\n    newProperties = {\n      // @ts-ignore\n      align: isActive ? undefined : format,\n    };\n  } else {\n    newProperties = {\n      // @ts-ignore\n      type: isActive ? \"paragraph\" : isList ? \"list-item\" : format,\n    };\n  }\n\n  Transforms.setNodes<SlateElement>(editor, newProperties);\n\n  if (!isActive && isList) {\n    const block = { type: format, children: [] };\n    Transforms.wrapNodes(editor, block);\n  }\n};\n\nconst toggleMark = (editor: BaseEditor, format: string) => {\n  const isActive = isMarkActive(editor, format);\n\n  if (isActive) {\n    Editor.removeMark(editor, format);\n  } else {\n    Editor.addMark(editor, format, true);\n  }\n};\n\nconst isMarkActive = (editor: BaseEditor, format: string | number) => {\n  const marks = Editor.marks(editor);\n  // @ts-ignore\n  return marks ? marks[format] === true : false;\n};\n\n// @ts-ignore\nconst Element = ({ attributes, children, element }) => {\n  const style = { textAlign: element.align };\n\n  switch (element.type) {\n    case \"block-quote\":\n      return (\n        <blockquote style={style} {...attributes}>\n          {children}\n        </blockquote>\n      );\n    case \"bulleted-list\":\n      return (\n        <ul style={style} {...attributes}>\n          {children}\n        </ul>\n      );\n    case \"heading-one\":\n      return (\n        <h1 style={style} {...attributes}>\n          {children}\n        </h1>\n      );\n    case \"heading-two\":\n      return (\n        <h2 style={style} {...attributes}>\n          {children}\n        </h2>\n      );\n    case \"list-item\":\n      return (\n        <li style={style} {...attributes}>\n          {children}\n        </li>\n      );\n    case \"numbered-list\":\n      return (\n        <ol style={style} {...attributes}>\n          {children}\n        </ol>\n      );\n    case \"table\":\n      return (\n        <Table style={style} attributes={attributes} element={element}>\n          {children}\n        </Table>\n      );\n    case \"table-row\":\n      return (\n        <TableRow style={style} attributes={attributes} element={element}>\n          {children}\n        </TableRow>\n      );\n    case \"table-cell\":\n      return (\n        <TableCell style={style} attributes={attributes} element={element}>\n          {children}\n        </TableCell>\n      );\n    default:\n      return (\n        <p style={style} {...attributes}>\n          {children}\n        </p>\n      );\n  }\n};\n\n// @ts-ignore\nconst Leaf = ({ attributes, children, leaf }) => {\n  if (leaf.bold) {\n    children = <strong>{children}</strong>;\n  }\n\n  if (leaf.code) {\n    children = <code>{children}</code>;\n  }\n\n  if (leaf.italic) {\n    children = <em>{children}</em>;\n  }\n\n  if (leaf.underline) {\n    children = <u>{children}</u>;\n  }\n\n  return <span {...attributes}>{children}</span>;\n};\n\n// @ts-ignore\nconst BlockButton = ({ format, icon }) => {\n  const editor = useSlate();\n  return (\n    <Button\n      active={isBlockActive(\n        editor,\n        format,\n        TEXT_ALIGN_TYPES.includes(format) ? \"align\" : \"type\"\n      )}\n      onMouseDown={(event: { preventDefault: () => void }) => {\n        event.preventDefault();\n        toggleBlock(editor, format);\n      }}\n    >\n      <Icon>{icon}</Icon>\n    </Button>\n  );\n};\n\n// @ts-ignore\nconst MarkButton = ({ format, icon }) => {\n  const editor = useSlate();\n  return (\n    <Button\n      active={isMarkActive(editor, format)}\n      onMouseDown={(event: { preventDefault: () => void }) => {\n        event.preventDefault();\n        toggleMark(editor, format);\n      }}\n    >\n      <Icon>{icon}</Icon>\n    </Button>\n  );\n};\n\n// const initialValue: Descendant[] = [\n//   {\n//     // @ts-ignore\n//     type: \"paragraph\",\n//     children: [\n//       { text: \"\" },\n//       // { text: \"This is editable \" },\n//       // // @ts-ignore\n//       // { text: \"rich\", bold: true },\n//       // { text: \" text, \" },\n//       // // @ts-ignore\n//       // { text: \"much\", italic: true },\n//       // { text: \" better than a \" },\n//       // // @ts-ignore\n//       // { text: \"<textarea>\", code: true },\n//       // { text: \"!\" },\n//     ],\n//   },\n//   // {\n//   //   type: \"paragraph\",\n//   //   children: [\n//   //     {\n//   //       text: \"Since it's rich text, you can do things like turn a selection of text \",\n//   //     },\n//   //     // @ts-ignore\n//   //     { text: \"bold\", bold: true },\n//   //     {\n//   //       text: \", or add a semantically rendered block quote in the middle of the page, like this:\",\n//   //     },\n//   //   ],\n//   // },\n//   // {\n//   //   // @ts-ignore\n//   //   type: \"block-quote\",\n//   //   children: [{ text: \"A wise quote.\" }],\n//   // },\n//   // {\n//   //   // @ts-ignore\n//   //   type: \"paragraph\",\n//   //   align: \"center\",\n//   //   children: [{ text: \"Try it out for yourself!\" }],\n//   // },\n// ];\n\n// const initialValue: Descendant[] = [\n//   {\n//     // @ts-ignore\n//     type: \"paragraph\",\n//     children: [{ text: \"\" }],\n//   },\n//   {\n//     type: \"table\",\n//     children: [\n//       {\n//         type: \"table-row\",\n//         children: [\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 7,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 9,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//         ],\n//       },\n//       {\n//         type: \"table-row\",\n//         children: [\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 3,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//         ],\n//       },\n//       {\n//         type: \"table-row\",\n//         children: [\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//         ],\n//       },\n//       {\n//         type: \"table-row\",\n//         children: [\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//         ],\n//       },\n//       {\n//         type: \"table-row\",\n//         children: [\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 3,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 3,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"1\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"2\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"3\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//         ],\n//       },\n//       {\n//         type: \"table-row\",\n//         children: [\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 3,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 3,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//         ],\n//       },\n//       {\n//         type: \"table-row\",\n//         children: [\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"4\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 3,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 3,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"15\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"6\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"2\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"3\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//         ],\n//       },\n//       {\n//         type: \"table-row\",\n//         children: [\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 3,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 3,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//         ],\n//       },\n//       {\n//         type: \"table-row\",\n//         children: [\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"7\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"8\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 3,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 3,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"9\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//         ],\n//       },\n//       {\n//         type: \"table-row\",\n//         children: [\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"4\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 3,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 3,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"5\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"6\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//         ],\n//       },\n//       {\n//         type: \"table-row\",\n//         children: [\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 1,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 2,\n//             colSpan: 3,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//         ],\n//       },\n//       {\n//         type: \"table-row\",\n//         children: [\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 1,\n//             colSpan: 7,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"7\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"8\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//           {\n//             type: \"table-cell\",\n//             rowSpan: 0,\n//             colSpan: 0,\n//             children: [\n//               {\n//                 // @ts-ignore\n//                 type: \"paragraph\",\n//                 children: [\n//                   {\n//                     text: \"9\",\n//                   },\n//                 ],\n//               },\n//             ],\n//           },\n//         ],\n//       },\n//     ],\n//   },\n// ];\n\nconst initialValue = [\n  {\n    type: \"paragraph\",\n    children: [\n      {\n        text: \"\",\n      },\n    ],\n  },\n  {\n    type: \"table\",\n    settings: {\n      colSizes: [150, 150, 150, 150, 150, 150],\n      rowSizes: [59.5, 59.5, 59.5, 59.5, 59.5, 59.5, 59.5],\n    },\n    children: [\n      {\n        type: \"table-row\",\n        children: [\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"na\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"1\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"2\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"3\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"4\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"5\",\n                  },\n                ],\n              },\n            ],\n          },\n        ],\n      },\n      {\n        type: \"table-row\",\n        children: [\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"a\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"a1\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"a2\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"a3\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"a4\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"a5\",\n                  },\n                ],\n              },\n            ],\n          },\n        ],\n      },\n      {\n        type: \"table-row\",\n        children: [\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"b\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"b1\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"b2\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"b3\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"b4\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"b5\",\n                  },\n                ],\n              },\n            ],\n          },\n        ],\n      },\n      {\n        type: \"table-row\",\n        children: [\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"c\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"c1\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"c2\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"c3\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"c4\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"c5\",\n                  },\n                ],\n              },\n            ],\n          },\n        ],\n      },\n      {\n        type: \"table-row\",\n        children: [\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"d\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"d1\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"d2\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"d3\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"d4\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"d5\",\n                  },\n                ],\n              },\n            ],\n          },\n        ],\n      },\n      {\n        type: \"table-row\",\n        children: [\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"e\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"e1\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"e2\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"e3\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"e4\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"e5\",\n                  },\n                ],\n              },\n            ],\n          },\n        ],\n      },\n      {\n        type: \"table-row\",\n        children: [\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"f\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"f1\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"f2\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"f3\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"f4\",\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            type: \"table-cell\",\n            rowSpan: 1,\n            colSpan: 1,\n            children: [\n              {\n                type: \"paragraph\",\n                children: [\n                  {\n                    text: \"f5\",\n                  },\n                ],\n              },\n            ],\n          },\n        ],\n      },\n    ],\n  },\n];\n\nexport default RichTextExample;\n"],"names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","lib","IS_MAC","MODIFIERS","ALIASES","CODES","isHotkey","hotkey","options","event","array","string","parseHotkey","check","object","compareHotkey","ret","isCodeHotkey","isKeyHotkey","byKey","values","length","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","value","optional","name","toKeyName","modifier","toKeyCode","err","key","expected","actual","code","_default","isHotkey_1","direction_1","direction","RTL","LTR","rtl","ltr","t","o","r","i","s","u","w","W","H","y","M","v","E","x","C","I","R","T","B","F","V","D","L","S","X","NOTHING","DRAFTABLE","DRAFT_STATE","die","error","args","getPrototypeOf","isDraft","isDraftable","isPlainObject","_a","isMap","isSet","objectCtorString","proto","Ctor","each","obj","iter","getArchtype","entry","index","thing","state","has","prop","set","propOrOldValue","is","target","latest","shallowCopy","base","strict","descriptors","keys","desc","freeze","deep","isFrozen","dontMutateFrozenCollections","_key","plugins","getPlugin","pluginKey","plugin","currentScope","getCurrentScope","createScope","parent_","immer_","usePatchesInScope","scope","patchListener","revokeScope","leaveScope","revokeDraft","enterScope","immer2","draft","processResult","result","baseDraft","finalize","maybeFreeze","rootScope","path","childValue","finalizeProperty","resultEach","isSet2","parentState","targetObject","rootPath","targetIsSet","res","createProxyProxy","parent","isArray","traps","objectTraps","arrayTraps","revoke","proxy","source","readPropFromProto","peek","prepareCopy","createProxy","getDescriptorFromProto","current2","currentState","markChanged","owner","fn","Immer2","config","recipe","defaultBase","self","base2","hasError","ip","patches","inversePatches","current","patch","applyPatchesImpl","currentImpl","copy","immer","produce","createDraft","finishDraft","PathRef","ref","op","affinity","Path","PointRef","point","Point","RangeRef","Range","DIRTY_PATHS","DIRTY_PATH_KEYS","FLUSHING","NORMALIZING","PATH_REFS","POINT_REFS","RANGE_REFS","reverse","paths","another","common","av","bv","min","as","bs","al","bl","list","last","operation","ancestor","_op","_op2","position","_op3","_position","_op4","onp","_typeof","_toPrimitive","input","hint","prim","_toPropertyKey","arg","_defineProperty","ownKeys$e","_objectSpread$e","applyToDraft","editor","selection","node","Node","_path","offset","text","_node","before","after","_point","_path2","_node2","prevPath","prev","_parent","_index","Text","Scrubber","_point2","_key2","_path3","newPath","_node3","_parent2","_index2","truePath","newParent","newIndex","_point3","_key3","_path4","_index3","_parent3","_point4","_key4","_prev","next","preferNext","_path5","_offset","_text","_node4","_before","_after","_point5","_key5","_path6","properties","newProperties","_node5","_key6","_key7","_newProperties","_key8","_value","_path7","_properties","_node6","_parent4","_index4","newNode","_before2","_after2","_before3","_after3","_point6","_key9","GeneralTransforms","NodeTransforms","nodes","props","element","SelectionTransforms","isDeepEqual","_objectWithoutPropertiesLoose","excluded","sourceKeys","_objectWithoutProperties","sourceSymbolKeys","_excluded$4","ownKeys$d","_objectSpread$d","range","anchor","focus","end","rs","re","ts","te","start","isAfterStart","isBeforeEnd","rest","s1","e1","s2","e2","affinityAnchor","affinityFocus","isCollapsed","isElement","Editor","Element","val","elementVal","elementKey","_excluded$3","_excluded2$3","IS_NODE_LIST_CACHE","root","children","child","childPath","newRoot","nodeEntries","_ref","leaf","_leaf","cachedResult","isNodeList","pass","from","to","visited","nextIndex","_newPath","parentPath","ownKeys$c","_objectSpread$c","Operation","inversePath","inverseNewPath","IS_EDITOR_CACHE","isEditor","cachedIsEditor","at","unit","fragment","isNormalizing","prevNode","curNode","Span","ownKeys$b","_objectSpread$b","_scrubber","scrubber","_excluded$2","_excluded2$2","ownKeys$a","_objectSpread$a","loose","omitText","decorations","leaves","dec","leafEnd","decorationStart","decorationEnd","leafStart","middle","off","_off","getDefaultInsertLocation","matchPath","getCharacterDistance","str","isRTL","isLTR","codepoints","codepointsIteratorRTL","left","CodepointType","right","distance","gb11","gb12Or13","char","type","getCodepointType","intersects","endsWithEmojiZWJ","endsWithOddNumberOfRIs","isBoundaryPair","SPACE","PUNCTUATION","CHAMELEON","getWordDistance","dist","started","charDist","remaining","splitByCharacterDistance","isWordCharacter","nextChar","nextRemaining","char1","isLowSurrogate","char2","isHighSurrogate","charCode","reExtend","rePrepend","reSpacingMark","reL","reV","reT","reLV","reLVT","reExtPict","NonBoundaryPairs","endingEmojiZWJ","endingRIs","match","numRIs","TextTransforms","voids","startRef","endRef","Transforms","startPoint","endPoint","ownKeys$9","_objectSpread$9","BATCHING_DIRTY_PATHS","isBatchingDirtyPaths","batchDirtyPaths","update","updateDirtyPaths","newDirtyPaths","transform","oldDirtyPaths","oldDirtyPathKeys","dirtyPaths","dirtyPathKeys","add","apply","_ref2","getDirtyPaths","levels","descendants","ancestors","previousPath","oldAncestors","newAncestors","_ancestor","_p","resultPath","_ancestors","_levels","nextPath","getFragment","normalizeNode","shouldHaveInlines","currentNode","_child","isLast","isInlineOrText","newChild","_newChild","elementChild","shouldNormalize","iteration","initialDirtyPathsLength","maxIterations","above","mode","ownKeys$8","_objectSpread$8","addMark","parentNode","expandedSelection","markAcceptingVoidSelected","selectedNode","selectedPath","marks","ownKeys$7","_objectSpread$7","ownKeys$6","_objectSpread$6","deleteBackward","deleteForward","deleteFragment","edges","ownKeys$5","_objectSpread$5","elementReadOnly","first","ownKeys$4","_objectSpread$4","getVoid","hasBlocks","hasInlines","hasPath","hasTexts","insertBreak","insertNode","insertSoftBreak","ownKeys$3","_objectSpread$3","insertText","isBlock","isEdge","isEmpty","isEnd","isStart","_excluded$1","_excluded2$1","_rest","markedVoid","block","blockPath","pointAfterLocation","span","universal","ignoreNonSelectable","matches","hit","isLower","emit","normalize","force","getDirtyPathKeys","popDirtyPath","allPaths","allPathKeys","dirtyPath","_","_dirtyPath","_entry","pathRef","pathRefs","refs","depth","edge","firstPath","lastPath","pointRef","pointRefs","positions","isNewBlock","blockText","leafTextRemaining","leafTextOffset","isFirst","calcDistance","previous","pointBeforeLocation","rangeRef","rangeRefs","ownKeys$2","_objectSpread$2","removeMark","setNormalizing","unhangRange","endBlock","skip","withoutNormalizing","shouldMergeNodesRemovePrevNode","deleteText","_Editor$void","_Editor$void2","hanging","furthestVoid","voidPath","opts","_end","endOfDoc","startBlock","isAcrossBlocks","isSingleText","startNonEditable","endNonEditable","removedText","startUnref","endUnref","insertFragment","batchDirty","inlineElementMatch","_inlinePath","blockMatch","isBlockStart","isBlockEnd","isBlockEmpty","mergeStart","mergeEnd","matcher","isRoot","starts","middles","ends","starting","inlineMatch","inlinePath","isInlineStart","isInlineEnd","middleRef","collapse","deselect","move","select","ownKeys$1","_objectSpread$1","setPoint","setSelection","oldProps","newProps","insertNodes","isAtEnd","batchedOps","_loop","liftNodes","parentNodeEntry","toPath","_toPath","splitPath","_toPath2","_excluded","_excluded2","hasSingleChildNest","mergeNodes","commonPath","isPreviousSibling","emptyAncestor","emptyRef","moveNodes","toRef","targets","removeNodes","depths","setNodes","compare","merge","split","splitMode","endAtEndOfNode","startAtStartOfNode","nodeProp","hasChanges","deleteRange","splitNodes","height","always","beforeRef","afterRef","highest","voidMatch","nudge","voidNode","afterPath","siblingHeight","highestPath","lowestPath","_afterRef","unsetNodes","unwrapNodes","ownKeys","_objectSpread","wrapNodes","roots","commonNodeEntry","commonNode","wrapperPath","wrapper","_ret","createEditor","_len","_len2","_len3","_len4","_len5","_len6","_len7","_len8","_len9","_len10","_key10","_len11","_key11","_len12","_key12","_len13","_key13","_len14","_key14","_len15","_key15","_len16","_key16","_len17","_key17","_len18","_key18","_len19","_key19","_len20","_key20","_len21","_key21","_len22","_key22","_len23","_key23","_len24","_key24","_len25","_key25","_len26","_key26","_len27","_key27","_len28","_key28","_len29","_key29","_len30","_key30","_len31","_key31","_len32","_key32","_len33","_key33","_len34","_key34","_len35","_key35","_len36","_key36","_len37","_key37","_len38","_key38","_len39","_key39","_len40","_key40","_len41","_key41","_len42","_key42","_len43","_key43","_len44","_key44","_len45","_key45","_len46","_key46","_len47","_key47","_len48","_key48","_len49","_key49","_len50","_key50","_len51","_key51","_len52","_key52","_len53","_key53","_len54","_key54","_len55","_key55","_len56","_key56","_len57","_key57","_len58","_key58","_len59","_key59","_len60","_key60","_len61","_key61","_len62","_key62","_len63","_key63","_len64","_key64","_len65","_key65","_len66","_key66","_len67","_key67","_len68","_key68","_len69","_key69","_len70","_key70","_len71","_key71","_len72","_key72","_len73","_key73","_len74","_key74","_len75","_key75","_len76","_key76","_len77","_key77","resizeObservers","hasActiveObservations","ro","hasSkippedObservations","msg","deliverResizeLoopError","ResizeObserverBoxOptions","ResizeObserverSize","inlineSize","blockSize","DOMRectReadOnly","width","top","bottom","rectangle","isSVG","isHidden","_b","offsetWidth","offsetHeight","isReplacedElement","global","cache","scrollRegexp","verticalRegexp","IE","parseDimension","pixel","size","switchSizes","zeroBoxes","calculateBoxSizes","forceRecalculation","cs","svg","removePadding","canScrollVertically","canScrollHorizontally","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTop","borderRight","borderBottom","borderLeft","horizontalPadding","verticalPadding","horizontalBorderArea","verticalBorderArea","horizontalScrollbarThickness","verticalScrollbarThickness","widthReduction","heightReduction","contentWidth","contentHeight","borderBoxWidth","borderBoxHeight","boxes","calculateBoxSize","observedBox","borderBoxSize","contentBoxSize","devicePixelContentBoxSize","ResizeObserverEntry","calculateDepthForNode","broadcastActiveObservations","shallowestDepth","callbacks","entries","ot","targetDepth","_i","callbacks_1","callback","gatherActiveObservationsAtDepth","process","trigger","notify","cb","queueMicroTask","toggle_1","el_1","queueResizeObserver","watching","isWatching","CATCH_PERIOD","observerConfig","events","time","timeout","scheduled","Scheduler","_this","until","elementsHaveResized","scheduler","updateCount","skipNotifyOnElement","ResizeObservation","ResizeObserverDetail","resizeObserver","observerMap","getObservationIndex","observationTargets","ResizeObserverController","detail","firstObservation","lastObservation","ResizeObserver","EditorContext","createContext","useSlateStatic","useContext","REACT_MAJOR_VERSION","React","IS_IOS","IS_APPLE","IS_ANDROID","IS_FIREFOX","IS_WEBKIT","IS_EDGE_LEGACY","IS_CHROME","IS_CHROME_LEGACY","IS_ANDROID_CHROME_LEGACY","IS_FIREFOX_LEGACY","IS_UC_MOBILE","IS_WECHATBROWSER","CAN_USE_DOM","HAS_BEFORE_INPUT_SUPPORT","NODE_TO_INDEX","NODE_TO_PARENT","EDITOR_TO_WINDOW","EDITOR_TO_ELEMENT","EDITOR_TO_PLACEHOLDER_ELEMENT","ELEMENT_TO_NODE","NODE_TO_ELEMENT","NODE_TO_KEY","EDITOR_TO_KEY_TO_ELEMENT","IS_READ_ONLY","IS_FOCUSED","IS_COMPOSING","EDITOR_TO_USER_SELECTION","EDITOR_TO_ON_CHANGE","EDITOR_TO_SCHEDULE_FLUSH","EDITOR_TO_PENDING_INSERTION_MARKS","EDITOR_TO_USER_MARKS","EDITOR_TO_PENDING_DIFFS","EDITOR_TO_PENDING_ACTION","EDITOR_TO_PENDING_SELECTION","EDITOR_TO_FORCE_RENDER","PLACEHOLDER_SYMBOL","MARK_PLACEHOLDER_SYMBOL","DOMText","getDefaultView","isDOMComment","isDOMNode","isDOMElement","window","isDOMSelection","isDOMText","isPlainTextOnlyPaste","normalizeDOMPoint","domPoint","getEditableChildAndIndex","getEditableChild","hasShadowRoot","childNodes","triedForward","triedBackward","getPlainText","domNode","childNode","display","catchSlateFragment","getSlateFragmentAttribute","dataTransfer","htmlData","isTrackedMutation","mutation","batch","document","ReactEditor","parentMutation","addedNodes","removedNodes","Key","_EDITOR_TO_SCHEDULE_F","el","domSelection","Element$1","rect","isPrev","_range","domRange","editable","editorEl","targetEl","data","slateNode","originEvent","KEY_TO_ELEMENT","selector","texts","attr","trueLength","nextText","_nextText$textContent","domText","isBackward","domAnchor","domFocus","startNode","startOffset","endNode","endOffset","startEl","isStartAtZeroWidth","endEl","isEndAtZeroWidth","domEl","exactMatch","suppressThrow","nearestNode","nearestOffset","textNode","_domNode$textContent","_domNode$textContent2","potentialVoidNode","leafNode","contents","removals","leafNodes","_slateNode","_focusNode$textConten","anchorNode","anchorOffset","focusNode","focusOffset","firstRange","lastRange","getLastChildren","firstNodeRow","lastNodeRow","firstNode","lastNode","_anchorNode$textConte","verifyDiffState","textDiff","diff","Text$1","nextNode","applyStringDiff","diffs","longestCommonPrefixLength","longestCommonSuffixLength","max","normalizeStringDiff","targetText","prefixLength","suffixLength","normalized","mergeStringDiffs","overlap","applied","sliceEnd","targetRange","normalizePoint","parentBlock","normalizeRange","transformPendingPoint","pendingDiffs","_anchor","_transformed","transformed","transformPendingRange","transformTextDiff","id","RESOLVE_DELAY","FLUSH_DELAY","debug","isDataTransfer","createAndroidInputManager","scheduleOnDOMSelectionChange","onDOMSelectionChange","flushing","compositionEndTimeoutId","flushTimeoutId","actionTimeoutId","idCounter","insertPositionHint","applyPendingSelection","pendingSelection","performAction","action","_targetRange","flush","hasPendingDiffs","hasPendingAction","selectionRef","scheduleSelectionChange","_EDITOR_TO_PENDING_DI","_EDITOR_TO_PENDING_DI2","pendingMarks","userMarks","handleCompositionEnd","_event","handleCompositionStart","updatePlaceholderVisibility","forceHide","placeholderElement","storeDiff","_EDITOR_TO_PENDING_DI3","idx","change","merged","scheduleAction","run","handleDOMBeforeInput","_targetRange2","nativeTargetRange","canStoreDiff","_start","relevantPendingDiffs","handleUserSelect","targetNode","_nativeTargetRange","nativeCollapsed","parts","line","_start2","_end2","_diff","hintPosition","diffPosition","scheduleFlush","_EDITOR_TO_PENDING_DI4","hasPendingChanges","isFlushing","pathChanged","parentPathChanged","handleInput","handleKeyDown","handleDomMutations","mutations","_EDITOR_TO_FORCE_REND","useIsMounted","isMountedRef","useRef","useEffect","useIsomorphicLayoutEffect","useLayoutEffect","useMutationObserver","mutationObserver","useState","MUTATION_OBSERVER_CONFIG$1","useAndroidInputManager","isMounted","inputManager","shallowCompare","obj1","obj2","isDecorationFlagsEqual","other","rangeOwnProps","otherOwnProps","isElementDecorationsEqual","isTextDecorationsEqual","String$1","isMarkPlaceholder","ZeroWidthString","TextString","isTrailing","getTextContent","initialText","textWithTrailing","MemoizedText$1","memo","forwardRef","isLineBreak","attributes","PLACEHOLDER_DELAY","disconnectPlaceholderResizeObserver","placeholderResizeObserver","releaseObserver","clearTimeoutRef","timeoutRef","Leaf","renderPlaceholder","renderLeaf","DefaultLeaf","placeholderRef","showPlaceholder","setShowPlaceholder","showPlaceholderTimeoutRef","callbackPlaceholderRef","useCallback","placeholderEl","_leaf$onPlaceholderRe","ResizeObserver$1","_leaf$onPlaceholderRe2","leafIsPlaceholder","placeholderProps","MemoizedLeaf","callbackRef","MemoizedText","renderElement","DefaultElement","readOnly","useReadOnly","isInline","useChildren","dir","getDirection","Tag","MemoizedElement","DecorateContext","useDecorate","SelectedContext","useSelected","decorate","isLeafBlock","sel","ds","ReadOnlyContext","SlateContext","useSlate","context","useTrackUserInput","receivedUserInput","animationFrameIdRef","onUserInput","TRIPLE_CLICK","HOTKEYS","APPLE_HOTKEYS","WINDOWS_HOTKEYS","create","generic","apple","windows","isGeneric","isApple","isWindows","Hotkeys","createRestoreDomManager","bufferedMutations","clear","registerMutations","trackedMutations","restoreDOM","MUTATION_OBSERVER_CONFIG","RestoreDOMComponent","Component","_this$mutationObserve","_this$mutationObserve2","_this$mutationObserve3","_this$manager2","pendingMutations","_this$manager","_this$manager3","_this$mutationObserve4","RestoreDOM","Children","Editable","defaultRenderPlaceholder","DefaultPlaceholder","autoFocus","defaultDecorate","propsOnDOMBeforeInput","placeholder","scrollSelectionIntoView","defaultScrollSelectionIntoView","userStyle","disableDefaultStyles","isComposing","setIsComposing","deferredOperations","placeholderHeight","setPlaceholderHeight","forceRender","useReducer","useMemo","androidInputManagerRef","throttle","androidInputManager","activeElement","anchorNodeSelectable","focusNodeSelectable","debounce","_androidInputManagerR","_androidInputManagerR2","setDomSelection","forceChange","hasDomSelection","editorElement","hasDomSelectionInEditor","slateRange","_anchorNode","newDomRange","ensureSelection","timeoutId","animationFrameId","ensureDomSelection","onDOMBeforeInput","isDOMEventHandled","_EDITOR_TO_USER_SELEC","isCompositionChange","native","_node$parentElement","_window$getComputedSt","_lastText$textContent","lastText","toRestore","placeHolderResizeHandler","_placeholderEl$getBou","unset","mark","isEventHandled","_text2","relatedTarget","_block$","startVoid","endVoid","_androidInputManagerR3","placeholderMarks","_androidInputManagerR4","isDOMEventTargetInput","draggedRange","_androidInputManagerR5","nativeEvent","maybeHistoryEditor","_maybeHistoryEditor","leafEl","scrollIntoView","handler","shouldTreatEventAsHandled","FocusedContext","SlateSelectorContext","useSelectorContext","eventListeners","slateRef","onChange","listener","selectorContext","Slate","onSelectionChange","onValueChange","initialValue","setContext","handleSelectorChange","onContextChange","_options$operation","prevContext","isFocused","setIsFocused","doRectsIntersect","compareRect","areRangesSameLine","range1","range2","rect1","rect2","findCurrentLineRange","parentRange","parentRangeBoundary","withReact","clipboardFormatKey","parentBlockEntry","parentBlockPath","parentElementRange","currentLineRange","pathRefMatches","pendingAction","getMatches","changedPath","changedNode","changedNodeKey","changedPathRef","attach","zw","isNewline","encoded","div","decoded","parsed","lines","maybeBatchUpdates","ReactDOM","History","SAVING","MERGING","HistoryEditor","withHistory","history","redos","undos","inverseOps","operations","lastBatch","lastOp","save","shouldSave","shouldMerge","stack","sheetForTag","tag","createStyleElement","StyleSheet","_proto","rule","sheet","MS","MOZ","WEBKIT","COMMENT","RULESET","DECLARATION","IMPORT","KEYFRAMES","LAYER","abs","assign","hash","charat","trim","pattern","replace","replacement","indexof","search","substr","begin","strlen","sizeof","append","combine","column","character","characters","caret","slice","token","alloc","dealloc","delimit","delimiter","whitespace","escaping","count","commenter","identifier","compile","parse","rules","rulesets","pseudo","points","declarations","atrule","property","variable","scanning","ampersand","reference","comment","declaration","ruleset","post","j","z","serialize","output","stringify","middleware","collection","rulesheet","memoize","identifierWithPointTracking","toRules","getRules","fixedElements","compat","isImplicitRule","parentRules","removeLabel","prefix","prefixer","defaultStylisPlugins","createCache","ssrStyles","dataEmotionAttribute","stylisPlugins","inserted","container","nodesToHydrate","attrib","_insert","omnipresentPlugins","currentSheet","finalizingPlugins","serializer","stylis","styles","serialized","shouldCache","murmur2","len","unitlessKeys","hyphenateRegex","animationRegex","isCustomProperty","isProcessableValue","processStyleName","styleName","processStyleValue","p1","p2","cursor","unitless","handleInterpolation","mergedProps","registered","interpolation","createStringFromObject","previousCursor","cached","interpolated","labelPattern","serializeStyles","stringMode","strings","identifierName","hashString","isBrowser","getRegisteredStyles","registeredStyles","classNames","rawClassName","className","registerStyles","isStringTag","insertStyles","insertWithoutScoping","css","createEmotion","keyframes","animation","injectGlobal","cx","classnames","ids","cls","toAdd","_createEmotion","Button","active","reversed","jsx","Icon","Menu","Toolbar","isBlockActive","format","blockType","getSelectedTablePath","tableAbove","getTableInfo","tableIdx","tableNode","numberOfRows","numberOfCols","MinCellWidth","MinCellHeight","DefaultCellWidth","DefaultCellHeight","initTable","rows","cols","table","rowIdx","initRow","row","colIdx","initCell","getSpannedRowIndexesOfCol","insertAt","colSpannedAt","checkCell","findSpanRootLocation","currentLocation","cell","col","deleteCol","deleteAt","tableInfo","breakCondition","spanRootAt","colSpannedFrom","colSpanCell","spanRoot","getSpannedColIndexesOfRow","rowSpannedAt","deleteRow","rowSpannedFrom","rowSpanCell","insertCol","newCell","insertRow","newRow","insertTable","mergeCells","selectedRange","startRow","startCol","endRow","endCol","splitCell","targetCell","rowSpan","colSpan","withDeleteTableBackward","cellPath","withDeleteTableForward","withNormalizeTable","parentEntry","withInsertTextInTable","anchorCellPath","focusCellPath","withTable","findSpanCornerLocation","useTableSelection","setSelectedRange","isSelected","tableRootPath","currentSelectedRange","normalizedSelectedRange","expansionDetected","breaker","limit","leftBorder","rootLocation","newLocation","rightBorder","cornerLocation","topBorder","bottomBorder","TableContext","useCellSelection","useResizeHandle","resizing","setResizing","setDirection","setIdx","setSpan","setStart","setEnd","targetIdx","idx2","span2","direction2","end2","invariant","minSize","sizes","Table","style","resizeInfo","focusedPath","jsxs","colSize","minWidth","targetPath","TableRow","TableCell","settings","resizeIdx","isCellSelected","minHeight","ResizeHandle","resizeDirection","startResize","TableButton","icon","LIST_TYPES","TEXT_ALIGN_TYPES","RichTextExample","handleUpdate","MarkButton","BlockButton","toggleMark","toggleBlock","isActive","isList","SlateElement","isMarkActive"],"mappings":"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H,CAAA,CAAA,CAEY,CAAA,CAGlB,EAurEA/U,GAAA,CAAqB,CACnB,KAAA,YACQ,SAAA,CACI,CACR,KAAA,EACQ,CACR,CACF,EACF,CACA,KAAA,QACQ,SAAA,CACI,SAAA,CAAA,IAAA,IAAA,IAAA,IAAA,IAAA,GAAA,EAC+B,SAAA,CAAA,KAAA,KAAA,KAAA,KAAA,KAAA,KAAA,IAAA,CACY,EACrD,SAAA,CACU,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,GACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,GACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,GACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,GACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,GACQ,CACR,CACF,CACF,CACF,CACF,CACF,EACF,CACA,KAAA,YACQ,SAAA,CACI,CACR,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,GACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,CACF,CACF,EACF,CACA,KAAA,YACQ,SAAA,CACI,CACR,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,GACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,CACF,CACF,EACF,CACA,KAAA,YACQ,SAAA,CACI,CACR,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,GACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,CACF,CACF,EACF,CACA,KAAA,YACQ,SAAA,CACI,CACR,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,GACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,CACF,CACF,EACF,CACA,KAAA,YACQ,SAAA,CACI,CACR,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,GACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,CACF,CACF,EACF,CACA,KAAA,YACQ,SAAA,CACI,CACR,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,GACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,EACF,CACA,KAAA,aACQ,QAAA,EACG,QAAA,EACA,SAAA,CACC,CACR,KAAA,YACQ,SAAA,CACI,CACR,KAAA,IACQ,CACR,CACF,CACF,CACF,CACF,CACF,CACF,CACF,CAEJ;;","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47]}